<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Stm32常见问题合集</title>
      <link href="/2020/09/09/STM32/Stm32%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%90%88%E9%9B%86/"/>
      <url>/2020/09/09/STM32/Stm32%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%90%88%E9%9B%86/</url>
      
        <content type="html"><![CDATA[<h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><ol><li>error: #20: identifier “xxx” is undefined</li><li>error: #24: invalid octal digit</li></ol><h1 id="1、实际已经定义却出现-error-20-identifier-“xxx”-is-undefined-的错误"><a href="#1、实际已经定义却出现-error-20-identifier-“xxx”-is-undefined-的错误" class="headerlink" title="1、实际已经定义却出现 error: #20: identifier “xxx” is undefined 的错误"></a>1、实际已经定义却出现 error: #20: identifier “xxx” is undefined 的错误</h1><h4 id="迷之错误：error-20-identifier-“xxx”-is-undefined"><a href="#迷之错误：error-20-identifier-“xxx”-is-undefined" class="headerlink" title="迷之错误：error: #20: identifier “xxx” is undefined"></a>迷之错误：error: #20: identifier “xxx” is undefined</h4><p>实际上我是定义了xxx的；但是编译器却一直报错；<br><strong>故事是这样的：</strong><br>我定义了a.h，b.h，c.h。其中a.h和b.h都是子功能头文件，而c.h是包含所有项目头文件的集合体，比如数据类型，当然也包含a.h和b.h；关系看下面代码；</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*  c.h  */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> C_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> C_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Type.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"a.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"b.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"x.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"xx.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"xxx.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">/* C_H */</span></span></span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*  a.h  */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"c.h"</span>      <span class="comment">//为了让头文件看起来更简单，我为每一个子功能头文件都包含了c.h，这将是后来引起错误的地方；</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span>  <span class="class"><span class="keyword">struct</span>  <span class="title">ITEM</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="comment">//各成员</span></span><br><span class="line">&#125;Item_t;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*  b.h  */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"c.h"</span>     </span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span>  <span class="title">BLOCK</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">Item_t  Item1;       <span class="comment">// 这里我引用了a.h中的Item_t类型，并定义了变量；这里就是报错的地方；</span></span><br><span class="line"><span class="comment">//其他成员；</span></span><br><span class="line"></span><br><span class="line">&#125;Block;</span><br></pre></td></tr></table></figure><p><strong>这种情况下就出了问题，那么问题在哪儿哪？</strong><br>在b.h中的<strong>Item_t Item1; \</strong> ，这个地方就是报错的地方；显示error: #20: identifier “Item_t” is undefined，顺着这儿往上看的，这个问题就出在了a.h里的这个<strong>#include “c.h” *<em>；对于a.h来说，调用的 *</em>#include “c.h”</strong>可以展开为：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*  a.h  */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Type.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"a.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"b.h"</span>     </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"x.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"xx.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"xxx.h"</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>  <span class="title">ITEM</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="comment">//各成员</span></span><br><span class="line">&#125;Item_t;</span><br></pre></td></tr></table></figure><p>所以错误的地方是：相对于a.h文件来说，在定义ITEM结构体之前就已经调用了b.h，而b.h里又有对Item_t类型变量的定义，所以就出顺序逻辑错误；</p><h4 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h4><p><strong>在大工程中尽量避免在头文件中使用总头文件</strong></p><p><strong>所以这里就在a.h和b.h中去掉包含的c.h文件，需要什么头文件就用什么头文件；所以修改完之后是：</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*  a.h  */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Type.h"</span>     </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"x.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"xx.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"xxx.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span>  <span class="class"><span class="keyword">struct</span>  <span class="title">ITEM</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="comment">//各成员</span></span><br><span class="line">&#125;Item_t;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*  b.h  */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"a.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"x.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"xx.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"xxx.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span>  <span class="title">BLOCK</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">Item_t  Item1;    </span><br><span class="line"><span class="comment">//其他成员；</span></span><br><span class="line"></span><br><span class="line">&#125;Block;</span><br></pre></td></tr></table></figure><h1 id="error-24-invalid-octal-digit"><a href="#error-24-invalid-octal-digit" class="headerlink" title="error: #24: invalid octal digit"></a>error: #24: invalid octal digit</h1><p>没有这个八进制，八进制错误比如 <code>09</code> 是错的要换成 <code>9</code> </p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>飞行器互补滤波姿态求解器设计/转</title>
      <link href="/2020/08/21/MPU6050/%E9%A3%9E%E8%A1%8C%E5%99%A8%E4%BA%92%E8%A1%A5%E6%BB%A4%E6%B3%A2%E5%A7%BF%E6%80%81%E6%B1%82%E8%A7%A3%E5%99%A8%E8%AE%BE%E8%AE%A1-%E8%BD%AC/"/>
      <url>/2020/08/21/MPU6050/%E9%A3%9E%E8%A1%8C%E5%99%A8%E4%BA%92%E8%A1%A5%E6%BB%A4%E6%B3%A2%E5%A7%BF%E6%80%81%E6%B1%82%E8%A7%A3%E5%99%A8%E8%AE%BE%E8%AE%A1-%E8%BD%AC/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Stm32 </category>
          
          <category> MPU6050 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Stm32 </tag>
            
            <tag> MPU6050 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>姿态角解算</title>
      <link href="/2020/08/16/MPU6050/%E5%A7%BF%E6%80%81%E8%A7%92%E8%A7%A3%E7%AE%97/"/>
      <url>/2020/08/16/MPU6050/%E5%A7%BF%E6%80%81%E8%A7%92%E8%A7%A3%E7%AE%97/</url>
      
        <content type="html"><![CDATA[<a id="more"></a><blockquote><p><a href="https://zhuanlan.zhihu.com/p/36374943" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/36374943</a></p><p><a href="https://blog.csdn.net/victor_zy/article/details/82862904" target="_blank" rel="noopener">https://blog.csdn.net/victor_zy/article/details/82862904</a></p><p><a href="https://blog.csdn.net/qq_37382172/article/details/96481091?utm_medium=distribute.pc_relevant.none-task-blog-baidujs-3" target="_blank" rel="noopener">https://blog.csdn.net/qq_37382172/article/details/96481091?utm_medium=distribute.pc_relevant.none-task-blog-baidujs-3</a></p><p><a href="https://zhuanlan.zhihu.com/p/64539108" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/64539108</a></p><p><a href="https://zhuanlan.zhihu.com/p/48876718" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/48876718</a></p></blockquote><blockquote><p> <a href="https://www.cnblogs.com/zjutlitao/p/3915786.html" target="_blank" rel="noopener">[stm32] MPU6050 HMC5883 Kalman 融合算法移植 </a></p><p><a href="https://www.cnblogs.com/firege/p/5806073.html" target="_blank" rel="noopener">MPU6050传感器—姿态检测(野火)</a></p></blockquote><p><img src="https://picb.zhimg.com/v2-275110af0a13b1ac4da880dc9cedf1d2_r.jpg" alt="img"></p><h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a><strong>介绍</strong></h1><p>MPU6050 是 InvenSense 公司推出的全球首款整合性 6 轴运动处理组件，相较于多组件方案，免除了组合陀螺仪与加速器时之轴间差的问题，减少了安装空间。</p><p><img src="https://img-blog.csdnimg.cn/2018111215123741.png" alt="img"></p><p>（1）绕X轴旋转角度为roll，绕Y轴旋转角度为pitch，绕Z轴旋转角度为yaw。</p><p>（2）加速度传感器，本质是力传感器。用来检查上下左右前后哪几个面都受了多少力（包括重力），然后计算角度。</p><p>（3）陀螺仪，本质是角速度检测仪。比如，一块板，以X轴为轴心，在一秒钟的时间转到了90度，那么它在X轴上的角速度就是 90度/秒 （DPS, 角速度单位，Degree Per Second的缩写°/S ，体现了转动的快慢）</p><p>（4）MPU分辨率：3轴加速度 和3轴陀螺仪分别用了3个16位的ADC, 也就是说，加速度有3个16位ADC，其中每个轴使用了一个。也是说，每个轴输出的数据，是2^16 也就是 -32768 —- +32768。陀螺仪也是一样。</p><h3 id="MPU6050原理图"><a href="#MPU6050原理图" class="headerlink" title="MPU6050原理图"></a><strong>MPU6050原理图</strong></h3><p><img src="https://img-blog.csdnimg.cn/20181112152515507.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llcHBjaGFu,size_16,color_FFFFFF,t_70" alt="img"></p><p>其中，SCL 和 SDA 是连接 MCU 的 IIC 接口，MCU 通过这个 IIC 接口来控制 MPU6050，另外还有一个 IIC 接口：AUX_CL 和 AUX_DA，这个接口可用来连接外部从设备，比如磁传感器，这样就可以组成一个九轴传感器。</p><h3 id="扩展性"><a href="#扩展性" class="headerlink" title="扩展性"></a><strong>扩展性</strong></h3><p>MPU6050 内部整合了 3 轴陀螺仪和 3 轴加速度传感器，并且含有一个第二 IIC 接口，可用于连接外部磁力传感器即AUX_CL 和 AUX_DA，并利用自带的数字运动处理器（DMP: DigitalMotion Processor）硬件加速引擎，通过主 IIC 接口，向应用端输出完整的 9 轴融合演算数据。</p><h1 id="初始化步骤"><a href="#初始化步骤" class="headerlink" title="初始化步骤"></a><strong>初始化步骤</strong></h1><p>（1）初始化 IIC  接口</p><p>（2）复位 MPU6050</p><p>MPU6050 内部所有寄存器恢复默认值</p><p>（3）设置角速度传感器（陀螺仪）和加速度传感器的满量程范围</p><p>上面说的-32768 — +32768 ，那么这个数字到底代表了什么呢？比如陀螺仪 32768 到底是指角速度达到多少度/秒 ？这个其实是根据MPU6050设置的量程来决定的，量程不一样，32768代表的值就不一样。按陀螺仪来说，MPU6050 有四个量程可选：<br>±250，±500，±1000，±2000 度/s<br>比方说，设置了是 ±250 , 那么-32768 —- +32768 就代表了 -250 —- +250 。此时它的LSB(最低有效位) 是 131 LSB/(度/s)</p><p>（4）设置其它参数</p><p>   关闭中断、关闭 AUX IIC 接口、禁止 FIFO、设置陀螺仪采样率和设置数字低通滤波器（DLPF）等。</p><p>（5）配置系统时钟源并使能角速度传感器和加速度传感器</p><h1 id="DMP（Digital-Motion-Processing-）"><a href="#DMP（Digital-Motion-Processing-）" class="headerlink" title="DMP（Digital Motion Processing ）"></a><strong>DMP</strong>（Digital Motion Processing ）</h1><h3 id="DMP是什么"><a href="#DMP是什么" class="headerlink" title="DMP是什么"></a>DMP是什么</h3><p>DMP就是指 MPU6050内部集成的处理单元，可以直接运算出四元数和姿态，而不再需要另外进行数学运算。DMP的使用大大简化了代码设计。DMP是数字运动处理器的缩写，顾名思义mpu9150（mpu6050）并不单单是一款传感器，其内部还包含了可以独立完成姿态解算算法的处理单元。如在设计中使用DMP来实现传感器融合算法优势很明显。首先，invensense官方提供的姿态解算算法应该比一般的小白要可靠的多。其次，由DMP实现姿态解算算法将单片机从算法处理的压力中解放出来，单片机所要做的是等待DMP解算完成后产生的外部中断，在外部中断里去读取姿态解算的结果。这样单片机有大量的时间来处理其他任务，提高了系统的实时性。</p><p>经过 DMP你就可以得到四元数，四元数就是4个数，可以表征姿态，经过几个数学公式之后就可以的出姿态，姿态包括pitch，roll，yaw。</p><p>综上，dmp之后直接出结果，可以直接用，当然你如果有特殊需要自己还要加滤波也没有问题。</p><p>我们可以读出 MPU6050 的加速度传感器和角速度传感器的原始数据。DMP可以将原始角速度数据转换为4元组数据，这正是DMP的意义所在。进而完成欧拉角的计算。</p><p>MPU6050 的 DMP 输出的四元数是 q30 格式的，也就是浮点数放大了 2 的 30 次方倍。在换算成欧拉角之前，必须先将其转换为浮点数，也就是除以 2 的 30 次方，然后再进行计算，计算公式为：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">q0=quat[<span class="number">0</span>] / q30; <span class="comment">//q30 格式转换为浮点数</span></span><br><span class="line">q1=quat[<span class="number">1</span>] / q30;</span><br><span class="line">q2=quat[<span class="number">2</span>] / q30;</span><br><span class="line">q3=quat[<span class="number">3</span>] / q30;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//计算得到欧拉角：俯仰角/横滚角/航向角</span></span><br><span class="line">pitch=<span class="built_in">asin</span>(<span class="number">-2</span> * q1 * q3 + <span class="number">2</span> * q0* q2)* <span class="number">57.3</span>; <span class="comment">//俯仰角</span></span><br><span class="line">roll=<span class="built_in">atan2</span>(<span class="number">2</span> * q2 * q3 + <span class="number">2</span> * q0 * q1, <span class="number">-2</span> * q1 * q1 - <span class="number">2</span> * q2* q2 + <span class="number">1</span>)* <span class="number">57.3</span>; <span class="comment">//横滚角</span></span><br><span class="line">yaw=<span class="built_in">atan2</span>(<span class="number">2</span>*(q1*q2 + q0*q3),q0*q0+q1*q1-q2*q2-q3*q3) * <span class="number">57.3</span>; <span class="comment">//航向角</span></span><br></pre></td></tr></table></figure><p>其中 quat[0]~ quat[3]是四元组，57.3 是弧度转换为角度，即 180/π，这样得到的结果就是以度（°）为单位的。</p><h1 id="加速度和陀螺仪原理"><a href="#加速度和陀螺仪原理" class="headerlink" title="加速度和陀螺仪原理"></a>加速度和陀螺仪原理</h1><p>当然，在开始之前至少要弄懂什么是加速度计，什么是陀螺仪吧，否则那后边讲的都是没有意义的。简单的说，加速度计主要是测量物体运动的加速度，陀螺仪主要测量物体转动的角速度。这些理论的知识我就不多说了，都可以在网上查到。这里推荐一篇讲的比较详细的文章《A Guide To using IMU (Accelerometer and Gyroscope Devices) in Embedded Applications》，在网上可以直接搜索到。</p><h1 id="加速度测量"><a href="#加速度测量" class="headerlink" title="加速度测量"></a>加速度测量</h1><p>在开始之前，不知大家是否还记得加速度具有合成定理？如果不记得可以先大概了解一下，其实简单的举个例子来说就是重力加速度可以理解成是由x,y,z三个方向的加速度共同作用的结果。反过来说就是重力加速度可以分解成x,y,z三个方向的加速度。</p><p>加速度计可以测量某一时刻x,y,z三个方向的加速度值。而自平衡小车利用加速度计测出重力加速度在x,y,z轴的分量，然后利用各个方向的分量与重力加速度的比值来计算出小车大致的倾角。其实在自平衡小车上非静止的时候，加速度计测出的结果并不是非常精确。因为大家在高中物理的时候都学过，物体时刻都会受到地球的万有引力作用产生一个向下的重力加速度，而小车在动态时，受电机的作用肯定有一个前进或者后退方向的作用力，而加速度计测出的结果是，重力加速度与小车运动加速度合成得到一个总的加速度在三个方向上的分量。</p><p>不过我们暂时不考虑电机作用产生的运动加速度对测量结果的影响。因为我们要先把复杂的事情分解成一个个简单的事情来分析，这样才能看到成果，才会有信心继续。</p><p>下边我们就开始分析从加速度得到角度的方法。如下图，把加速度计平放，分别画出xyz轴的方向。这三个轴就是我们后边分析所要用到的坐标系。</p><p><img src="file:///C:%5CNeptune%5Cksohtml7000%5Cwps1.jpg" alt="img"> </p><p>把mpu6050安装在自平衡车上时也是这样的水平安装在小车底盘上的，假设两个车轮安装时车轴和y轴在一条直线上。那么小车摆动时，参考水平面就是桌面，并且车轴（y轴）与桌面始终是平行的，小车摆动和移动过程中y轴与桌面的夹角是不会发生变化的，一直是0度。发生变化的是x轴与桌面的夹角以及z轴与桌面的夹角，而且桌面与x轴z轴夹角变化度数是一样的。所以我们只需要计算出x轴和z轴中任意一个轴的夹角就可以反映出小车的倾斜的情况了。</p><p><img src="file:///C:%5CNeptune%5Cksohtml7000%5Cwps2.jpg" alt="img"> </p><p>为了方便分析，由于y轴与桌面夹角始终不变，我们从y轴的方向俯看下去，那么这个问题就会简化成只有x轴和z轴的二维关系。假设某一时刻小车上加速度计（mpu6050）处于如下状态，下图是我们看到简化后的模型。</p><p><img src="file:///C:%5CNeptune%5Cksohtml7000%5Cwps3.jpg" alt="img"> </p><p>在这个图中，y轴已经简化和坐标系的原点o重合在了一起。我们来看看如何计算出小车的倾斜角，也就是与桌面的夹角a。上图g是重力加速度，gx、gz分别是g在x轴和z轴的分量。</p><p>由于重力加速度是垂直于水平面的，得到：</p><p><code>角a+角b=90度</code></p><p>X轴与y轴是垂直关系，得到：</p><p><code>角c+角b=90度</code></p><p>于是轻松的就可以得出：</p><p><code>角a=角c</code></p><p>根据力的分解，g、gx、gz三者构成一个长方形，根据平行四边形的原理可以得出：</p><p><code>角c=角d</code></p><p>所以计算出角度d就等效于计算出了x轴与桌面的夹角a。前边已经说过gx是g在x轴的分量，那么根据正弦定理就可以得出：</p><p><code>Sind=gx/g</code></p><p>得到这个公式可是还是得不到想要的角度，因为需要计算反正弦，而反正弦在单片机里不是很好计算。</p><p>为了得到角度，于是又查了相关资料，原来在角度较小的情况下，角度的正弦与角度对应的弧度成线性关系。先看看下边的图：</p><p><img src="file:///C:%5CNeptune%5Cksohtml7000%5Cwps4.png" alt="img"> </p><p>这个图x轴是角度，取值范围是0~90度，有三个函数曲线，分别是：</p><p><code>Y=sinx</code>  正弦曲线</p><p><code>Y=x*3.14/180</code>  弧度</p><p><code>Y=0.92*x*3.14/180</code>  乘以一个0.92系数的弧度</p><p>从图上可以看出，当角度范围是0~29度时：</p><p><code>sinx=x*3.14/180</code></p><p>对于自平衡车来说，小车的摆动范围在-29<del>29度之内，如果超过这个范围，小车姿态也无法调整，所以对于自平衡小车<code>sinx=x*3.14/180</code>基本上是成立的。当然有时候也会担心-29</del>29度的摇摆范围还是无法满足需求。那可以给上边的公式乘一个系数。得到如下公式：</p><p><code>Sinx=k*x*3.14/180</code></p><p>从上边的函数对比图可以看出，当系数取0.92时，角度范围可以扩大到-45~45度。</p><p>​    经过这一系列的分析，终于得到角度换算方法：</p><p>​    由</p><p><code>Sind=gx/g</code></p><p><code>Sind=k*d*3.14/180</code></p><p>得到：</p><p><code>gx/g=k*d*3.14/180</code></p><p>那么角度就可以通过如下公式计算出：</p><p><code>d=180*gx/(k*g*3.14)</code></p><p>而gx可以从加速度计里读出来，所以这下角度就可以轻松得到了。而之前也说过这个角度不是很精确，但是至少可以反映出角度变化的趋势。不过可以通过卡尔曼滤波等算法把加速度计读出的角度和陀螺仪读出的角度结合起来，使小车的角度更加准确。</p><h1 id="陀螺仪"><a href="#陀螺仪" class="headerlink" title="陀螺仪"></a>陀螺仪</h1><p>通过陀螺仪来测量角度就很简单了，因为陀螺仪读出的是角速度，大家都知道，角速度乘以时间，就是转过的角度。把每次计算出的角度做累加就会等到当前所在位置的角度。先看下图：</p><p><img src="file:///C:%5CNeptune%5Cksohtml7000%5Cwps5.jpg" alt="img"> </p><p>假设最初陀螺仪是与桌面平行，单片机每tms读一次陀螺仪的角速度，当读了三次角速度以后 z轴转到上图的位置，则在这段时间中转过的角度为x：</p><p>角x=角1+角2+角3</p><p>假设从陀螺仪读出的角速度为w，那总角度为：</p><p><code>X=(w1*t1+w2*t2+w3*t3)/1000</code></p><p>假设经过n次，那么总的角度如下：</p><p><code>X=(w1*t1+w2*t2+w3*t3+…+wn*tn)/1000</code></p><p>实际上这就是一个积分过程。</p><p>其实这种计算出来的角度也存在一定的误差，而且总的角度是经过多次相加得到的，这样误差就会越积累越大，最终导致计算出的角度与实际角度相差很大。于是也可以使用卡尔曼滤波把加速度计读出的角度结合在一起，使计算出的角度更准确。</p><h1 id="四元数"><a href="#四元数" class="headerlink" title="四元数"></a><strong>四元数</strong></h1><blockquote><p>转载于:<a href="https://www.cnblogs.com/bucc/p/5773755.html" target="_blank" rel="noopener">https://www.cnblogs.com/bucc/p/5773755.html</a></p><p>借鉴：<a href="https://blog.csdn.net/qiguizhe/article/details/59133514" target="_blank" rel="noopener">https://blog.csdn.net/qiguizhe/article/details/59133514</a></p></blockquote><p>使用MPU6050硬件DMP解算姿态是非常简单的，下面介绍由三轴陀螺仪和加速度计的值来使用四元数软件解算姿态的方法。</p><p>我们先来看看如何用欧拉角描述一次平面旋转(坐标变换)：</p><p><a href="http://www.crazepony.com/assets/img/soft-algorithm-1.png" target="_blank" rel="noopener"><img src="http://www.crazepony.com/assets/img/soft-algorithm-1.png" alt="img"></a></p><p>设坐标系绕旋转α角后得到坐标系,在空间中有一个矢量在坐标系中的投影为,在内的投影为由于旋转绕进行，所以Z坐标未变，即有。</p><p><a href="http://www.crazepony.com/assets/img/soft-algorithm-2.png" target="_blank" rel="noopener"><img src="http://www.crazepony.com/assets/img/soft-algorithm-2.png" alt="img"></a></p><p>转换成矩阵形式表示为：</p><p><a href="http://www.crazepony.com/assets/img/soft-algorithm-4.png" target="_blank" rel="noopener"><img src="http://www.crazepony.com/assets/img/soft-algorithm-4.png" alt="img"></a></p><p>整理一下：</p><p><a href="http://www.crazepony.com/assets/img/soft-algorithm-5.png" target="_blank" rel="noopener"><img src="http://www.crazepony.com/assets/img/soft-algorithm-5.png" alt="img"></a></p><p>所以从旋转到可以写成</p><p>上面仅仅是绕一根轴的旋转，如果三维空间中的欧拉角旋转要转三次:</p><p><a href="http://www.crazepony.com/assets/img/soft-algorithm-6.png" target="_blank" rel="noopener"><img src="http://www.crazepony.com/assets/img/soft-algorithm-6.png" alt="img"></a></p><p>上面得到了一个表示旋转的<strong>方向余弦矩阵</strong>。</p><p>不过要想用欧拉角解算姿态，其实我们套用<strong>欧拉角微分方程</strong>就行了：</p><p><a href="http://www.crazepony.com/assets/img/soft-algorithm-7.png" target="_blank" rel="noopener"><img src="http://www.crazepony.com/assets/img/soft-algorithm-7.png" alt="img"></a></p><p>上式中左侧,,是本次更新后的欧拉角,对应row,pit,yaw。右侧，是上个周期测算出来的角度，，，三个角速度由直接安装在四轴飞行器的三轴陀螺仪在这个周期转动的角度，单位为弧度，计算间隔时T<em>陀螺角速度，比如0.02秒</em>0.01弧度/秒=0.0002弧度。间因此求解这个微分方程就能解算出当前的欧拉角。</p><p><strong>由姿态矩阵得到欧拉角row,pit,yaw</strong><br><img src="https://img-blog.csdn.net/20170301203753251?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcWlndWl6aGU=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p><p><strong>我们为什么不用欧拉角来表示旋转而要引入四元数呢？</strong></p><p>一方面是因为欧拉角微分方程中包含了大量的三角运算，这给实时解算带来了一定的困难。而且当俯仰角为90度时方程式会出现神奇的<strong>“GimbalLock”（万向锁）</strong>。所以欧拉角方法只适用于水平姿态变化不大的情况，而不适用于全姿态飞行器的姿态确定。</p><p>四元数法只求解四个未知量的线性微分方程组，计算量小，易于操作，是比较实用的工程方法。</p><p>我们知道在平面(x,y)中的旋转可以用复数来表示，同样的三维中的旋转可以用单位四元数来描述。我们来定义一个四元数：</p><p><a href="http://www.crazepony.com/assets/img/soft-algorithm-8.png" target="_blank" rel="noopener"><img src="http://www.crazepony.com/assets/img/soft-algorithm-8.png" alt="img"></a></p><p>我们可以把它写成,其中,。那么是矢量，表示三维空间中的旋转轴。w是标量，表示旋转角度。那么就是绕轴旋转w度，所以一个四元数可以表示一个完整的旋转。只有单位四元数才可以表示旋转，至于为什么，因为这就是四元数表示旋转的约束条件。</p><p>而刚才用欧拉角描述的方向余弦矩阵用四元数描述则为：</p><p><a href="http://www.crazepony.com/assets/img/soft-algorithm-9.png" target="_blank" rel="noopener"><img src="http://www.crazepony.com/assets/img/soft-algorithm-9.png" alt="img"></a></p><p>所以在软件解算中，我们要首先把加速度计采集到的值(三维向量)转化为单位向量,即向量除以模，传入参数是陀螺仪x,y,z值和加速度计x,y,z值：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">IMUupdate</span><span class="params">(<span class="keyword">float</span> gx, <span class="keyword">float</span> gy, <span class="keyword">float</span> gz, <span class="keyword">float</span> ax, <span class="keyword">float</span> ay, <span class="keyword">float</span> az)</span> </span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="keyword">float</span> norm; </span><br><span class="line"><span class="keyword">float</span> vx, vy, vz; <span class="keyword">float</span> ex, ey, ez;           </span><br><span class="line"></span><br><span class="line">norm = <span class="built_in">sqrt</span>(ax*ax + ay*ay + az*az);       </span><br><span class="line">ax = ax / norm; </span><br><span class="line">ay = ay / norm; </span><br><span class="line">az = az / norm;</span><br></pre></td></tr></table></figure><p>下面把四元数换算成方向余弦中的第三行的三个元素。刚好vx,vy,vz 其实就是上一次的欧拉角（四元数）的机体坐标参考系换算出来的重力的单位向量。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//estimated direction of gravity </span></span><br><span class="line">    vx = <span class="number">2</span>*(q1*q3 - q0*q2);</span><br><span class="line">vy = <span class="number">2</span>*(q0*q1 + q2*q3); </span><br><span class="line">vz = q0*q0 - q1*q1 - q2*q2 + q3*q3;</span><br></pre></td></tr></table></figure><p>axyz是机体坐标参照系上，加速度计测出来的重力向量，也就是实际测出来的重力向量。</p><p>axyz是测量得到的重力向量，vxyz是陀螺积分后的姿态来推算出的重力向量，它们都是机体坐标参照系上的重力向量。</p><p>那它们之间的误差向量，就是陀螺积分后的姿态和加计测出来的姿态之间的误差。</p><p>向量间的误差，可以用向量叉积（也叫向量外积、叉乘）来表示，exyz就是两个重力向量的叉积。</p><p>这个叉积向量仍旧是位于机体坐标系上的，而陀螺积分误差也是在机体坐标系，而且叉积的大小与陀螺积分误差成正比，正好拿来纠正陀螺。（你可以自己拿东西想象一下）由于陀螺是对机体直接积分，所以对陀螺的纠正量会直接体现在对机体坐标系的纠正。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//integral error scaled integral gain </span></span><br><span class="line">exInt = exInt + ex*Ki;</span><br><span class="line">eyInt = eyInt + ey*Ki; </span><br><span class="line">ezInt = ezInt + ez*Ki;</span><br></pre></td></tr></table></figure><p>用叉积误差来做PI修正陀螺零偏</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//integral error scaled integral gain </span></span><br><span class="line">    exInt = exInt + ex*Ki; </span><br><span class="line">eyInt = eyInt + ey*Ki; </span><br><span class="line">ezInt = ezInt + ez*Ki;  </span><br><span class="line"></span><br><span class="line"><span class="comment">// adjusted gyroscope measurements </span></span><br><span class="line">gx = gx + Kp*ex + exInt; </span><br><span class="line">gy = gy + Kp*ey + eyInt; </span><br><span class="line">gz = gz + Kp*ez + ezInt;</span><br></pre></td></tr></table></figure><p>四元数微分方程，其中T为测量周期，为陀螺仪角速度，以下都是已知量，这里使用了一阶龙哥库塔求解四元数微分方程：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//integrate quaternion rate and normalise </span></span><br><span class="line">q0 = q0 + (-q1*gx - q2*gy - q3*gz)*halfT; </span><br><span class="line">q1 = q1 + ( q0*gx + q2*gz - q3*gy)*halfT; </span><br><span class="line">q2 = q2 + ( q0*gy - q1*gz + q3*gx)*halfT; </span><br><span class="line">q3 = q3 + ( q0*gz + q1*gy - q2*gx)*halfT;</span><br></pre></td></tr></table></figure><p>最后根据四元数方向余弦阵和欧拉角的转换关系，把四元数转换成欧拉角：</p><p><a href="http://www.crazepony.com/assets/img/soft-algorithm-6.png" target="_blank" rel="noopener"><img src="http://www.crazepony.com/assets/img/soft-algorithm-6.png" alt="img"></a></p><p>所以有：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Q_ANGLE.Yaw &#x3D; atan2(2 * q1 * q2 + 2 * q0 * q3, -2 * q2*q2 - 2 * q3* q3 + 1)* 57.3; &#x2F;&#x2F; yaw </span><br><span class="line"></span><br><span class="line">Q_ANGLE.Y  &#x3D; asin(-2 * q1 * q3 + 2 * q0* q2)* 57.3; &#x2F;&#x2F; pitch </span><br><span class="line"></span><br><span class="line">Q_ANGLE.X &#x3D; atan2(2 * q2 * q3 + 2 * q0 * q1, -2 * q1 * q1 - 2 * q2* q2 + 1)* 57.3; &#x2F;&#x2F; roll</span><br></pre></td></tr></table></figure><h3 id="旋转矩阵"><a href="#旋转矩阵" class="headerlink" title="旋转矩阵"></a>旋转矩阵</h3><p><img src="https://pic3.zhimg.com/v2-16060cb3b34ed798427d4b1bfcd3c642_r.jpg" alt="preview"></p><p><img src="C:%5CUsers%5Ccaihanyuan%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200913134420652.png" alt="image-20200913134420652"></p><p>欧拉角构造旋转矩阵就直接把三个Elemental Rotation Matrix乘在一起就好了</p><p><img src="C:%5CUsers%5Ccaihanyuan%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200913134518078.png" alt="image-20200913134518078"></p><p>也就是上文的旋转矩阵，其中</p><p><img src="C:%5CUsers%5Ccaihanyuan%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200913134629216.png" alt="image-20200913134629216"></p><h4 id="求旋转矩阵的方法："><a href="#求旋转矩阵的方法：" class="headerlink" title="求旋转矩阵的方法："></a>求旋转矩阵的方法：</h4><p><img src="C:%5CUsers%5Ccaihanyuan%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200913221150046.png" alt="image-20200913221150046"></p><p><img src="C:%5CUsers%5Ccaihanyuan%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200913221213322.png" alt="image-20200913221213322"></p><h1 id="卡尔曼滤波"><a href="#卡尔曼滤波" class="headerlink" title="卡尔曼滤波"></a>卡尔曼滤波</h1><h3 id="卡尔曼滤波有5大黄金公式，如下所述："><a href="#卡尔曼滤波有5大黄金公式，如下所述：" class="headerlink" title="卡尔曼滤波有5大黄金公式，如下所述："></a>卡尔曼滤波有5大黄金公式，如下所述：</h3><ul><li><p>1、预测方程 (状态预测方程)：X(k|k-1) = AX(k-1|k-1) + BU(k)</p><p>X(k|k-1)  ——–  k-1时刻估计k时刻的状态值 </p><p>A  ———   系统参数，对于多模型系统，它为矩阵</p><p>X(k-1|k-1)  ———  k-1时刻的状态值</p><p>U(k)   —  k时刻的状态控制量 (若无控制量的话，需要设定为0)</p></li></ul><p>自己理解的方程：X(k) = a * X(k-1) ,在MPU6050中X(k)的值为陀螺仪测量的角速度</p><ul><li><p>2、计算误差协方差 ：P(k|k-1) = AP(k-1|k-1)A’ + Q </p><p>P(k|k-1)  ——— k-1时刻估计k时刻的协方差</p><p>P(k-1|k-1)  ——- k-1时刻的协方差</p><p>A’    ————– A的转置矩阵</p><p>Q   ———-     系统过程的过程噪声协方差</p></li></ul><p>自己理解的方程：P(k) = A P(k-1) * A ‘</p><ul><li>3、计算卡尔曼增益: Kg(k) = P(k|k-1)H’ / (HP(k|k-1)H’ + R)</li></ul><p>​    Kg    ————   卡尔曼增益</p><p>​    R     ————  传感器的噪声平均值</p><p>自己理解的方程：Kg = P(k-1)/(P(k-1) + R) </p><ul><li>4、修正估计 : X(k|k) = X(k|k-1) + Kg(k)(Z(k) - HX(k|k-1))</li></ul><p>​    Z(k)  —————– MPU6050测出的加速度计的值</p><p>   自己理解的方程： X(k) = X(k-1) + Kg * (Z(k) - X(k-1)) </p><p>   X(k)即为陀螺仪测量的角速度</p><p>​    当Kg = 0时，状态值即为估计值</p><p>​    当Kg = 1时，状态值即为观测值</p><ul><li><p>5、更新误差协方差：P(k|k) = (1 - Kg(k)H) P(k|k-1)</p><p>1    —    矩阵，表示单模型单测量</p><p>自己理解的方程：P(k) = (1 - Kg ) * P(k - 1)</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Stm32 </category>
          
          <category> MPU6050 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Stm32 </tag>
            
            <tag> MPU6050 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AHRS（航姿参考系统）和IMU（惯性测量单元）的区别</title>
      <link href="/2020/08/16/MPU6050/AHRS%E5%92%8CIMU/"/>
      <url>/2020/08/16/MPU6050/AHRS%E5%92%8CIMU/</url>
      
        <content type="html"><![CDATA[<h1 id="AHRS（航姿参考系统）和IMU（惯性测量单元）的区别"><a href="#AHRS（航姿参考系统）和IMU（惯性测量单元）的区别" class="headerlink" title="AHRS（航姿参考系统）和IMU（惯性测量单元）的区别"></a>AHRS（航姿参考系统）和IMU（惯性测量单元）的区别</h1><blockquote><p>转载自：<a href="https://zhuanlan.zhihu.com/p/28262130" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/28262130</a></p></blockquote><p>无人机的姿态解算一般有两种算法</p><ul><li>一种是IMU</li><li>另一种是被各种无人机广泛使用的AHRS<ul><li>比如众所周知的APM，pixhawk，DJI的naza，还有匿名的开源飞控等等，他们之间有什么区别和联系呢？让我们一起来看一下。</li></ul></li></ul><a id="more"></a><p><strong>AHRS（Attitude and Heading Reference System）</strong>俗称航姿参考系统，AHRS由加速度计，磁场计，陀螺仪构成，能够为飞行器提供航向(yaw)，横滚(roll)和侧翻(pitch)信息，这类系统用来为飞行器提供准确可靠的姿态与航行信息。AHRS的真正参考来自于地球的重力场和地球的磁场，其静态终精度取决于对磁场的测量精度和对重力的测量精度，而则陀螺决定了他的动态性能。<strong>说明AHRS离开了地球这种有重力和磁场环境的时候是没法正常工作的</strong>，而且特别注意：<strong>磁场和重力场越正交，则航姿测量效果越好</strong>—也就是说如果磁场和重力场平行了，比如在地磁南北极，这里的磁场是向下的，即和重量场方向相同了，这个时候航线交是没法测出的，这是航姿系统的缺陷所在，<strong>在高纬度的地方航线角误差会越来越大</strong>。</p><p><strong>IMU（Inertial Measurement Unit）</strong>学名惯性测量单元，大学的理论力学告诉我们，所有的运动都可以分解为一个直线运动和一个旋转运动，故这个惯性测量单元就是测量这两种运动，直线运动通过加速度计可以测量，旋转运动则通过陀螺。一般的，<strong>一个IMU包含了三个单轴的加速度计和三个单轴的陀螺</strong>，加速度计检测物体在载体坐标系统独立三轴的加速度信号，而陀螺检测载体相对于导航坐标系的角速度信号，测量物体在三维空间中的角速度和加速度，<strong>并以此解算出物体的姿态</strong>。在导航中用着很重要的应用价值。<strong>为了提高可靠性，还可以为每个轴配备更多的传感器。一般而言IMU要安装在被测物体的重心上。</strong></p><p>IMU大多用在需要进行运动控制的设备，如汽车和机器人上。也被用在需要用姿态进行精密位移推算的场合，如潜艇、飞机、导弹和航天器的惯性导航设备等。</p><p>假设IMU的陀螺和加速度计的测量是没有任何误差的，那么通过陀螺则可以精确的测量物体的姿态。通过加速度计可以二次积分得出位移，实现完整的6DOF,也就是说带着一台这种理论型的IMU在宇宙任何位置运动，我们都可以知道他当前的姿态和相对位移，这将不局限于任何场。</p><p>从上面的描述何以看出。实际上AHRS比IMU还多一个磁场传感器，而为什么AHRS的级别却低于IMU而需要依赖于重力场和磁场呢？这是由传感器器件架构所决定的。AHRS的传感器通常是成本低廉的mems传感器。这种传感器的陀螺仪和加速度计的噪声相对来说很大，以平面陀螺为例用ADI的陀螺仪进行积分一分钟会漂移2度左右，这种前提下如果没有磁场和重力场来修正三轴陀螺的话，那么基本上3分钟以后物体的实际姿态和测量输出姿态就完全变样了。所以在这种低价陀螺仪和加速度计的架构下必须运用场向量来进行修正。</p><p>而IMU实际上也是这样的。因为我们知道没有绝对精确的传感器，只有相对精确的传感器，IMU的陀螺仪用的是<strong>光纤陀螺或者机械陀螺</strong>。这种陀螺的成本很高，精度相对MEMS陀螺也很高。精度高不代表准确，IMU的姿态精度参数通常是<strong>一小时飘多少度</strong>，比如xbow的低端的有一小时3度的。。而用加速度计积分做位置的话，AHRS是不现实的（1分钟就能飘出几十米，而且是成二次方的速度递增）。AHRS通常要结合GPS和气压计做位置 。</p><p>利用三轴地磁解耦和三轴加速度计，受外力加速度影响很大，在运动/振动等环境中，输出方向角误差较大，此外地磁传感器有缺点，它的绝对参照物是地磁场的磁力线，<strong>地磁的特点是使用范围大，但强度较低，约零点几高斯，非常容易受到其它磁体的干扰， 如果融合了Z轴陀螺仪的瞬时角度，就可以使系统数据更加稳定</strong>。加速度测量的是重力方向，在无外力加速度的情况下，能准确输出ROLL/PITCH两轴姿态角度 并且此角度不会有累积误差，在更长的时间尺度内都是准确的。但是加速度传感器测角度的缺点是加速度传感器实际上是用MEMS技术检测惯性力造成的微小形变，而惯性力与重力本质是一样的,所以加速度计就不会区分重力加速度与外力加速度，当系统在三维空间做变速运动时，它的输出就不正确了。</p><p>陀螺仪输出角速度，是瞬时量，角速度在姿态平衡上是不能直接使用， 需要角速度与时间积分计算角度，得到的角度变化量与初始角度相加，就得到目标角度，其中积分时间Dt越小，输出角度越精确，但陀螺仪的原理决定了它的测量基准是自身，并没有系统外的绝对参照物，加上Dt是不可能无限小，所以积分的累积误差会随着时间流逝迅速增加，最终导致输出角度与实际不符，所以陀螺仪只能工作在<strong>相对</strong>较短的时间尺度内。</p><p>所以在没有其它参照物的基础上，要得到较为真实的姿态角，就要<strong>利用加权算法扬长避短</strong>，结合两者的优点，摈弃其各自缺点,设计算法在短时间尺度内增加陀螺仪的权值，在更长时间尺度内增加加速度权值，这样系统输出角度就接近真实值了。</p>]]></content>
      
      
      <categories>
          
          <category> Stm32 </category>
          
          <category> MPU6050 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Stm32 </tag>
            
            <tag> MPU6050 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>内存管理</title>
      <link href="/2020/07/28/STM32/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/"/>
      <url>/2020/07/28/STM32/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h1 id="内存管理"><a href="#内存管理" class="headerlink" title="内存管理"></a>内存管理</h1><p>指软件运行时对计算机内存资源的分配和使用的技术。其最主要的目的是如何高效，快速的分配，并且在适当的时候释放和回收内存资源。 内存管理的实现方法有很多种，最终都是要实现两个函数： <strong>malloc 和 free</strong>。</p><ul><li>malloc ：函数用于内存申请；</li><li>free： 函数用于内存释放。</li></ul><a id="more"></a><p><img src="https://img-blog.csdn.net/20180529225159872?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3d3dDE4ODExNzA3OTcx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p><p>从上图可以看出，分块式内存管理由内存池和内存管理表两部分组成。内存池被等分为n块，对应的内存管理表，大小也为n，内存管理表的每一个项对应内存池的一块内存。内存管理表的项值代表的意义为：当该项值为0的时候，代表对应的内存块未被占用，当该项值非零的时候，代表该项对应的内存块已经被占用，其数值则代表被连续占用的内存块数。比如某项值为10，那么说明包括本项对应的内存块在内，总共分配了10个内存块给外部的某个指针。内寸分配方向如图所示，是从顶底的分配方向。（即从高位地址到低位地址）即首先从最末端开始找空内存。当内存管理刚初始化的时候，内存表全部清零，表示没有任何内存块被占用。</p><h4 id="分配原理"><a href="#分配原理" class="headerlink" title="分配原理"></a>分配原理</h4><p>当指针p调用malloc申请内存的时候，先判断p要分配的内存块数（m），然后从第n项开始，向下查找，直到找到m块连续的空内存块（即对应内存管理表项为0），然后将这m个内存管理表项的值都设置为m（标记被占用），最后，把最后的这个空内存块的地址返回指针p，完成一次分配。注意，如果当内存不够的时候（找到最后也没找到连续的m块空闲内存），则返回NULL给p，表示分配失败。</p><h4 id="释放原理"><a href="#释放原理" class="headerlink" title="释放原理"></a>释放原理</h4><p>当p申请的内存用完，需要释放的时候，调用free函数实现。free函数先判断p指向的内存地址所对应的内存块，然后找到对应的内存管理表项目，得到p所占用的内存块数目m（内存管理表项目的值就是所分配内存块的数目），将这m个内存管理表项目的值都清零，标记释放，完成一次内存释放。</p><h2 id="stm32的存储器结构"><a href="#stm32的存储器结构" class="headerlink" title="stm32的存储器结构"></a>stm32的存储器结构</h2><blockquote><p>转自：<a href="http://news.eeworld.com.cn/mcu/ic487797.html" target="_blank" rel="noopener">http://news.eeworld.com.cn/mcu/ic487797.html</a></p></blockquote><p>　　<img src="C:%5CUsers%5Ccaihanyuan%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200728235050475.png" alt="image-20200728235050475"></p><p><code>Flash</code>，<code>SRAM</code>寄存器和输入输出端口被组织在同一个4GB的线性地址空间内。可访问的存储器空间被分成8个主要块，每个块为512MB。</p><ul><li><code>FLASH</code>存储下载的程序。</li><li><code>SRAM</code>是存储运行程序中的数据。</li></ul><p>所以，只要你不外扩存储器，写完的程序中的所有东西也就会出现在这两个存储器中。</p><h3 id="编程中的堆栈"><a href="#编程中的堆栈" class="headerlink" title="编程中的堆栈"></a>编程中的堆栈</h3><p>在编程中很多时候会提到堆栈这个东西，准确的说这个就是<code>RAM</code>中的一个区域。我们先来了解几个说明：</p><ol><li>程序中的所有内容最终只会出现在<code>flash</code>，<code>ram</code>里（不外扩）。</li><li>段的划分，是将类似数据种类存储在一个区域里，方便管理，但正如上面所说，不管什么段的数据，都是最终在<code>flash</code>和<code>ram</code>里面。</li></ol><p>C语言上分为<code>栈</code>、<code>堆</code>、<code>bss</code>、<code>data</code>、<code>code</code>段。具体每个段具体是存储什么数据的，直接百度吧。</p><p>重点分析一下STM32以及在MDK里面段的划分。</p><p>MDK下<code>Code</code>，<code>RO-data</code>，<code>RW-data</code>，<code>ZI-data</code>这几个段：</p><p><code>Code</code>是存储程序代码的。</p><p><code>RO-data</code>是存储const常量和指令。</p><p><code>RW-data</code>是存储初始化值不为0的全局变量。</p><p><code>ZI-data</code>是存储未初始化的全局变量或初始化值为0的全局变量。</p><p><code>Flash = Code + RO Data + RW Data;</code></p><p><code>RAM = RW-data + ZI-data;</code></p><p>这个是MDK编译之后能够得到的每个段的大小，也就能得到占用相应的FLASH和RAM的大小，但是还有两个数据段也会占用RAM，但是是在程序运行的时候，才会占用，那就是堆和栈。在stm32的启动文件.s文件里面，就有堆栈的设置，其实这个堆栈的内存占用就是在上面RAM分配给RW-data+ZI-data之后的地址开始分配的。</p><ul><li>堆：是编译器调用动态内存分配的内存区域。</li><li>栈：是程序运行的时候局部变量的地方，所以局部变量用数组太大了都有可能造成栈溢出。</li></ul><p>堆栈的大小在编译器编译之后是不知道的，只有运行的时候才知道，所以需要注意一点，就是别造成堆栈溢出了。不然就等着hardfault找你吧。</p><p>　</p><h3 id="OS中的堆栈及其内存管理。"><a href="#OS中的堆栈及其内存管理。" class="headerlink" title="OS中的堆栈及其内存管理。"></a>OS中的堆栈及其内存管理。</h3><p>嵌入式系统的堆栈，不管是用什么方法来得到内存，感觉他的方式都和编程中的堆差不多。目前我知道两种获得内存情况：</p><ol><li>用庞大的全局变量数组来圈住一块内存，然后将这个内存拿来进行内存管理和分配。这种情况下，堆栈占用的内存就是上面说的：如果没有初始化数组，或者数组的初始化值为0，堆栈就是占用的RAM的ZI-data部分；如果数组初始化值不为0，堆栈就占用的RAM的RW-data部分。这种方式的好处是容易从逻辑上知道数据的来由和去向。</li><li>就是把编译器没有用掉的RAM部分拿来做内存分配，也就是除掉RW-data+ZI-data+编译器堆+编译器栈后剩下的RAM内存中的一部分或者全部进行内存管理和分配。这样的情况下就只需要知道内存剩下部分的首地址和内存的尾地址，然后要用多少内存，就用首地址开始挖，做一个链表，把内存获取和释放相关信息链接起来，就能及时的对内存进行管理了。内存管理的算法多种多样，不详说，这样的情况下：OS的内存分配和自身局部变量或者全局变量不冲突，之前我就在这上面纠结了很久，以为函数里面的变量也是从系统的动态内存中得来的。这种方式感觉更加能够明白自己地址的开始和结束。</li></ol><p>这两种方法我感觉没有谁更高明，因为只是一个内存的获取方式，高明的在于内存的管理和分配。</p><h1 id="深入理解计算机系统-bss段，data段、text段、堆-heap-和栈-stack"><a href="#深入理解计算机系统-bss段，data段、text段、堆-heap-和栈-stack" class="headerlink" title="(深入理解计算机系统) bss段，data段、text段、堆(heap)和栈(stack)"></a><a href="https://www.cnblogs.com/yanghong-hnu/p/4705755.html" target="_blank" rel="noopener">(深入理解计算机系统) bss段，data段、text段、堆(heap)和栈(stack)</a></h1><blockquote><p>C语言上分为栈、堆、bss、data、code段。</p></blockquote><h3 id="bss段："><a href="#bss段：" class="headerlink" title="bss段："></a>bss段：</h3><p><code>bss段（bss segment）</code>通常是指用来存放程序中未初始化的全局变量的一块内存区域。</p><p>bss是英文Block Started by Symbol的简称。</p><p>bss段属于静态内存分配。 </p><h3 id="data段："><a href="#data段：" class="headerlink" title="data段："></a>data段：</h3><p><code>数据段（data segment）</code>通常是指用来存放程序中已初始化的全局变量的一块内存区域。</p><p>数据段属于静态内存分配。 </p><h3 id="text段："><a href="#text段：" class="headerlink" title="text段："></a>text段：</h3><p><code>代码段（code segment/text segment）</code>通常是指用来存放程序执行代码的一块内存区域。</p><p>这部分区域的大小在程序运行前就已经确定，并且内存区域通常属于只读(某些架构也允许代码段为可写，即允许修改程序)。</p><p>在代码段中，也有可能包含一些只读的常数变量，例如字符串常量等。 </p><h3 id="堆（heap）："><a href="#堆（heap）：" class="headerlink" title="堆（heap）："></a>堆（heap）：</h3><p><code>堆（heap）</code>是用于存放进程运行中被动态分配的内存段，它的大小并不固定，可动态扩张或缩减。</p><p>当进程调用malloc等函数分配内存时，新分配的内存就被动态添加到堆上（堆被扩张）；</p><p>当利用free等函数释放内存时，被释放的内存从堆中被剔除（堆被缩减）。</p><h3 id="栈-stack-："><a href="#栈-stack-：" class="headerlink" title="栈(stack)："></a>栈(stack)：</h3><p><code>栈(stack)</code>又称堆栈，是用户存放程序临时创建的局部变量，</p><p>也就是说我们函数括弧“{}”中定义的变量（但不包括static声明的变量，static意味着在数据段中存放变量）。</p><p>除此以外，在函数被调用时，其参数也会被压入发起调用的进程栈中，并且待到调用结束后，函数的返回值也会被存放回栈中。</p><p>由于栈的先进先出(FIFO)特点，所以栈特别方便用来保存/恢复调用现场。</p><p>从这个意义上讲，我们可以把堆栈看成一个寄存、交换临时数据的内存区。 </p><p><strong>一个程序本质上都是由 bss段、data段、text段三个组成的。</strong></p><p>这样的概念，不知道最初来源于哪里的规定，但在当前的计算机程序设计中是很重要的一个基本概念。</p><p>而且在嵌入式系统的设计中也非常重要，牵涉到嵌入式系统运行时的内存大小分配，存储单元占用空间大小的问题。</p><p>在采用段式内存管理的架构中（比如intel的80x86系统），bss段通常是指用来存放程序中未初始化的全局变量的一块内存区域，</p><p>一般在初始化时bss 段部分将会清零。bss段属于静态内存分配，即程序一开始就将其清零了。</p><p>比如，在C语言之类的程序编译完成之后，已初始化的全局变量保存在.data 段中，未初始化的全局变量保存在.bss 段中。</p><p>text和data段都在可执行文件中（在嵌入式系统里一般是固化在镜像文件中），由系统从可执行文件中加载；</p><p>而bss段不在可执行文件中，由系统初始化。</p><h3 id="【例】"><a href="#【例】" class="headerlink" title="【例】"></a>【例】</h3><p>两个小程序如下：</p><p>程序1:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">int ar[30000];</span><br><span class="line">void main()</span><br><span class="line">&#123;</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>程序2:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">int ar[300000] &#x3D; &#123;1, 2, 3, 4, 5, 6 &#125;;</span><br><span class="line">void main()</span><br><span class="line">&#123;</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>发现程序2编译之后所得的.exe文件比程序1的要大得多。当下甚为不解，于是手工编译了一下，并使用了/FAs编译选项来查看了一下其各自的.asm，</p><p>发现在程序1.asm中ar的定义如下：</p><p>_BSS SEGMENT<br>   ?ar@@3PAHA DD 0493e0H DUP (?)  ; ar<br>_BSS ENDS<br>而在程序2.asm中，ar被定义为：</p><p>_DATA SEGMENT<br>   ?ar@@3PAHA DD 01H  ; ar<br>        DD 02H<br>        DD 03H<br>        ORG $+1199988<br>_DATA ENDS<br>区别很明显，一个位于.bss段，而另一个位于.data段，两者的区别在于：</p><p>全局的未初始化变量存在于.bss段中，具体体现为一个占位符；</p><p>全局的已初始化变量存于.data段中；</p><p>而函数内的自动变量都在栈上分配空间；</p><p>.bss是不占用.exe文件空间的，其内容由操作系统初始化（清零）；</p><p>.data却需要占用，其内容由程序初始化。因此造成了上述情况。</p><p>bss段（未手动初始化的数据）并不给该段的数据分配空间，只是记录数据所需空间的大小；</p><p>bss段的大小从可执行文件中得到 ，然后链接器得到这个大小的内存块，紧跟在数据段后面。</p><p>data段（已手动初始化的数据）则为数据分配空间，数据保存在目标文件中；</p><p>data段包含经过初始化的全局变量以及它们的值。当这个内存区进入程序的地址空间后全部清零。</p><p>包含data段和bss段的整个区段此时通常称为数据区。</p>]]></content>
      
      
      <categories>
          
          <category> Stm32 </category>
          
          <category> 内存管理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Stm32 </tag>
            
            <tag> 内存管理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>FATFS文件系统</title>
      <link href="/2020/07/27/STM32/FATFS%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/"/>
      <url>/2020/07/27/STM32/FATFS%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/</url>
      
        <content type="html"><![CDATA[<h1 id="FATFS文件系统"><a href="#FATFS文件系统" class="headerlink" title="FATFS文件系统"></a>FATFS文件系统</h1><blockquote><p>转自：<a href="https://zhuanlan.zhihu.com/p/37897938" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/37897938</a></p></blockquote><a id="more"></a><h3 id="文件系统"><a href="#文件系统" class="headerlink" title="文件系统"></a>文件系统</h3><p>文件系统是为了存储和管理数据，而在存储介质上建立的一种组织结构，</p><p>这些结构主要包括系统引导区，目录和文件。</p><p>在使用文件系统前，需要先对存储介质进行格式化，格式化之后，存储介质会创建一个文件分配表和目录。</p><p>这样，文件系统就可以记录数据存放的物理地址和剩余空间。</p><p>使用文件系统时，数据都以文件的形式存储。</p><p>写入新文件时，先在目录中创建一个文件索引，它指示了文件存放的物理地址，再把数据存储到该地址中。</p><p>当需要读取数据时，可以从该目录中找到该文件的索引，进而在相应的地址中读取数据。</p><p>文件系统的存在使我们在存储数据时，不再是简单的向某个物理地址直接读写，而是要遵循它的读写格式。</p><p>如经过逻辑转换，一个完整的文件可能被分成多段并存储到不连续的物理地址，以及使用目录或链表的方式来获知下一段的位置。</p><p>在SPI方式读写SD卡的试验中只完成了向物理地址读写数据的工作，而根据文件系统格式的逻辑转换部分则需要额外的代码来完成。</p><p>实质上，这个转换部分可以理解为，当我们需要写入一段数据时，由它来求解向什么物理地址写入数据、以什么格式写入，以及写入一些原始数据以外的信息（如目录）。</p><p><strong>这个逻辑转换部分代码我们也习惯称之为文件系统</strong>。</p><h3 id="FATFS文件系统简介"><a href="#FATFS文件系统简介" class="headerlink" title="FATFS文件系统简介"></a>FATFS文件系统简介</h3><ul><li>官网：<a href="http://elm-chan.org/fsw/ff/00index_e.html" target="_blank" rel="noopener">http://elm-chan.org/fsw/ff/00index_e.html</a></li></ul><p>FATFS是面向小型嵌入式系统的一种通用的FAT文件系统，它由ANSI C语言编写且完全独立于底层的I/O介质，因此它可以很容易的不加修改的移植到其他处理器当中，就可以利用文件系统的各种函数，对已格式化的SD卡的文件进行读写。</p><h4 id="FATFS的目录结构"><a href="#FATFS的目录结构" class="headerlink" title="FATFS的目录结构"></a>FATFS的目录结构</h4><p>在移植FATFS文件系统之前，我们先到FAT官网获取源码，版本为0.09，解压后可看到里面有doc和src两个文件夹。</p><p>doc文件夹里面是一些使用文档，src里面是文件系统的源码</p><h4 id="FATFS帮助文档"><a href="#FATFS帮助文档" class="headerlink" title="FATFS帮助文档"></a>FATFS帮助文档</h4><p>打开doc文件夹，目录中en和ja两个文件夹中是编译好的HTML文档，描述的是FATFS里面各个函数的使用方法，利用这些函数我们就可以操作SD卡了，这两个文件夹唯一的区别就是en文件夹下的文档为英文，ja文件夹下是日文的。</p><h4 id="FATFS源码"><a href="#FATFS源码" class="headerlink" title="FATFS源码"></a>FATFS源码</h4><p>打开src文件夹</p><p>option文件夹下是一些可选的外部C文件，包含了多语言支持需要用到的文件和转换函数。</p><p>在R0.09版源码中，没有<code>diskio.c</code>文件，但有<code>diskio.h</code>。</p><p>在<code>diskio.h</code>源码中有一些关于底层硬件接口的函数声明，我们可以复制旧版本中的<code>diskio.c</code>或自己新建一个<code>diskio.c</code>文件。</p><p><code>diskio.c</code>文件为文件系统提供了最底层访问SD卡的方法，即调用了SD驱动函数。</p><h4 id="src文件夹下的源码文件功能简介"><a href="#src文件夹下的源码文件功能简介" class="headerlink" title="src文件夹下的源码文件功能简介"></a>src文件夹下的源码文件功能简介</h4><p><code>integer.h</code>：文件中包含了一些数值类型定义。</p><p><code>diskio.c</code>：包含底层驱动介质的操作函数，这些函数需要用户自己去实现，主要添加底层驱动函数。</p><p><code>ff.c</code>：独立于底层介质操作文件的函数，利用这些函数实现文件的读写。</p><p><code>cc936.c</code>：本文件在<strong>option</strong>目录下，是简体中文支持所需要添加的文件，包含了简体中文的GBK和转换函数。</p><p><code>ffconf.h</code>：这个头文件包含了对文件系统的各种配置，类似<code>stm32f10x_conf.h</code>在STM32库中的功能。</p><p>如需要支持简体中文，需要把<code>ffconf.h</code>中的<strong>_CODE_PAGE</strong>的宏改成<strong>936</strong>，并把上面的<code>cc936.c</code>文件加入到工程之中。</p><p>若仅为使用文件系统，则只需要理解<code>integer.h</code>及<code>diskio.c</code>文件，并会调用<code>ff.c</code>中的函数就可以了。</p><p><strong>源码说明</strong>：本实验是在前一章实验的基础上来进行的，即首先要完成采用SPI方式驱动SD卡，并读写数据成功后才能进行本实验，因为在FATFS移植过程中，<code>diskio.c</code>文件中的对SD操作的函数都是调用SPI读写SD的函数。</p><p>下面先讲解FATFS移植的过程，然后再详细讲解FATFS本身的SD卡操作函数的用法。</p><h3 id="文件系统移植"><a href="#文件系统移植" class="headerlink" title="文件系统移植"></a>文件系统移植</h3><ul><li>下载地址：<a href="http://elm-chan.org/fsw/ff/00index_e.html" target="_blank" rel="noopener">http://elm-chan.org/fsw/ff/00index_e.html</a></li></ul><p><img src="C:%5CUsers%5Ccaihanyuan%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200728001103526.png" alt="image-20200728001103526"></p><p><img src="C:%5CUsers%5Ccaihanyuan%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200728003043579.png" alt="image-20200728003043579"></p><p>主要就是在<code>diskio.c</code>中的函数中填充SPI驱动SD卡的相关函数。</p><p>即完成：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">DSTATUS <span class="title">disk_initialize</span> <span class="params">(BYTE)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">DSTATUS <span class="title">disk_status</span> <span class="params">(BYTE)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">DRESULT <span class="title">disk_read</span> <span class="params">(BYTE, BYTE*, DWORD, BYTE)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">DRESULT <span class="title">disk_write</span> <span class="params">(BYTE, <span class="keyword">const</span> BYTE*, DWORD, BYTE)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">DRESULT <span class="title">disk_ioctl</span> <span class="params">(BYTE, BYTE, <span class="keyword">void</span>*)</span></span>;</span><br></pre></td></tr></table></figure><p><strong>以上几个函数的内部程序</strong></p><p>这里着重讲解初始化函数，读取函数，和写入函数。</p><ol><li><strong>初始化函数接口</strong></li></ol><p>以下是文件系统初始化函数接口，文件系统的一些函数会调用这个disk_initialize（）接口来进行底层介质的初始化。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">DSTATUS <span class="title">disk_initialize</span> <span class="params">( BYTE drv )</span> <span class="comment">//物理驱动号为0</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  u8 Status;</span><br><span class="line">  <span class="comment">/*此处仅支持一种介质的驱动（即SD卡）*/</span></span><br><span class="line">  <span class="keyword">if</span> (drv)</span><br><span class="line">  &#123;</span><br><span class="line">       <span class="keyword">return</span> STA_NOINIT;</span><br><span class="line">  &#125;</span><br><span class="line">   <span class="comment">/*SD卡初始化 */</span></span><br><span class="line">  Status = SD_Init();</span><br><span class="line">   <span class="comment">//SPI的bug，在SD卡操作失败时如果不执行如下操作，可能引起读写异常</span></span><br><span class="line">  <span class="keyword">if</span> (Status!=<span class="number">0</span>)</span><br><span class="line">  &#123;</span><br><span class="line">     SPI_SetSpeed(<span class="number">0</span>);</span><br><span class="line">     SPI_ReadWriteByte(<span class="number">0xff</span>);</span><br><span class="line">     SPI_SetSpeed(SPI_SPEED_HIGH);</span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">"init error"</span>);</span><br><span class="line">     <span class="keyword">return</span> STA_NOINIT;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">  &#123;</span><br><span class="line">     <span class="keyword">return</span> RES_OK;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个初始化函数接口调用了SPI的SD_Init()函数，返回初始化成功或失败的参数，当文件系统的上层函数调用disk_initialize()时，实质调用了SD_Init()函数对SD卡进行初始化</p><ol start="2"><li><strong>扇区读取函数</strong></li></ol><p>接下来是disk_read()函数，它是文件系统读取SD卡数据会调用的一个函数，所以我们在这个函数中加入SPI驱动的读取函数的接口。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">DRESULT <span class="title">disk_read</span> <span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">BYTE drv,<span class="comment">/* 物理驱动地址（0）*/</span></span></span></span><br><span class="line"><span class="function"><span class="params">BYTE *buff,<span class="comment">/* 数据缓存*/</span></span></span></span><br><span class="line"><span class="function"><span class="params">DWORD sector,<span class="comment">/* 扇区地址*/</span></span></span></span><br><span class="line"><span class="function"><span class="params">BYTE count<span class="comment">/*读多少个扇区*/</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">     u8 res;</span><br><span class="line">     <span class="keyword">if</span> (count &gt; <span class="number">1</span>)</span><br><span class="line">     &#123;</span><br><span class="line">         res=SD_ReadMultiBlock(sector,buff,count);</span><br><span class="line">         <span class="keyword">if</span>(res)<span class="comment">//如果res为1，说明读取失败。</span></span><br><span class="line">         &#123;</span><br><span class="line">              SPI_SetSpeed(<span class="number">0</span>);</span><br><span class="line">              SPI_ReadWriteByte(<span class="number">0xff</span>);</span><br><span class="line">              SPI_SetSpeed(SPI_SPEED_HIGH);</span><br><span class="line">              <span class="keyword">return</span> RES_ERROR;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">else</span></span><br><span class="line">         &#123;</span><br><span class="line">             <span class="keyword">return</span> RES_OK;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">else</span></span><br><span class="line">     &#123;</span><br><span class="line">         res=SD_ReadSingleBlock(sector,buff);</span><br><span class="line">         <span class="keyword">if</span>(res)</span><br><span class="line">         &#123;</span><br><span class="line">     SPI_SetSpeed(<span class="number">0</span>);</span><br><span class="line">     SPI_ReadWriteByte(<span class="number">0xff</span>);</span><br><span class="line">     SPI_SetSpeed(SPI_SPEED_HIGH);</span><br><span class="line">     <span class="keyword">return</span> RES_ERROR;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">else</span></span><br><span class="line">          &#123;</span><br><span class="line">             <span class="keyword">return</span> RES_OK;</span><br><span class="line">          &#125;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里分为两个部分，分为单块读取和多块读取。</p><p>因为用一个多块读取函数SD_ReadMultiBlock()比用多个单块读取函数SD_ReadSingleBlock()在编程结构上要简洁明了的多，所以加入一个判断函数来进行区分。</p><p>由于文件系统的读写都是以块（512字节）为单位的，所以只需要提供512字节或512*N字节的SD卡驱动。</p><ol start="3"><li><strong>扇区写入函数</strong></li></ol><p>扇区写入函数与扇区读取函数十分类似，也是根据写入的扇区数目是一个还是多个来分别调用不同写单块还是多块函数。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">DRESULT <span class="title">disk_write</span> <span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">BYTE drv,<span class="comment">/* Physical drive nmuber (0..) */</span></span></span></span><br><span class="line"><span class="function"><span class="params"><span class="keyword">const</span> BYTE *buff,<span class="comment">/* Data to be written */</span></span></span></span><br><span class="line"><span class="function"><span class="params">DWORD sector,<span class="comment">/* Sector address (LBA) */</span></span></span></span><br><span class="line"><span class="function"><span class="params">BYTE count<span class="comment">/* Number of sectors to write (1..255) */</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">u8 res;</span><br><span class="line"><span class="keyword">if</span> (count &gt; <span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">res=SD_WriteMultiBlock(sector,buff,count);</span><br><span class="line"><span class="keyword">if</span>(res)</span><br><span class="line">&#123;</span><br><span class="line">SPI_SetSpeed(<span class="number">0</span>);</span><br><span class="line">SPI_ReadWriteByte(<span class="number">0xff</span>);</span><br><span class="line">SPI_SetSpeed(SPI_SPEED_HIGH);</span><br><span class="line"><span class="keyword">return</span> RES_ERROR;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> RES_OK;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">res=SD_WriteSingleBlock(sector,buff);</span><br><span class="line"><span class="keyword">if</span>(res)</span><br><span class="line">&#123;</span><br><span class="line">SPI_SetSpeed(<span class="number">0</span>);</span><br><span class="line">SPI_ReadWriteByte(<span class="number">0xff</span>);</span><br><span class="line">SPI_SetSpeed(SPI_SPEED_HIGH);</span><br><span class="line"><span class="keyword">return</span> RES_ERROR;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> RES_OK;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li><strong>时间接口函数</strong></li></ol><p>在diskio.c文件的最后我们还得提供获取时间的函数，因为ff.c中调用了它，用于记录文件的创建，修改时间，而FATFS库没有给出函数的原型，所以需要用户实现，否则会发生编译出错。对于这部分函数，我们直接返回0即可。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">DWORD <span class="title">get_fattime</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以上即为文件系统的移植过程</p><h3 id="下面介绍几个文件系统常用的函数使用方法"><a href="#下面介绍几个文件系统常用的函数使用方法" class="headerlink" title="下面介绍几个文件系统常用的函数使用方法"></a>下面介绍几个文件系统常用的函数使用方法</h3><h4 id="注册工作区"><a href="#注册工作区" class="headerlink" title="注册工作区"></a>注册工作区</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">FRESULT <span class="title">f_mount</span> <span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">BYTE vol,<span class="comment">/* Logical drive number to be mounted/unmounted */</span></span></span></span><br><span class="line"><span class="function"><span class="params">FATFS *fs<span class="comment">/* Pointer to new file system object (NULL for unmount)*/</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span></span><br></pre></td></tr></table></figure><p>函数说明：</p><p>1：此函数的作用就是在磁盘里注册一个缓冲区，用来存储STM32文件系统的一些相关信息。</p><p>2：参数说明：</p><p>vol:盘符。</p><p>*fs:指向缓冲区的指针。</p><p>3：对磁盘进行操作之前，这个函数是必不可少的。</p><p>例如：f_mount(0,&amp;fs);</p><h4 id="打开文件夹"><a href="#打开文件夹" class="headerlink" title="打开文件夹"></a>打开文件夹</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">FRESULT <span class="title">f_opendir</span> <span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">DIR *dj,<span class="comment">/* Pointer to directory object to create */</span></span></span></span><br><span class="line"><span class="function"><span class="params"><span class="keyword">const</span> TCHAR *path<span class="comment">/* Pointer to the directory path */</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span></span><br></pre></td></tr></table></figure><p>函数说明：</p><p>1.此函数可以打开一个已存在的文件夹</p><p>2.参数说明：</p><p>*dj:指向一个空白的结构体，用来存储要打开的文件夹信息</p><p>*path:指向该文件夹名称的指针</p><h4 id="读取文件夹"><a href="#读取文件夹" class="headerlink" title="读取文件夹"></a>读取文件夹</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">FRESULT <span class="title">f_readdir</span> <span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">DIR *dj,<span class="comment">/* Pointer to the open directory object */</span></span></span></span><br><span class="line"><span class="function"><span class="params">FILINFO *fno<span class="comment">/* Pointer to file information to return */</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span></span><br></pre></td></tr></table></figure><p>函数说明：</p><p>1.此函数按照顺序读取文件夹内文件</p><p>2.参数说明：</p><p>*dj：指向读取的文件夹的信息结构体的指针</p><p>*fno：指向文件信息结构体，用来存储读取到的文件的信息</p><p>3.重复调用此函数可读取文件夹内所有文件</p><p>4.当所有文件读取结束，函数返回一个空字符串到f_name[]中</p><p>5.如果一个空指针赋给*fno，将返回从第一个文件开始读取</p><p><strong>例程</strong>：下面这段程序调用了上面介绍的几个函数</p><p>首先打开文件夹 move.然后查找其中的存档文件，并通过串口输出读取的文件名</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(f_opendir(&amp;dirs,”<span class="built_in">move</span>”)==FR_OK)<span class="comment">//打开文件夹成功</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">while</span>(f_readdir(&amp;dirs,&amp;finfo)==FR_OK)<span class="comment">//按顺序读文件夹</span></span><br><span class="line">    &#123;</span><br><span class="line">           <span class="keyword">if</span>(!finfo.fname[<span class="number">0</span>])  <span class="keyword">break</span>;<span class="comment">//如果文件名为0，结束</span></span><br><span class="line">           <span class="keyword">else</span></span><br><span class="line">           &#123;</span><br><span class="line">               <span class="keyword">if</span>(finfo.fattrib==AM_ARC)<span class="comment">//判断文件属性</span></span><br><span class="line">               <span class="built_in">printf</span>(“文件名:%s/r/n”,finfo.fname);</span><br><span class="line">           &#125;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们通过printf（）函数可以在串口监视器下看到输出如下：</p><p>文件名：liset.txt</p><p>文件名：speak.avi</p><p>在PC上查看SD卡的文件目录结构</p><p><img src="https://pic4.zhimg.com/80/v2-438054cedb4a8105967c253dbcee4a55_720w.jpg" alt="img"></p><p>可以看到，程序输出了后面两个文件的名称，对文件夹没做处理，因为在程序里对文件属性进行了判断：</p><p>if(finfo.fattrib==AM_ARC)，意思是只对存档文件进行处理。</p><h4 id="打开-新建一个文件"><a href="#打开-新建一个文件" class="headerlink" title="打开/新建一个文件"></a>打开/新建一个文件</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">FRESULT <span class="title">f_open</span> <span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">FIL *fp,<span class="comment">/* Pointer to the blank file object */</span></span></span></span><br><span class="line"><span class="function"><span class="params"><span class="keyword">const</span> TCHAR *path,<span class="comment">/* Pointer to the file name */</span></span></span></span><br><span class="line"><span class="function"><span class="params">BYTE mode<span class="comment">/* Access mode and file open mode flags */</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span></span><br></pre></td></tr></table></figure><p>函数说明：</p><p>1.此函数可以打开，或新建一个文件</p><p>2.参数说明：</p><p>*fp：指向一个用来存储文件对象的空结构体指针</p><p>*path：指向文件名的指针</p><p>mode：打开方式，可以是以下几种或几种的组合（默认方式是FA_OPEN_EXISTING）</p><p><img src="https://picb.zhimg.com/80/v2-a0b5ab7cbb0669e2c5dafa595c4a1800_720w.jpg" alt="img"></p><h4 id="读取文件"><a href="#读取文件" class="headerlink" title="读取文件"></a>读取文件</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">FRESULT <span class="title">f_read</span> <span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">FIL *fp, <span class="comment">/* Pointer to the file object */</span></span></span></span><br><span class="line"><span class="function"><span class="params"><span class="keyword">void</span> *buff,<span class="comment">/* Pointer to data buffer */</span></span></span></span><br><span class="line"><span class="function"><span class="params">UINT btr,<span class="comment">/* Number of bytes to read */</span></span></span></span><br><span class="line"><span class="function"><span class="params">UINT *br<span class="comment">/* Pointer to number of bytes read */</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span></span><br></pre></td></tr></table></figure><p>函数说明：</p><p>1.这个函数可以读取文件内容</p><p>2.参数说明：</p><p>*fp：指向文件对象结构体的指针</p><p>*buff：指向存储读取到的数据的数据缓冲的指针</p><p>btr：准备读取的字节数</p><p>*br:</p><p>（1）它的作用是用来检测文件的末尾，就是下面例程中的这句：</p><p>if(res||br&lt;sizeof(buffer)) break;</p><p>（2）每次f_read执行完之后，<em>br的值等于本次读取到的字节数，若</em>br&lt;btr，即本次读取到的字节小于准备读取的字节，说明读指针已到达文件末尾。</p><p><strong>例程</strong>：首先以读取的方式打开文件，然后将文件内容通过串口输出</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">res=f_open(&amp;fp,”<span class="keyword">new</span>/news.txt”,FA_READ);</span><br><span class="line"><span class="keyword">if</span>(!res)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">printf</span>(“<span class="built_in">open</span> <span class="keyword">new</span>/news.txt:%d/r/n”,res);</span><br><span class="line">    br=<span class="number">1</span>;</span><br><span class="line">    a=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">printf</span>(“文件内容：”);</span><br><span class="line">    <span class="keyword">for</span>(;;)</span><br><span class="line">    &#123;</span><br><span class="line">       <span class="keyword">for</span>(a=<span class="number">0</span>;a&lt;<span class="number">512</span>;a++) buff[a]=<span class="number">0</span>;</span><br><span class="line">       res=f_read(&amp;fp,buff,<span class="keyword">sizeof</span>(buff),&amp;br);</span><br><span class="line">       <span class="built_in">printf</span>(“%s/r/n”,<span class="built_in">buffer</span>);</span><br><span class="line">       <span class="keyword">if</span>(res||br&lt;<span class="keyword">sizeof</span>(buff)) <span class="keyword">break</span>;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//不论是打开，还是新建文件，一定要关闭</span></span><br><span class="line">f_close(&amp;fp);</span><br></pre></td></tr></table></figure><h4 id="写文件"><a href="#写文件" class="headerlink" title="写文件"></a>写文件</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">FRESULT <span class="title">f_write</span> <span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">FIL *fp,<span class="comment">/* Pointer to the file object */</span></span></span></span><br><span class="line"><span class="function"><span class="params"><span class="keyword">const</span> <span class="keyword">void</span> *buff,<span class="comment">/* Pointer to the data to be written */</span></span></span></span><br><span class="line"><span class="function"><span class="params">UINT btw,<span class="comment">/* Number of bytes to write */</span></span></span></span><br><span class="line"><span class="function"><span class="params">UINT *bw<span class="comment">/* Pointer to number of bytes written */</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span></span><br></pre></td></tr></table></figure><p>函数说明：</p><p>1.此函数用来想文件中写入数据， 前提是以写文件的方式打开文件</p><p>2.参数说明：</p><p>*fp：指向文件对象结构体的指针</p><p>*buff：指向数据缓冲的指针</p><p>btw：准备写入的字节数</p><p>bw：记录已写入的字节数，用来检测是否写完</p><p>3.后面两个函数的长度是两个字节，计数值最大为65536，所以一次写入字节数最大为64k。</p><p>一般情况下一次不会写这么长的数据，因为就算RAM够用，也不会在里面开一个几十k的数据缓冲区。</p><p><strong>例程</strong>：以新建和写模式打开或新建一个文件，如果不存在，会自动创建，如果存在则关闭文件并通过串口输出相关信息。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">res = f_open(&amp;fdst,<span class="string">"0:/Dem3.TXT"</span>,FA_CREATE_NEW | FA_WRITE);</span><br><span class="line"><span class="keyword">if</span> ( res == FR_OK )<span class="comment">//新建并打开了该文件</span></span><br><span class="line">&#123; </span><br><span class="line">res = f_write(&amp;fdst, textFileBuffer, <span class="keyword">sizeof</span>(textFileBuffer), &amp;bw); </span><br><span class="line"><span class="built_in">printf</span>( <span class="string">"\r\n file create success \n"</span> ); </span><br><span class="line"><span class="comment">//新建或打开文件后，一定要关闭   </span></span><br><span class="line">f_close(&amp;fdst);      </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> ( res == FR_EXIST )<span class="comment">//文件已存在</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>( <span class="string">"\r\n file is existed \n"</span> );</span><br><span class="line">f_close(&amp;fdst);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>掌握以上几个函数，可以利用FATFS对SD卡进行基本的读写操作了</p><h3 id="下面介绍另外几个常用的函数"><a href="#下面介绍另外几个常用的函数" class="headerlink" title="下面介绍另外几个常用的函数"></a>下面介绍另外几个常用的函数</h3><h4 id="刷新文件信息"><a href="#刷新文件信息" class="headerlink" title="刷新文件信息"></a>刷新文件信息</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">FRESULT <span class="title">f_sync</span> <span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    FIL *fp       <span class="comment">/* Pointer tothe file object */</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span></span><br></pre></td></tr></table></figure><p>函数说明：</p><p>此函数功能兼容f_close,它与f_close的区别就是执行后，当前文件是否仍然有效。</p><p>参数说明：</p><p>*fp：指向文件对象结构体的指针</p><p>调用此函数后，当前文件仍然可读可写可查询</p><p>当文件处于长时间的写模式，如数据记录时，定期调用此函数，或在写入数据后立即调用此函数，可以减少因断电等意外情况带来的损失。</p><h4 id="新建文件夹"><a href="#新建文件夹" class="headerlink" title="新建文件夹"></a>新建文件夹</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">FRESULT <span class="title">f_mkdir</span> <span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> TCHAR *path    <span class="comment">/*Pointer to the directory path */</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span></span><br></pre></td></tr></table></figure><p>函数说明：</p><p>1.新建一个文件夹</p><p>2.参数说明：</p><p>*path：指向将要创建的文件夹名的指针</p><p>文件名应符合fatfs标准，不能包含非法字符</p><p>文件名长度不能大于8，否则新建不成功</p><p>例程：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">f_mkdir(“<span class="keyword">new</span>”);</span><br><span class="line">f_mkdir(“foldr/<span class="keyword">new</span>”);</span><br></pre></td></tr></table></figure><h4 id="删除文件或文件夹"><a href="#删除文件或文件夹" class="headerlink" title="删除文件或文件夹"></a>删除文件或文件夹</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">FRESULT <span class="title">f_unlink</span> <span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">const</span> TCHAR *path    <span class="comment">/*Pointer to the file or directory path */</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span></span><br></pre></td></tr></table></figure><p>函数说明：</p><p>1 此函数可以删除一个文件或文件夹</p><p>2 参数说明：</p><p>*path：指向文件或文件夹的名称的指针</p><p>3 删除文件夹时，不能为当前文件夹，不能为非空文件夹</p><p>4 删除文件时，不能为已打开文件，不能为只读文件</p>]]></content>
      
      
      <categories>
          
          <category> Stm32 </category>
          
          <category> 文件操作 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Stm32 </tag>
            
            <tag> 文件操作 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ESP8266获取心知天气</title>
      <link href="/2020/07/18/STM32/ESP8266%E8%8E%B7%E5%8F%96%E5%BF%83%E7%9F%A5%E5%A4%A9%E6%B0%94/"/>
      <url>/2020/07/18/STM32/ESP8266%E8%8E%B7%E5%8F%96%E5%BF%83%E7%9F%A5%E5%A4%A9%E6%B0%94/</url>
      
        <content type="html"><![CDATA[<h1 id="心知天气"><a href="#心知天气" class="headerlink" title="心知天气"></a>心知天气</h1><p><code>https://api.seniverse.com/v3/weather/now.json?key=**key**&amp;location=**dalian**&amp;language=**zh-Hans**&amp;unit=c</code></p><p>上面加粗的地方，key处替换为你自己的私钥；dalian处替换为你要查询的目标城市；zh-Hans处替换为en就是英文的显示方式了。我们为了OLED显示方便，先使用英文的显示方式。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;api.seniverse.com&#x2F;v3&#x2F;weather&#x2F;now.json?key&#x3D;Szu5seLn_Fv3xkHdE&amp;location&#x3D;dongguan&amp;language&#x3D;zh-Hans&amp;unit&#x3D;c</span><br></pre></td></tr></table></figure><h1 id="esp8266从联网到云端取数据的原理"><a href="#esp8266从联网到云端取数据的原理" class="headerlink" title="esp8266从联网到云端取数据的原理"></a>esp8266从联网到云端取数据的原理</h1><p><img src="https://img-blog.csdnimg.cn/20190428082607726.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3h1d194eQ==,size_16,color_FFFFFF,t_70" alt="img"></p><p><img src="https://img-blog.csdnimg.cn/20190428082616149.png" alt="img"></p><h1 id="cJSON"><a href="#cJSON" class="headerlink" title="cJSON"></a>cJSON</h1><p>cJSON 开源项目位置：<a href="http://sourceforge.net/projects/cjson/" target="_blank" rel="noopener">点击打开链接</a></p><p>更加详细的解释和示例请查看 <a href="http://www.json.org/" target="_blank" rel="noopener">http://www.json.org/</a> 主页。</p><h2 id="什么是JSON？"><a href="#什么是JSON？" class="headerlink" title="什么是JSON？"></a>什么是JSON？</h2><ul><li><p>JSON 指的是 JavaScript 对象表示法（<strong>J</strong>ava<strong>S</strong>cript <strong>O</strong>bject <strong>N</strong>otation）</p></li><li><p>是轻量级的文本数据交换格式，JSON 比 XML 更小、更快，更易解析。</p></li></ul><h2 id="JSON-语法规则"><a href="#JSON-语法规则" class="headerlink" title="JSON 语法规则"></a>JSON 语法规则</h2><p>JSON 语法是 JavaScript 对象表示语法的子集。</p><ul><li><p>数据在名称/值对中</p></li><li><p>数据由逗号分隔</p></li><li><p>大括号保存对象</p></li><li><p>中括号保存数组</p></li></ul><p>JSON 值可以是：<strong>字符串, 数字, 对象, 数组, 布尔值 或 null</strong> </p><p>JSON是一种轻量级的数据交换格式，这里不做详细的分析，简单的理解为，是互联网上的一种数据打包协议，比较方便人阅读和编写，下面是阿里云物联网精简物模型信息的json格式，如下所示：</p><p><strong>精简物模型：</strong></p><p>物模型是对设备在云端的功能描述，包括设备的属性、服务和事件。物联网平台通过定义一种物的描述语言来描述物模型，称之为 TSL (即Thing Specification Language)，采用JSON格式，您可以根据TSL组装上报设备的数据。您可以导出完整物模型，用于云端应用开发；您也可以只导出精简物模型，配合设备端SDK实现设备开发。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"properties"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"identifier"</span>: <span class="string">"WaterConsumption"</span>,</span><br><span class="line">      <span class="attr">"dataType"</span>: &#123;</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"float"</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"identifier"</span>: <span class="string">"ValveSwitch"</span>,</span><br><span class="line">      <span class="attr">"dataType"</span>: &#123;</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"enum"</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  如果仔细看，其实各个数据关系还是比较明显的。在json中，一切都是对象(object)，因此任何支持的数据类型，都是可以通过JSON来表示的，例如字符串、数字、对象、数组。JSON本质是一个字符串，而json的对象则是其中的元素。</p><p>  从上面的分析，我们可以知道，对于json的解析，简单的讲就是从一堆字符串中，筛选出自己需要的信息。这个听起来很简单，真正实现起来却不是那么简单，因为字符串筛选功能本身就很难，再加上其中的对象排列顺序可能不同，中间有没有空格，数值是整数、还是浮点数，是正数，还是负数，这些都是很麻烦的，如果我们的数据格式是固定的还好，但是稍微有一点变动，就会很麻烦，所以写出一个兼容性很强的json解析程序， 还是比较难的，而cJSON就是一个专门用来解析JSON字符串的，因为简洁又简单，效率还快，移植也特别方便，只需要一个cJSON.c和cJSON.h文件。</p><h2 id="cJSON的使用方法"><a href="#cJSON的使用方法" class="headerlink" title="cJSON的使用方法"></a>cJSON的使用方法</h2><blockquote><p>参考：<a href="https://blog.csdn.net/fengxinlinux/article/details/53121287" target="_blank" rel="noopener">https://blog.csdn.net/fengxinlinux/article/details/53121287</a></p></blockquote><h2 id="STM32-cJSON移植步骤："><a href="#STM32-cJSON移植步骤：" class="headerlink" title="STM32 cJSON移植步骤："></a>STM32 cJSON移植步骤：</h2><ol><li><strong>下载JSON文件</strong></li></ol><p>链接:     <a href="https://sourceforge.net/projects/cjson/" target="_blank" rel="noopener">https://sourceforge.net/projects/cjson/</a></p><ol start="2"><li><strong>拷贝整个cJSON源文件到工程的根目录下</strong></li></ol><ol start="3"><li><strong>添加cJSON文件夹至Include Paths：</strong></li></ol><ol start="4"><li><strong>添加cJSON.c文件夹至工程中</strong></li></ol><p><img src="https://mmbiz.qpic.cn/mmbiz_png/z3XY4DVa1ibOiavuTWPrhUJa47dBLneXIQQXXmtHpwQKfM1cfy8ZBcPfCiaPyc4kC3eQqOlAq31DjjeVynYJ8zMBQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></p><p>添加完毕之后，工程目录显示格式：</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/z3XY4DVa1ibOiavuTWPrhUJa47dBLneXIQgAuPaj0K2qf5cN8YU3UJAVlU1I0WsF0ajwjreZN51OVbaBlsKqPoKw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></p><h3 id="解析函数里主要用到以下函数"><a href="#解析函数里主要用到以下函数" class="headerlink" title="解析函数里主要用到以下函数"></a>解析函数里主要用到以下函数</h3><p><strong>1、cJSON_Parse函数</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cJSON*cJSON_Parse(<span class="keyword">const</span> char *value);</span><br></pre></td></tr></table></figure><p>该函数用来解析JSON数据包，并按照cJSON结构体的结构序列化整个数据包。</p><p><strong>2、cJSON_GetObjectItem函数</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cJSON_GetObjectItem(cJSON *object,<span class="keyword">const</span> char *string);</span><br></pre></td></tr></table></figure><p>该函数可从cJSON结构体中查找某个子节点名称（键名称），如果查找成功可把该子节点序列化到cJSON结构体中。</p><p><strong>3、cJSON_GetArraySize函数</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cJSON_GetArraySize(<span class="keyword">const</span> cJSON *array);</span><br></pre></td></tr></table></figure><p>该函数可获取数组中元素个数。</p><p><strong>4、cJSON_GetArrayItem函数</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cJSON_GetArrayItem(<span class="keyword">const</span> cJSON *array, int index);</span><br></pre></td></tr></table></figure><p>该函数可获取数组中的内容。</p><p><strong>5、cJSON_Delete函数</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cJSON_Delete(cJSON *c);</span><br></pre></td></tr></table></figure><p>该函数用来释放<code>cJSON_Parse</code>函数内部申请的堆内存。</p><p>我们的解析函数主要运用多次<code>cJSON_GetObjectItem</code>来匹配各对象成员，然后取出各个键值对的值<code>valuestring</code>。</p><h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><p><img src="C:%5CUsers%5Ccaihanyuan%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200727173920724.png" alt="image-20200727173920724"></p><h3 id="解析json"><a href="#解析json" class="headerlink" title="解析json"></a>解析json</h3><p>用到的函数，在cJSON.h中都能找到：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Supply a block of JSON, and this returns a cJSON object you can interrogate. Call cJSON_Delete when finished. */</span></span><br><span class="line"><span class="function"><span class="keyword">extern</span> cJSON *<span class="title">cJSON_Parse</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *value)</span></span>;<span class="comment">//从 给定的json字符串中得到cjson对象</span></span><br><span class="line"><span class="comment">/* Render a cJSON entity to text for transfer/storage. Free the char* when finished. */</span></span><br><span class="line"><span class="function"><span class="keyword">extern</span> <span class="keyword">char</span>  *<span class="title">cJSON_Print</span><span class="params">(cJSON *item)</span></span>;<span class="comment">//从cjson对象中获取有格式的json对象</span></span><br><span class="line"><span class="comment">/* Render a cJSON entity to text for transfer/storage without any formatting. Free the char* when finished. */</span></span><br><span class="line"><span class="function"><span class="keyword">extern</span> <span class="keyword">char</span>  *<span class="title">cJSON_PrintUnformatted</span><span class="params">(cJSON *item)</span></span>;<span class="comment">//从cjson对象中获取无格式的json对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Delete a cJSON entity and all subentities. */</span></span><br><span class="line"><span class="function"><span class="keyword">extern</span> <span class="keyword">void</span>   <span class="title">cJSON_Delete</span><span class="params">(cJSON *c)</span></span>;<span class="comment">//删除cjson对象，释放链表占用的内存空间</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Returns the number of items in an array (or object). */</span></span><br><span class="line"><span class="function"><span class="keyword">extern</span> <span class="keyword">int</span>    <span class="title">cJSON_GetArraySize</span><span class="params">(cJSON *<span class="built_in">array</span>)</span></span>;<span class="comment">//获取cjson对象数组成员的个数</span></span><br><span class="line"><span class="comment">/* Retrieve item number "item" from array "array". Returns NULL if unsuccessful. */</span></span><br><span class="line"><span class="function"><span class="keyword">extern</span> cJSON *<span class="title">cJSON_GetArrayItem</span><span class="params">(cJSON *<span class="built_in">array</span>,<span class="keyword">int</span> item)</span></span>;<span class="comment">//根据下标获取cjosn对象数组中的对象</span></span><br><span class="line"><span class="comment">/* Get item "string" from object. Case insensitive. */</span></span><br><span class="line"><span class="function"><span class="keyword">extern</span> cJSON *<span class="title">cJSON_GetObjectItem</span><span class="params">(cJSON *object,<span class="keyword">const</span> <span class="keyword">char</span> *<span class="built_in">string</span>)</span></span>;<span class="comment">//根据键获取对应的值（cjson对象）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* For analysing failed parses. This returns a pointer to the parse error. You'll probably need to look a few chars back to make sense of it. Defined when cJSON_Parse() returns 0. 0 when cJSON_Parse() succeeds. */</span></span><br><span class="line"><span class="function"><span class="keyword">extern</span> <span class="keyword">const</span> <span class="keyword">char</span> *<span class="title">cJSON_GetErrorPtr</span><span class="params">(<span class="keyword">void</span>)</span></span>;<span class="comment">//获取错误字符串</span></span><br></pre></td></tr></table></figure><p><strong>解析函数里主要用到以下函数</strong> </p><p><strong>1、cJSON_Parse函数</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cJSON*cJSON_Parse(<span class="keyword">const</span> char *value);</span><br></pre></td></tr></table></figure><p>该函数用来解析JSON数据包，并按照cJSON结构体的结构序列化整个数据包。</p><p><strong>2、cJSON_GetObjectItem函数</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cJSON_GetObjectItem(cJSON *object,<span class="keyword">const</span> char *string);</span><br></pre></td></tr></table></figure><p>该函数可从cJSON结构体中查找某个子节点名称（键名称），如果查找成功可把该子节点序列化到cJSON结构体中。</p><p><strong>3、cJSON_GetArraySize函数</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cJSON_GetArraySize(<span class="keyword">const</span> cJSON *array);</span><br></pre></td></tr></table></figure><p>该函数可获取数组中元素个数。</p><p><strong>4、cJSON_GetArrayItem函数</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cJSON_GetArrayItem(<span class="keyword">const</span> cJSON *array, int index);</span><br></pre></td></tr></table></figure><p>该函数可获取数组中的内容。</p><p><strong>5、cJSON_Delete函数</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cJSON_Delete(cJSON *c);</span><br></pre></td></tr></table></figure><p>该函数用来释放<code>cJSON_Parse</code>函数内部申请的堆内存。</p><p>我们的解析函数主要运用多次<code>cJSON_GetObjectItem</code>来匹配各对象成员，然后取出各个键值对的值<code>valuestring</code>。</p><p>要解析的json</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"semantic"</span>: &#123;</span><br><span class="line">        <span class="attr">"slots"</span>:    &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"张三"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"rc"</span>:   <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"operation"</span>:    <span class="string">"CALL"</span>,</span><br><span class="line">    <span class="attr">"service"</span>:  <span class="string">"telephone"</span>,</span><br><span class="line">    <span class="attr">"text"</span>: <span class="string">"打电话给张三"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>代码：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"cJSON.h"</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> * jsonStr = <span class="string">"&#123;\"semantic\":&#123;\"slots\":&#123;\"name\":\"张三\"&#125;&#125;, \"rc\":0, \"operation\":\"CALL\", \"service\":\"telephone\", \"text\":\"打电话给张三\"&#125;"</span>;</span><br><span class="line">    cJSON * root = <span class="literal">NULL</span>;</span><br><span class="line">    cJSON * item = <span class="literal">NULL</span>;<span class="comment">//cjson对象</span></span><br><span class="line"></span><br><span class="line">    root = cJSON_Parse(jsonStr);     </span><br><span class="line">    <span class="keyword">if</span> (!root) </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Error before: [%s]\n"</span>,cJSON_GetErrorPtr());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, <span class="string">"有格式的方式打印Json:"</span>);           </span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%s\n\n"</span>, cJSON_Print(root));</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, <span class="string">"无格式方式打印json："</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%s\n\n"</span>, cJSON_PrintUnformatted(root));</span><br><span class="line"></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, <span class="string">"一步一步的获取name 键值对:"</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, <span class="string">"获取semantic下的cjson对象:"</span>);</span><br><span class="line">        item = cJSON_GetObjectItem(root, <span class="string">"semantic"</span>);<span class="comment">//</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, cJSON_Print(item));</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, <span class="string">"获取slots下的cjson对象"</span>);</span><br><span class="line">        item = cJSON_GetObjectItem(item, <span class="string">"slots"</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, cJSON_Print(item));</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, <span class="string">"获取name下的cjson对象"</span>);</span><br><span class="line">        item = cJSON_GetObjectItem(item, <span class="string">"name"</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, cJSON_Print(item));</span><br><span class="line"></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%s:"</span>, item-&gt;<span class="built_in">string</span>);   <span class="comment">//看一下cjson对象的结构体中这两个成员的意思</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, item-&gt;valuestring);</span><br><span class="line">                        </span><br><span class="line"></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\n%s\n"</span>, <span class="string">"打印json所有最内层键值对:"</span>);</span><br><span class="line">        printJson(root);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="构造json"><a href="#构造json" class="headerlink" title="构造json"></a>构造json</h3><p>构造 json比较简单，添加json对象即可。参照例子一看大概就明白了。</p><p>主要就是用，cJSON_AddItemToObject函数添加json节点。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">xtern cJSON *<span class="title">cJSON_CreateObject</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">extern</span> <span class="keyword">void</span> <span class="title">cJSON_AddItemToObject</span><span class="params">(cJSON *object,<span class="keyword">const</span> <span class="keyword">char</span> *<span class="built_in">string</span>,cJSON *item)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">extern</span> cJSON *<span class="title">cJSON_CreateNull</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">extern</span> cJSON *<span class="title">cJSON_CreateTrue</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">extern</span> cJSON *<span class="title">cJSON_CreateFalse</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">extern</span> cJSON *<span class="title">cJSON_CreateBool</span><span class="params">(<span class="keyword">int</span> b)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">extern</span> cJSON *<span class="title">cJSON_CreateNumber</span><span class="params">(<span class="keyword">double</span> num)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">extern</span> cJSON *<span class="title">cJSON_CreateString</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *<span class="built_in">string</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">extern</span> cJSON *<span class="title">cJSON_CreateArray</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">extern</span> cJSON *<span class="title">cJSON_CreateObject</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br></pre></td></tr></table></figure><p>要构建的json：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">"semantic": &#123;</span><br><span class="line">        "slots":    &#123;</span><br><span class="line">            "name": "张三"</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    "rc":   0,</span><br><span class="line">    "operation":    "CALL",</span><br><span class="line">    "service":  "telephone",</span><br><span class="line">    "text": "打电话给张三"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>代码：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"cJSON.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cJSON * root =  cJSON_CreateObject();</span><br><span class="line">    cJSON * item =  cJSON_CreateObject();</span><br><span class="line">    cJSON * next =  cJSON_CreateObject();</span><br><span class="line"></span><br><span class="line">    cJSON_AddItemToObject(root, <span class="string">"rc"</span>, cJSON_CreateNumber(<span class="number">0</span>));<span class="comment">//根节点下添加</span></span><br><span class="line">    cJSON_AddItemToObject(root, <span class="string">"operation"</span>, cJSON_CreateString(<span class="string">"CALL"</span>));</span><br><span class="line">    cJSON_AddItemToObject(root, <span class="string">"service"</span>, cJSON_CreateString(<span class="string">"telephone"</span>));</span><br><span class="line">    cJSON_AddItemToObject(root, <span class="string">"text"</span>, cJSON_CreateString(<span class="string">"打电话给张三"</span>));</span><br><span class="line">    cJSON_AddItemToObject(root, <span class="string">"semantic"</span>, item);<span class="comment">//root节点下添加semantic节点</span></span><br><span class="line">    cJSON_AddItemToObject(item, <span class="string">"slots"</span>, next);<span class="comment">//semantic节点下添加item节点</span></span><br><span class="line">    cJSON_AddItemToObject(next, <span class="string">"name"</span>, cJSON_CreateString(<span class="string">"张三"</span>));<span class="comment">//添加name节点</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, cJSON_Print(root));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="JSON应用的地方"><a href="#JSON应用的地方" class="headerlink" title="JSON应用的地方"></a>JSON应用的地方</h2><ul><li>IoT云端下行的payload数据包解析</li><li>自定义JSON格式通讯协议</li><li>设备间参数传递</li><li>API接口返回值，比如大部分天气API</li><li>网络数据传输</li></ul><h2 id="在线JSON校验格式化工具"><a href="#在线JSON校验格式化工具" class="headerlink" title="在线JSON校验格式化工具"></a>在线JSON校验格式化工具</h2><p><a href="http://www.bejson.com/" target="_blank" rel="noopener">http://www.bejson.com/</a></p><p>该网址可以压缩JSON字符串，校验JSON字符串是否合法。</p>]]></content>
      
      
      <categories>
          
          <category> ESP8266 </category>
          
          <category> Stm32 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Stm32 </tag>
            
            <tag> ESP8266 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>字体</title>
      <link href="/2020/07/15/%E5%AD%97%E4%BD%93/"/>
      <url>/2020/07/15/%E5%AD%97%E4%BD%93/</url>
      
        <content type="html"><![CDATA[<blockquote><p>转自：<a href="https://www.zhihu.com/question/2029986" target="_blank" rel="noopener">https://www.zhihu.com/question/2029986</a></p></blockquote><p>可以去<a href="https://www.programmingfonts.org/#droid-sans" target="_blank" rel="noopener">这里</a>测试各种编程的字体：</p><p>不需要安装任何东西，完全在线预览。</p><a id="more"></a><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200715110111.png" alt=""></p><p>然后下载喜欢的字体就好啦。</p><p>这个问题2012年提出来的，高赞的几个答案也是2013年、2015年回答的。从2015年开始正是VS Code开始流行的时间。所以下面介绍一下VS Code设置字体的方法，就用官方文档提到的Fira Code。</p><p>Fira Code支持ligatures(连体字符)：</p><p><img src="http://qcev8hlsw.bkt.clouddn.com//v2-259a0a00ecc80f8ea2e013b563d14fbd_720w.jpg" alt="img"></p><p>例如JavaScript代码：</p><p><img src="http://qcev8hlsw.bkt.clouddn.com//v2-b6fd9ed6d71c02b89c78adf886e3a43f_720w.jpg" alt="img"></p><p>先去<a href="https://github.com/tonsky/FiraCode/wiki" target="_blank" rel="noopener">Fira Code Github</a>看安装字体的方法：</p><p>Windows支持Chocolatey安装，Mac支持HomeBrew安装。</p><p>choco:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">choco install firacode</span><br></pre></td></tr></table></figure><p>brew:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew tap homebrew/cask-fonts</span><br><span class="line">brew cask install font-fira-code</span><br></pre></td></tr></table></figure><p>关于Windows使用Chocolatey，看我的<a href="https://zhuanlan.zhihu.com/p/53421288" target="_blank" rel="noopener">一篇文章</a></p><p>VS Code<a href="https://code.visualstudio.com/docs/getstarted/tips-and-tricks" target="_blank" rel="noopener">文档tips and tricks页面</a>介绍了设置字体的方法</p><p>直接修改settings.json：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">   "editor.fontFamily": "'Cascadia Code PL', 'Courier New', 'monospace'",  // 控制编辑器字体</span><br><span class="line">   "editor.fontSize": 16, // 控制编辑器字体大小</span><br><span class="line">"editor.fontLigatures": false // 配置字体连字或字体功能。</span><br></pre></td></tr></table></figure><p>或者通过界面设置：</p><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200715110515.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 字体 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 字体 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo使用介绍</title>
      <link href="/2020/06/23/Hexo%E4%BD%BF%E7%94%A8%E4%BB%8B%E7%BB%8D/"/>
      <url>/2020/06/23/Hexo%E4%BD%BF%E7%94%A8%E4%BB%8B%E7%BB%8D/</url>
      
        <content type="html"><![CDATA[<h1 id="什么是Hexo"><a href="#什么是Hexo" class="headerlink" title="什么是Hexo"></a>什么是Hexo</h1><p><code>Hexo</code>是一个快速、简洁且高效的博客框架工具。它可以把<code>Markdown</code>文档快速解析为静态页面，并支持各种漂亮的主题。</p><p>所以我们可以使用熟悉的<code>Markdown</code>来写文章（编译器随便选），然后通过<code>Hexo</code>把文章转换为静态页面，再把静态页面托管到<code>GitHub</code>上，然后绑定自己的域名，个人博客就搭建完成了。</p><a id="more"></a><h3 id="常用的一些命令"><a href="#常用的一些命令" class="headerlink" title="常用的一些命令"></a>常用的一些命令</h3><ul><li>重新生成和运行</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo g    <span class="comment"># 生成网站</span></span><br><span class="line">hexo s    </span><br><span class="line">hexo d    <span class="comment"># 部署到GitHub</span></span><br><span class="line">hexo new xxx    <span class="comment"># 新建笔记</span></span><br></pre></td></tr></table></figure><h1 id="下载主题"><a href="#下载主题" class="headerlink" title="下载主题"></a>下载主题</h1><p>选择好了你的主题之后，就可以下载主题资源了，比如我这里选择一个 <strong>NEXT</strong> 主题来演示一下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/iissnan/hexo-theme-next</span><br></pre></td></tr></table></figure><p>这里主要就是将主题下载到我们的<code>themes</code>目录下。</p><h2 id="配置主题"><a href="#配置主题" class="headerlink" title="配置主题"></a>配置主题</h2><p>主题下载完之后，在你根目录下的 _config.yml 文件中，修改 theme 为你的主题名字：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">theme: next</span><br></pre></td></tr></table></figure><p><a href="https://theme-next.iissnan.com/theme-settings.html#tags-page" target="_blank" rel="noopener">NexT主题配置</a></p><h1 id="个性化设置"><a href="#个性化设置" class="headerlink" title="个性化设置"></a>个性化设置</h1><h2 id="怎么改"><a href="#怎么改" class="headerlink" title="怎么改"></a>怎么改</h2><p><strong><a href="https://juejin.im/post/58eb2fd2a0bb9f006928f8c7" target="_blank" rel="noopener">转自此处</a></strong></p><p><strong><a href="http://cherryblog.site/#/" target="_blank" rel="noopener">以及别人家的博客</a></strong></p><p>我们需要改的文件其实也就那么几个，大部分是不需要更改，next都已经帮我们配置好了~<br>默认目录结构：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── .deploy</span><br><span class="line">├── public</span><br><span class="line">├── scaffolds</span><br><span class="line">├── scripts</span><br><span class="line">├── source</span><br><span class="line">|   ├── _drafts</span><br><span class="line">|   └── _posts</span><br><span class="line">├── themes</span><br><span class="line">├── _config.yml</span><br><span class="line">└── package.json</span><br></pre></td></tr></table></figure><ul><li><p>deploy：执行hexo deploy命令部署到GitHub上的内容目录</p></li><li><p>public：执行hexo generate命令，输出的静态网页内容目录</p></li><li><p>scaffolds：layout模板文件目录，其中的md文件可以添加编辑</p></li><li><p>scripts：扩展脚本目录，这里可以自定义一些javascript脚本</p></li><li><p>source：文章源码目录，该目录下的markdown和html文件均会被hexo处理。该页面对应repo的根目录，404文件、favicon.ico文件，CNAME文件等都应该放这里，该目录下可新建页面目录。</p><ul><li>drafts：草稿文章</li><li>posts：发布文章</li></ul></li><li><p>themes：主题文件目录</p></li><li><p>_config.yml：全局配置文件，大多数的设置都在这里</p></li><li><p>package.json：应用程序数据，指明hexo的版本等信息，类似于一般软件中的关于按钮</p></li></ul><p>我们最先修改的应该是在hexo根目录下的配置文件<code>_config.yml</code>文件，这里是配置整个站点的配置信息，在文章的最后贴出我的配置文件，有兴趣的朋友可以参考一下~<br> 其次就是我们的主题配置文件<br> 在对应的主题下的<code>_config.yml</code> 因为我使用的是next主题，所以目录的路径为<code>C:\Hexo\themes\next\_config.yml</code> 这里配置的是使用主题的配置文件，这个配置文件的东西就有点多了，我们大部分的修改也是在这个文件下完成的。比如说使用集成的第三方插件，默认为false，我们需要将其改为true并且配置相应的app_key就可以使用该插件了~有木有很方便(^ ◕ᴥ◕ ^)<br> 然后我们需要修改样式的话是需要设置css和甚至是修改模板，<br> 页面展现的全部逻辑都在每个主题中控制，源代码在hexo\themes\你使用的主题\中，以next主题为例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">├── .github            #git信息</span><br><span class="line">├── languages          #多语言</span><br><span class="line">|   ├── default.yml    #默认语言</span><br><span class="line">|   └── zh-Hans.yml      #简体中文</span><br><span class="line">|   └── zh-tw.yml      #繁体中文</span><br><span class="line">├── layout             #布局，根目录下的*.ejs文件是对主页，分页，存档等的控制</span><br><span class="line">|   ├── _custom        #可以自己修改的模板，覆盖原有模板</span><br><span class="line">|   |   ├── _header.swig    #头部样式</span><br><span class="line">|   |   ├── _sidebar.swig   #侧边栏样式</span><br><span class="line">|   ├── _macro        #可以自己修改的模板，覆盖原有模板</span><br><span class="line">|   |   ├── post.swig    #文章模板</span><br><span class="line">|   |   ├── reward.swig    #打赏模板</span><br><span class="line">|   |   ├── sidebar.swig   #侧边栏模板</span><br><span class="line">|   ├── _partial       #局部的布局</span><br><span class="line">|   |   ├── head       #头部模板</span><br><span class="line">|   |   ├── search     #搜索模板</span><br><span class="line">|   |   ├── share      #分享模板</span><br><span class="line">|   ├── _script        #局部的布局</span><br><span class="line">|   ├── _third-party   #第三方模板</span><br><span class="line">|   ├── _layout.swig   #主页面模板</span><br><span class="line">|   ├── index.swig     #主页面模板</span><br><span class="line">|   ├── page           #页面模板</span><br><span class="line">|   └── tag.swig       #tag模板</span><br><span class="line">├── scripts            #script源码</span><br><span class="line">|   ├── tags           #tags的script源码</span><br><span class="line">|   ├── marge.js       #页面模板</span><br><span class="line">├── source             #源码</span><br><span class="line">|   ├── css            #css源码</span><br><span class="line">|   |   ├── _common    #*.styl基础css</span><br><span class="line">|   |   ├── _custom    #*.styl局部css</span><br><span class="line">|   |   └── _mixins    #mixins的css</span><br><span class="line">|   ├── fonts          #字体</span><br><span class="line">|   ├── images         #图片</span><br><span class="line">|   ├── uploads        #添加的文件</span><br><span class="line">|   └── js             #javascript源代码</span><br><span class="line">├── _config.yml        #主题配置文件</span><br><span class="line">└── README.md          #用GitHub的都知道</span><br></pre></td></tr></table></figure><h2 id="看板娘或者宠物"><a href="#看板娘或者宠物" class="headerlink" title="看板娘或者宠物"></a>看板娘或者宠物</h2><h3 id="看板娘"><a href="#看板娘" class="headerlink" title="看板娘"></a>看板娘</h3><p><a href="https://github.com/EYHN/hexo-helper-live2d" target="_blank" rel="noopener">点击此处进入该项目地址</a></p><p><a href="https://github.com/xiazeyu/live2d-widget-models" target="_blank" rel="noopener">全部项目</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">live2d-widget-model-chitose</span><br><span class="line">live2d-widget-model-epsilon2_1</span><br><span class="line">live2d-widget-model-gf</span><br><span class="line">live2d-widget-model-haru/01 (use npm install --save live2d-widget-model-haru)</span><br><span class="line">live2d-widget-model-haru/02 (use npm install --save live2d-widget-model-haru)</span><br><span class="line">live2d-widget-model-haruto</span><br><span class="line">live2d-widget-model-hibiki</span><br><span class="line">live2d-widget-model-hijiki</span><br><span class="line">live2d-widget-model-izumi</span><br><span class="line">live2d-widget-model-koharu</span><br><span class="line">live2d-widget-model-miku</span><br><span class="line">live2d-widget-model-ni-j</span><br><span class="line">live2d-widget-model-nico</span><br><span class="line">live2d-widget-model-nietzsche</span><br><span class="line">live2d-widget-model-nipsilon</span><br><span class="line">live2d-widget-model-nito</span><br><span class="line">live2d-widget-model-shizuku</span><br><span class="line">live2d-widget-model-tororo</span><br><span class="line">live2d-widget-model-tsumiki</span><br><span class="line">live2d-widget-model-unitychan</span><br><span class="line">live2d-widget-model-wanko</span><br><span class="line">live2d-widget-model-z16</span><br></pre></td></tr></table></figure><p><a href="https://github.com/EYHN/hexo-helper-live2d" target="_blank" rel="noopener">使用说明</a></p><p>输入如下命令获取 live2d ：（<strong><a href="https://classic.yarnpkg.com/zh-Hans/" target="_blank" rel="noopener">使用Yarn下载</a></strong>）</p><p>打开<code>cmd</code>，输入：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add hexo-helper-live2d</span><br></pre></td></tr></table></figure><p>输入以下命令，下载相应的模型，将 <code>packagename</code> 更换成模型名称即可，更多模型选择<a href="https://github.com/xiazeyu/live2d-widget-models" target="_blank" rel="noopener">请点击此处</a>，各个模型的预览请访问原作者的博客</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add packagename</span><br></pre></td></tr></table></figure><p>打开站点目录下的 _config.yml 文件，添加如下代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">live2d:</span><br><span class="line"><span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">scriptFrom: <span class="built_in">local</span></span><br><span class="line">model: </span><br><span class="line">use: live2d-widget-model-haruto <span class="comment">#模型选择</span></span><br><span class="line">display: </span><br><span class="line">position: right  <span class="comment">#模型位置</span></span><br><span class="line">width: 150       <span class="comment">#模型宽度</span></span><br><span class="line">height: 350      <span class="comment">#模型高度</span></span><br><span class="line">mobile: </span><br><span class="line">show: <span class="literal">false</span>      <span class="comment">#是否在手机端显示</span></span><br></pre></td></tr></table></figure><p>设置好过后我们就拥有了一个看板娘了</p><h3 id="宠物"><a href="#宠物" class="headerlink" title="宠物"></a>宠物</h3><ol><li>在hexo根目录下安装插件:</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -save hexo-helper-live2d</span><br></pre></td></tr></table></figure><ol start="2"><li>安装需要的宠物插件:<a href="https://link.zhihu.com/?target=https%3A//huaji8.top/post/live2d-plugin-2.0/">宠物样式</a> <a href="https://link.zhihu.com/?target=https%3A//github.com/xiazeyu/live2d-widget-models">源码地址</a></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install &#123;packagename&#125;</span><br></pre></td></tr></table></figure><p>其中{packagename} 替换为你要安装的宠物名,如<code>live2d-widget-model-shizuku</code></p><p>具体指令: <code>$ npm install live2d-widget-model-shizuku</code></p><ol start="3"><li>在<strong>站点配置文件</strong>中加上如下代码:</li></ol><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">live2d:</span><br><span class="line">  enable: true   #开启宠物</span><br><span class="line">  scriptFrom: local</span><br><span class="line">  model:</span><br><span class="line">    use: live2d-widget-model-shizuku</span><br><span class="line">  display:</span><br><span class="line">    position: right   #指定宠物显示的位置</span><br><span class="line">    width: 70    #指定宠物显示的宽度</span><br><span class="line">    height: 120   #指定宠物显示的高度</span><br><span class="line">  mobile:</span><br><span class="line">    show: true  #是否在手机上显示</span><br></pre></td></tr></table></figure><h2 id="添加音乐播放器功能"><a href="#添加音乐播放器功能" class="headerlink" title="添加音乐播放器功能"></a>添加音乐播放器功能</h2><h2 id="修改文章底部的那个带-号的标签"><a href="#修改文章底部的那个带-号的标签" class="headerlink" title="修改文章底部的那个带 # 号的标签"></a>修改文章底部的那个带 # 号的标签</h2><p>修改模板<code>\themes\next\layout\_macro\post.swig</code>，搜索 <code>rel=&quot;tag&quot;&gt;#</code>，将 # 换成<code>&lt;i class=&quot;fa fa-tag&quot;&gt;&lt;/i&gt;</code></p><h2 id="主页文章添加阴影效果"><a href="#主页文章添加阴影效果" class="headerlink" title="主页文章添加阴影效果"></a>主页文章添加阴影效果</h2><p>打开<code>\themes\next\source\css\_custom\custom.styl</code>, 向里面加入：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 主页文章添加阴影效果</span></span><br><span class="line"> <span class="selector-class">.post</span> &#123;</span><br><span class="line">   <span class="attribute">margin-top</span>: <span class="number">60px</span>;</span><br><span class="line">   <span class="attribute">margin-bottom</span>: <span class="number">60px</span>;</span><br><span class="line">   <span class="attribute">padding</span>: <span class="number">25px</span>;</span><br><span class="line">   -webkit-<span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> rgba(<span class="number">202</span>, <span class="number">203</span>, <span class="number">203</span>, .<span class="number">5</span>);</span><br><span class="line">   -moz-<span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> rgba(<span class="number">202</span>, <span class="number">203</span>, <span class="number">204</span>, .<span class="number">5</span>);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h2 id="设置网站的图标-Favicon"><a href="#设置网站的图标-Favicon" class="headerlink" title="设置网站的图标 Favicon"></a>设置网站的图标 Favicon</h2><p>网上看到的设置方法是说把 favicon.ico 放到站点目录的 source 目录下就可以了，但是我试了好多遍，并不行， 后来发现一种方法不错。</p><p>把你的图片（png 或 jpg 格式，不是 favicon.ico）放在themes\next\source\images里，然后打开 主题配置文件 找到favicon，将small、medium、apple_touch_icon三个字段的值都设置成\images\图片名.jpg就可以了，其他字段都注释掉。</p><p>下面这是我自己的图标样式：</p><p><img src="https://img-blog.csdn.net/20180831165247137?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvbno1MTMw/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p><p><strong>注意：</strong>要想透明，可以用 PS 做个背景透明化，<strong><a href="https://wenda.so.com/q/1462901765722849" target="_blank" rel="noopener">找到一份教程</a></strong>，亲测可用，这样图标就能透明化了。</p><h2 id="为NexT主题添加文章阅读量统计功能"><a href="#为NexT主题添加文章阅读量统计功能" class="headerlink" title="为NexT主题添加文章阅读量统计功能"></a>为NexT主题添加文章阅读量统计功能</h2><ul><li>在根目录下安装 hexo-wordcount, 运行：</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add hexo-wordcount</span><br></pre></td></tr></table></figure><ul><li>然后在<strong>主题的配置文件</strong>中，配置如下：</li></ul><p><img src="C:%5CUsers%5Ccaihanyuan%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200624201206704.png" alt="image-20200624201206704"></p><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><h3 id="静态background设置"><a href="#静态background设置" class="headerlink" title="静态background设置"></a>静态background设置</h3><p>打开<code>博客根目录/themes/next/source/css/_custom/custom.styl</code>文件，编辑如下：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Custom styles.</span></span><br><span class="line"><span class="selector-tag">body</span> &#123; </span><br><span class="line">    <span class="attribute">background-image</span>: url(/images/background.png);</span><br><span class="line">    <span class="attribute">background-attachment</span>: fixed; <span class="comment">// 不随屏幕滚动而滚动</span></span><br><span class="line">    <span class="attribute">background-repeat</span>: repeat; <span class="comment">// 如果背景图不够屏幕大小则重复铺，改为no-repeat则表示不重复铺</span></span><br><span class="line">    <span class="attribute">background-size</span>: contain; <span class="comment">// 等比例铺满屏幕</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>将背景图命名为<strong>background.png</strong>并放入<code>G:\Hexo\themes\next\source\images</code>下</p><h3 id="动态背景"><a href="#动态背景" class="headerlink" title="动态背景"></a>动态背景</h3><p>(如果 next 主题在 5.1.1 以上的话，直接在主题配置文件中找到 canvas_nest: false，把它改为 canvas_nest: true 就行了)</p><p>打开<code>博客根目录/themes/next/layout/_layout.swig</code>文件，在之前添加代码如下：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if theme<span class="selector-class">.canvas_nest</span> %&#125;</span><br><span class="line">&lt;script type="text/javascript"</span><br><span class="line">color="0,0,255" opacity='0.7' zIndex="-2" count="99" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"&gt;&lt;/script&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><p>属性说明：</p><ul><li>color ：线条颜色, 默认: ‘0,0,0’；三个数字分别为(R,G,B)</li><li>opacity: 线条透明度（0~1）, 默认: 0.5</li><li>count: 线条的总数量, 默认: 150</li><li>zIndex: 背景的z-index属性，css属性用于控制所在层的位置, 默认: -1</li></ul><p>打开<code>博客根目录/themes/next/_config.yml</code>，找到字段<strong>canvas_nest</strong>，将其置为<strong>true</strong>【如果没有找到该字段，请自行添加】</p><p><strong>参考：</strong></p><blockquote><p><a href="https://blog.csdn.net/weixin_41287260/article/details/103050877" target="_blank" rel="noopener">hexo+yilia添加背景特效</a></p><p><a href="https://blog.csdn.net/qq_36759224/article/details/85420403#font_colorFF000008_font_238" target="_blank" rel="noopener">Hexo 博客优化之博客美化系列（持续更新）</a></p></blockquote><h2 id="搜索服务"><a href="#搜索服务" class="headerlink" title="搜索服务"></a>搜索服务</h2><ul><li>NexT 支持集成 <a href="https://swiftype.com/" target="_blank" rel="noopener">Swiftype</a>、 <a href="http://tinysou.com/" target="_blank" rel="noopener">微搜索</a>、Local Search 和 Algolia。</li></ul><h3 id="Local-Search-由-flashlab-贡献"><a href="#Local-Search-由-flashlab-贡献" class="headerlink" title="Local Search 由 flashlab 贡献"></a>Local Search 由 <a href="https://github.com/iissnan/hexo-theme-next/pull/694" target="_blank" rel="noopener">flashlab</a> 贡献</h3><p>添加百度/谷歌/本地 自定义站点内容搜索</p><ol><li><p>安装 <code>hexo-generator-searchdb</code>，在站点的根目录下执行以下命令：</p><p>（我用第二个成功了，<a href="https://blog.csdn.net/lijing742180/article/details/87970909" target="_blank" rel="noopener">Hexo Next 主题中添加本地搜索功能</a>）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-generator-searchdb --save</span><br><span class="line">$ npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure></li></ol><ol start="2"><li><p>编辑 <strong>站点配置文件</strong>，<strong>新增</strong>以下内容到任意位置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">search:</span><br><span class="line">  path: search.xml</span><br><span class="line">  field: post</span><br><span class="line">  format: html</span><br><span class="line">  <span class="built_in">limit</span>: 10000</span><br></pre></td></tr></table></figure></li></ol><ul><li><p><code>path</code>：索引文件的路径，相对于站点根目录</p></li><li><p><code>field</code>：搜索范围，默认是 post，还可以选择 page、all，设置成 all 表示搜索所有页面</p></li><li><p><code>imit</code>：限制搜索的条目数</p></li></ul><ol start="3"><li><p>编辑 <strong>主题配置文件</strong>，启用本地搜索功能：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Local search</span></span><br><span class="line">local_search:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span></span><br></pre></td></tr></table></figure></li></ol><ul><li><p>确保 enable 设成 <code>true</code>。</p></li><li><p><code>top_n_per_article</code> 字段表示在每篇文章中显示的搜索结果数量，设成 <strong>-1</strong> 会显示每篇文章的所有搜索结果数量。</p></li><li><p>然后，重新部署网站即可愉快的使用本地搜索功能了。</p></li></ul><h2 id="给你的文章添加评论"><a href="#给你的文章添加评论" class="headerlink" title="给你的文章添加评论"></a>给你的文章添加评论</h2><p>Hexo 的 Next 主题继承了多种评论系统，我在这里介绍两种个人觉得不错的评论系统：<code>Valine</code> 和 <code>gitment</code></p><p>如需取消某个 页面/文章 的评论，在 md 文件的 <a href="https://hexo.io/docs/front-matter.html" target="_blank" rel="noopener">front-matter </a>中增加 <code>comments: false</code></p><h3 id="Valine-评论系统"><a href="#Valine-评论系统" class="headerlink" title="Valine 评论系统"></a>Valine 评论系统</h3><p>使用 Valine 评论系统，这款系统不需要登录便可以登录，没有后端，Next 主题最新已经支持安装</p><ul><li>基于 Leancloud 的系统</li><li>支持 MarkDown 语法</li><li>无后端实现，快速高效</li></ul><h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><h5 id="注册-LeanCloud"><a href="#注册-LeanCloud" class="headerlink" title="注册 LeanCloud"></a>注册 LeanCloud</h5><p>因为 Valine 是基于 LeanCloud 系统的，所以先在 LeanCloud 中注册账号</p><p><a href="https://leancloud.cn/dashboard/login.html#/signin" target="_blank" rel="noopener">LeanCloud官网登录入口</a></p><p>注册登陆后，访问控制台，创建应用，选择开发版，创建好之后就生成了 <code>App ID</code> 和 <code>App Key</code></p><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200624144941.png" alt=""></p><h5 id="设置-Next-主题"><a href="#设置-Next-主题" class="headerlink" title="设置 Next 主题"></a>设置 Next 主题</h5><p>在<strong>主题的配置文件</strong>中，修改关于 valine 的配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Valine.</span></span><br><span class="line"><span class="comment"># You can get your appid and appkey from https://leancloud.cn</span></span><br><span class="line"><span class="comment"># more info please open https://valine.js.org</span></span><br><span class="line">valine:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span> <span class="comment"># 是否开启</span></span><br><span class="line">  appid: Id1Ow31fSkW4XBVcrA0zSwBs-gzGzoHsz  <span class="comment"># 上一步获取的 App ID</span></span><br><span class="line">  appkey: v54TjNNeEOrwuTgpdmEcJk9y  <span class="comment"># 上一步获取的 App Key</span></span><br><span class="line">  notify: <span class="literal">false</span> <span class="comment"># 新留言是否需要通知 https://github.com/xCss/Valine/wiki</span></span><br><span class="line">  verify: <span class="literal">false</span> <span class="comment"># 是否需要验证，验证比较反人类建议false关闭</span></span><br><span class="line">  placeholder: 请在此输入您的留言 <span class="comment"># 默认留言框内的文字</span></span><br><span class="line">  avatar: mm <span class="comment"># 默认头像</span></span><br><span class="line">  guest_info: nick,mail <span class="comment"># 默认留言框的头部需要访问者输入的信息</span></span><br><span class="line">  pageSize: 10 <span class="comment"># pagination size #默认单页的留言条数</span></span><br></pre></td></tr></table></figure><p>重新部署</p><h4 id="评论管理"><a href="#评论管理" class="headerlink" title="评论管理"></a>评论管理</h4><p>如果想要管理评论，进入 leancloud 官网，找到 <code>控制台</code>-&gt;<code>存储</code>-&gt;<code>commet</code> 中进行管理</p><h3 id="Gitment-评论系统"><a href="#Gitment-评论系统" class="headerlink" title="Gitment 评论系统"></a>Gitment 评论系统</h3><p>gitment，它是基于 github 开发的，是依靠于 <code>GitHub Issues</code> 的评论系统，Next 主题最新已经支持安装</p><p><strong>前提</strong>：更新 Next 主题（5.1.2 主题）</p><h4 id="注册OAuth-application"><a href="#注册OAuth-application" class="headerlink" title="注册OAuth application"></a>注册OAuth application</h4><ol><li><p>在 github 中进行注册，进入 <a href="https://github.com/settings/profile" target="_blank" rel="noopener">https://github.com/settings/profile</a></p></li><li><p>点击左侧 Developer settings</p></li><li><p>Register a new application</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Application name:<span class="comment">#应用名称</span></span><br><span class="line">Homepage URL：  <span class="comment">#网站URL(填自己的博客主页地址)</span></span><br><span class="line">Application description<span class="comment">#描述</span></span><br><span class="line">Authorization callback URL:<span class="comment">#网站URL(填自己的博客主页地址)</span></span><br></pre></td></tr></table></figure></li><li><p>注册完成之后，会得到：<code>Client ID</code> 和 <code>Client Secret</code></p></li></ol><h4 id="新建存放博客评论仓库"><a href="#新建存放博客评论仓库" class="headerlink" title="新建存放博客评论仓库"></a>新建存放博客评论仓库</h4><p>可以在 github 中建一个项目，专门用来存储你的博客评论</p><h4 id="配置-next-主题文件"><a href="#配置-next-主题文件" class="headerlink" title="配置 next 主题文件"></a>配置 next 主题文件</h4><p>编辑主题配置文件：themes\next\ _config.yml，找到有关 gitment 的设置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">gitment:   </span><br><span class="line">  <span class="built_in">enable</span>:  <span class="literal">true</span></span><br><span class="line">  mint: <span class="literal">true</span>  </span><br><span class="line">  count: <span class="literal">true</span> </span><br><span class="line">  lazy: <span class="literal">false</span>  <span class="comment">#评论懒加载，如果true，则默认不展示评论，点击按钮查看评论</span></span><br><span class="line">  cleanly: <span class="literal">false</span>  </span><br><span class="line">  language: </span><br><span class="line">  github_user: <span class="comment">#github名称</span></span><br><span class="line">  github_repo: BlogComments<span class="comment">#上一步新建存放评论的仓库名</span></span><br><span class="line">  client_id: b8bad0exxxx<span class="comment">#上面注册 OAuth Application 的 Client ID</span></span><br><span class="line">  client_secret: bcee560xxxxxx<span class="comment">#上面注册 OAuth Application 申请的 Client Secret</span></span><br><span class="line">  proxy_gateway: </span><br><span class="line">  redirect_protocol: <span class="comment"># Protocol of redirect_uri with force_redirect_protocol when mint</span></span><br></pre></td></tr></table></figure><h4 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h4><p>在设置完成之后，hexo 重新部署</p><p>每篇文章都要点击初始化评论按钮</p><h4 id="评论"><a href="#评论" class="headerlink" title="评论"></a>评论</h4><p>评论显示在新建存放评论的仓库中的 <code>issue</code> 中</p><h3 id="关闭某个页面的评论"><a href="#关闭某个页面的评论" class="headerlink" title="关闭某个页面的评论"></a>关闭某个页面的评论</h3><p>在页面的 <code>Front-matter</code> 中添加 <code>comments</code> 字段，设为 <code>false</code></p><p>比如标签页不想要评论，则在标签页面中做以下设置</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">title: 标签</span><br><span class="line">date: 2015-12-16 17:05:24</span><br><span class="line">type: &quot;tags&quot;</span><br><span class="line">comments: false</span><br><span class="line">---</span><br></pre></td></tr></table></figure><h2 id="数据统计与分析"><a href="#数据统计与分析" class="headerlink" title="数据统计与分析"></a>数据统计与分析</h2><h3 id="百度统计"><a href="#百度统计" class="headerlink" title="百度统计"></a>百度统计</h3><ol><li><p>登录 <a href="http://tongji.baidu.com/" target="_blank" rel="noopener">百度统计</a>，定位到站点的代码获取页面</p></li><li><p>复制 <code>hm.js?</code> 后面那串统计脚本 id，如下图所示：<br><img src="http://theme-next.iissnan.com/uploads/five-minutes-setup/analytics-baidu-id.png" alt="img"></p></li><li><p>编辑 <strong>主题配置文件</strong></p><p>修改字段 <code>baidu_analytics</code>，值设置成你的百度统计脚本 id。</p><p><img src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTgwMTMwMjE1MTA1MDQ2" alt="这里写图片描述"></p></li></ol><h3 id="阅读次数统计（LeanCloud-由-Doublemine-贡献"><a href="#阅读次数统计（LeanCloud-由-Doublemine-贡献" class="headerlink" title="阅读次数统计（LeanCloud) 由 Doublemine 贡献"></a>阅读次数统计（LeanCloud) 由 <a href="https://github.com/iissnan/hexo-theme-next/pull/439" target="_blank" rel="noopener">Doublemine</a> 贡献</h3><p>请查看 <a href="https://notes.wanghao.work/2015-10-21-为NexT主题添加文章阅读量统计功能.html#配置LeanCloud" target="_blank" rel="noopener">为NexT主题添加文章阅读量统计功能</a></p><h2 id="隐藏网页底部-powered-By-Hexo-强力驱动"><a href="#隐藏网页底部-powered-By-Hexo-强力驱动" class="headerlink" title="隐藏网页底部 powered By Hexo / 强力驱动"></a>隐藏网页底部 powered By Hexo / 强力驱动</h2><p>打开<code>\themes\next\layout\_partials\footer.swig</code>, 使用”” 隐藏之间的代码即可，或者直接删除。位置如图 ：</p><p><img src="https://img-blog.csdn.net/20180831165205593?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvbno1MTMw/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"></p><h2 id="七牛云搭建博客Hexo图床"><a href="#七牛云搭建博客Hexo图床" class="headerlink" title="七牛云搭建博客Hexo图床"></a>七牛云搭建博客Hexo图床</h2><blockquote><p><a href="https://www.jianshu.com/p/316dee2ba185" target="_blank" rel="noopener">原文连接</a></p></blockquote><h3 id="注册七牛云账号并实名认证"><a href="#注册七牛云账号并实名认证" class="headerlink" title="注册七牛云账号并实名认证"></a>注册七牛云账号并实名认证</h3><p>七牛云的实名认证的用户，会有10G的空间，这对于一个个人图床是完全足够的了。</p><ul><li><p><a href="https://portal.qiniu.com/create" target="_blank" rel="noopener">点击该链接前往注册</a></p><p><img src="https:////upload-images.jianshu.io/upload_images/4553977-7b98ee1bce4b8a31.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/948/format/webp" alt="img"></p><p>注册画面</p></li></ul><h3 id="实名认证成功以后，创建属于你的图床空间"><a href="#实名认证成功以后，创建属于你的图床空间" class="headerlink" title="实名认证成功以后，创建属于你的图床空间"></a>实名认证成功以后，创建属于你的图床空间</h3><ol><li><p>进入七牛云<a href="https://www.qiniu.com/" target="_blank" rel="noopener">首页</a>，点击进入<strong>控制台</strong></p><p><img src="https:////upload-images.jianshu.io/upload_images/4553977-280de1f362592afb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p><p>image.png</p></li></ol><ol start="2"><li><p>创建资源，添加<strong>“对象存储”</strong></p><p><img src="https:////upload-images.jianshu.io/upload_images/4553977-accf3181287385f9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p></li></ol><ol start="3"><li>依次设置【存储空间名称】，【存储区域】，【访问控制】，创建成功以后就会在你的“存储空间列表”中看到你新创建的存储空间了。</li></ol><ul><li><p>【存储空间名称】：按照你的个人所好，例如我使用的是【pictures】</p></li><li><p>【存储区域】：建议选择一个离你较近的CDN</p></li><li><p>【访问控制】：</p><p>这里必须选择【<strong>公开空间</strong>】</p><p>，因为设置为私有空间，图片的外链是无法访问的。</p><p><img src="https:////upload-images.jianshu.io/upload_images/4553977-4e041dc03ac706ba.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p></li></ul><ol><li><p>进入新创建的存储空间，在【内容管理】中上传你的图片文件，这样就可以使用这个图片的外链了。</p><p><img src="https:////upload-images.jianshu.io/upload_images/4553977-82dfa630c30b84c9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p></li><li><p>上传图片文件以后，复制外链连接就可以利用这个链接访问这个图片了。</p><p><a href="https://portal.qiniu.com/kodo/bucket/resource?bucketName=nepnopictures" target="_blank" rel="noopener">访问连接</a></p><p><img src="https:////upload-images.jianshu.io/upload_images/4553977-0cbe1a85f47e6f4a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p></li></ol><h3 id="使用工具更加方便地上传图片资源"><a href="#使用工具更加方便地上传图片资源" class="headerlink" title="使用工具更加方便地上传图片资源"></a>使用工具更加方便地上传图片资源</h3><ul><li><p>AK：ttb9SC5YBkOeDtn80su6MatroJEaBuq5Fx4NVxCp</p></li><li><p>SK：3T5lunNxY_531F02Mv96RlC6Lqwif6ochjwgmo1k</p></li><li><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200624145259.png" alt=""></p></li><li><p>名字：nepnopictures</p></li><li><p>域名：<a href="http://qcev8hlsw.bkt.clouddn.com/" target="_blank" rel="noopener">http://qcev8hlsw.bkt.clouddn.com/</a></p></li><li><p>区域：z2 (华南)</p></li></ul><p><strong><a href="https://github.com/Molunerfinn/PicGo" target="_blank" rel="noopener">PicGo下载</a></strong></p><p><img src="http://qcev8hlsw.bkt.clouddn.com//771352263112788346.png" alt="使用PicGo上传的图片"></p><blockquote><p><strong><a href="https://picgo.github.io/PicGo-Doc/zh/guide/config.html#基本操作预览" target="_blank" rel="noopener">PicGO用户手册</a></strong></p></blockquote><h2 id="BUG"><a href="#BUG" class="headerlink" title="BUG"></a>BUG</h2><h3 id="hexo中next主题下创建标签问题-Cannot-GET-tags-20"><a href="#hexo中next主题下创建标签问题-Cannot-GET-tags-20" class="headerlink" title="hexo中next主题下创建标签问题 Cannot GET /tags/%20/"></a>hexo中next主题下创建标签问题 Cannot GET /tags/%20/</h3><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200624173704.png" alt=""></p><p>但是点击tags界面之后只有一行字Cannot GET /tags/%20/<br> 经过一通搜索，知道%20 是空格的意思，把配置文件里 ||之前所有的空格删掉即可。</p><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200624173820.png" alt=""></p><p> 这个bug奇怪的点在于这个空格是next主题文件配置里面自带的，而且我上一次配置的时候没有出现这样的问题。</p><p>知乎问题链接：<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fwww.zhihu.com%2Fquestion%2F353097489" target="_blank" rel="noopener">https://www.zhihu.com/question/353097489</a></p><h2 id="参考的文章"><a href="#参考的文章" class="headerlink" title="参考的文章"></a>参考的文章</h2><blockquote><p><a href="https://zhuanlan.zhihu.com/p/26625249" target="_blank" rel="noopener">参考文章1：Hexo个性化设置</a></p></blockquote><blockquote><p><a href="https://blog.csdn.net/Wonz5130/article/details/82258969" target="_blank" rel="noopener">参考文章2：Hexo 个性化主题配置</a></p></blockquote><blockquote><p><a href="https://segmentfault.com/a/1190000009544924" target="_blank" rel="noopener">参考文章3：hexo 的 next 主题个性化配置教程</a></p></blockquote><blockquote><p><a href="https://www.jianshu.com/p/3a05351a37dc" target="_blank" rel="noopener">参考文章4：Hexo 的 Next 主题详细配置</a></p></blockquote><blockquote><p><a href="https://blog.csdn.net/Wonz5130/article/details/84666519" target="_blank" rel="noopener">参考文章5：解决 Hexo 搭建博客显示不出分类、标签问题</a></p></blockquote><blockquote><p><a href="https://zhuanlan.zhihu.com/p/60424755" target="_blank" rel="noopener">参考文章6：hexo的next主题个性化配置</a></p></blockquote><blockquote><p><strong><a href="https://www.jianshu.com/p/efbeddc5eb19" target="_blank" rel="noopener">Hexo+Next个人博客主题优化</a></strong></p></blockquote><blockquote><p><a href="https://flunggg.cn/archives/6bbc4ccb.html" target="_blank" rel="noopener">别人家的博客</a></p></blockquote><h1 id="NexT-V7"><a href="#NexT-V7" class="headerlink" title="NexT V7"></a>NexT V7</h1><p><a href="https://tding.top/archives/42c38b10.html" target="_blank" rel="noopener">Hexo-NexT (v7.0+) 主题配置</a></p><p> <code>git clone https://github.com/theme-next/hexo-theme-next themes/next</code></p><ol><li><p>目前使用<a href="https://zhuanlan.zhihu.com/p/106060640" target="_blank" rel="noopener">这篇文章</a>来设置背景，未成功</p></li><li><p>文件管理:</p><ul><li><p><a href="https://tding.top/archives/2bd6d82.html" target="_blank" rel="noopener">Hexo-NexT 版本更新记录</a></p></li><li><p><a href="https://blog.bill.moe/hexo-theme-next-config-optimization/" target="_blank" rel="noopener">Hexo-NexT主题自定义配置高阶教程</a></p></li></ul></li></ol><h1 id="npm-node升级到最新版本"><a href="#npm-node升级到最新版本" class="headerlink" title="npm node升级到最新版本"></a>npm node升级到最新版本</h1><h3 id="npm"><a href="#npm" class="headerlink" title="npm"></a>npm</h3><p>首先查看其版本</p><p>node -v</p><p>npm -v</p><p>然后更新至最新版本</p><h3 id="更新npm-："><a href="#更新npm-：" class="headerlink" title="更新npm ："></a>更新npm ：</h3><p>npm install -g npm</p><h3 id="更新node版本："><a href="#更新node版本：" class="headerlink" title="更新node版本："></a>更新node版本：</h3><p>先清除npm缓存：npm cache clean -f</p><p>然后安装n模块：npm install -g n</p><p>升级node.js到最新稳定版：n stable</p>]]></content>
      
      
      <categories>
          
          <category> 网页类 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git安装教程</title>
      <link href="/2020/06/23/Git%E4%BD%BF%E7%94%A8/"/>
      <url>/2020/06/23/Git%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="Git的安装教程参考"><a href="#Git的安装教程参考" class="headerlink" title="Git的安装教程参考"></a>Git的安装教程参考</h2><p><a href="https://blog.csdn.net/u013295518/article/details/78746007" target="_blank" rel="noopener">Git安装配置教程</a></p><p><a href="https://blog.csdn.net/weixin_44950987/article/details/102619708" target="_blank" rel="noopener">Git的安装与使用教程（超详细！！！）</a></p><a id="more"></a>]]></content>
      
      
      <categories>
          
          <category> 网页类 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>test1</title>
      <link href="/2020/06/23/test1/"/>
      <url>/2020/06/23/test1/</url>
      
        <content type="html"><![CDATA[<h1 id="测试测试"><a href="#测试测试" class="headerlink" title="测试测试"></a>测试测试</h1><a id="more"></a>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 其他 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdown使用</title>
      <link href="/2020/06/23/markdown%E4%BD%BF%E7%94%A8/"/>
      <url>/2020/06/23/markdown%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<a id="more"></a><p><em>斜体文本</em><br><em>斜体文本</em><br><strong>粗体文本</strong><br><strong>粗体文本</strong><br><strong><em>粗斜体文本</em></strong><br><strong><em>粗斜体文本</em></strong></p><p>RUNOOB.COM<br>GOOGLE.COM<br><del>BAIDU.COM</del></p><p><u>带下划线文本</u></p><p>[^要注明的文本]</p><p>创建脚注格式类似这样 [^RUNOOB]。</p><p>[^RUNOOB]: 菜鸟教程 – 学的不仅是技术，更是梦想！！！</p><h1 id="Markdown-列表"><a href="#Markdown-列表" class="headerlink" title="Markdown 列表"></a>Markdown 列表</h1><ul><li>第一项</li><li>第二项</li><li>第三项</li></ul><ul><li>第一项</li><li>第二项</li><li>第三项</li></ul><ul><li>第一项</li><li>第二项</li><li>第三项</li></ul><ol><li><p>第一项</p></li><li><p>第二项</p></li><li><p>第三项</p></li><li><p>第一项</p><ul><li>第一项的第一个元素<ul><li>第一个元素的下一个元素<ul><li>继续……</li></ul></li></ul></li></ul></li><li><p>第二项</p><ul><li>第二项的第一个元素</li></ul></li></ol><h1 id="Markdown-区块"><a href="#Markdown-区块" class="headerlink" title="Markdown 区块"></a>Markdown 区块</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; 区块引用</span><br><span class="line">&gt; 菜鸟教程</span><br><span class="line">&gt; 学的不仅是技术更是梦想</span><br></pre></td></tr></table></figure><blockquote><p>区块引用<br>菜鸟教程<br>学的不仅是技术更是梦想</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; 最外层</span><br><span class="line">&gt; &gt; 第一层嵌套</span><br><span class="line">&gt; &gt; &gt; 第二层嵌套</span><br></pre></td></tr></table></figure><blockquote><p>最外层</p><blockquote><p>第一层嵌套</p><blockquote><p>第二层嵌套</p></blockquote></blockquote></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; 区块中使用列表</span><br><span class="line">&gt; 1. 第一项</span><br><span class="line">&gt; 2. 第二项</span><br><span class="line">&gt; + 第一项</span><br><span class="line">&gt; + 第二项</span><br><span class="line">&gt; + 第三项</span><br></pre></td></tr></table></figure><blockquote><p>区块中使用列表</p><ol><li>第一项</li><li>第二项</li></ol><ul><li>第一项</li><li>第二项</li><li>第三项</li></ul></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* 第一项</span><br><span class="line">    &gt; 菜鸟教程</span><br><span class="line">    &gt; 学的不仅是技术更是梦想</span><br><span class="line">* 第二项</span><br></pre></td></tr></table></figure><ul><li><p>第一项</p><blockquote><p>菜鸟教程<br>学的不仅是技术更是梦想</p></blockquote></li><li><p>第二项</p></li></ul><h1 id="Markdown-代码"><a href="#Markdown-代码" class="headerlink" title="Markdown 代码"></a>Markdown 代码</h1><p><code>printf()</code> 函数</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">'RUNOOB'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="Markdown-链接"><a href="#Markdown-链接" class="headerlink" title="Markdown 链接"></a>Markdown 链接</h1><p><a href="链接地址">链接名称</a></p><p>或者</p><p>&lt;链接地址&gt;</p><p>这是一个链接 <a href="https://www.runoob.com" target="_blank" rel="noopener">菜鸟教程</a></p><p>或者</p><p><a href="https://www.runoob.com" target="_blank" rel="noopener">https://www.runoob.com</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">这个链接用 1 作为网址变量 [Google][1]</span><br><span class="line">这个链接用 runoob 作为网址变量 [Runoob][runoob]</span><br><span class="line">然后在文档的结尾为变量赋值（网址）</span><br><span class="line"></span><br><span class="line">  [1]: http:&#x2F;&#x2F;www.google.com&#x2F;</span><br><span class="line">  [runoob]: http:&#x2F;&#x2F;www.runoob.com&#x2F;</span><br></pre></td></tr></table></figure><p>这个链接用 1 作为网址变量 <a href="http://www.google.com/" target="_blank" rel="noopener">Google</a><br>这个链接用 runoob 作为网址变量 <a href="http://www.runoob.com/" target="_blank" rel="noopener">Runoob</a><br>然后在文档的结尾为变量赋值（网址）</p><h1 id="Markdown-图片"><a href="#Markdown-图片" class="headerlink" title="Markdown 图片"></a>Markdown 图片</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">![alt 属性文本](图片地址)</span><br><span class="line"></span><br><span class="line">![alt 属性文本](图片地址 &quot;可选标题&quot;)</span><br></pre></td></tr></table></figure><ul><li>开头一个感叹号 !</li><li>接着一个方括号，里面放上图片的替代文字</li><li>接着一个普通括号，里面放上图片的网址，最后还可以用引号包住并加上选择性的 ‘title’ 属性的文字。</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">![RUNOOB 图标](http:&#x2F;&#x2F;static.runoob.com&#x2F;images&#x2F;runoob-logo.png)</span><br><span class="line"></span><br><span class="line">![RUNOOB 图标](http:&#x2F;&#x2F;static.runoob.com&#x2F;images&#x2F;runoob-logo.png &quot;RUNOOB&quot;)</span><br></pre></td></tr></table></figure><p><img src="http://static.runoob.com/images/runoob-logo.png" alt="RUNOOB 图标"></p><p><img src="http://static.runoob.com/images/runoob-logo.png" alt="RUNOOB 图标" title="RUNOOB"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">这个链接用 1 作为网址变量 [RUNOOB][1].</span><br><span class="line">然后在文档的结尾为变量赋值（网址）</span><br><span class="line"></span><br><span class="line">[1]: http:&#x2F;&#x2F;static.runoob.com&#x2F;images&#x2F;runoob-logo.png</span><br></pre></td></tr></table></figure><p>这个链接用 1 作为网址变量 <a href="http://www.google.com/" target="_blank" rel="noopener">RUNOOB</a>.<br>然后在文档的结尾为变量赋值（网址）</p><h3 id="Markdown-还没有办法指定图片的高度与宽度，如果你需要的话，你可以使用普通的-标签。"><a href="#Markdown-还没有办法指定图片的高度与宽度，如果你需要的话，你可以使用普通的-标签。" class="headerlink" title="Markdown 还没有办法指定图片的高度与宽度，如果你需要的话，你可以使用普通的  标签。"></a>Markdown 还没有办法指定图片的高度与宽度，如果你需要的话，你可以使用普通的 <img> 标签。</h3><img src="http://static.runoob.com/images/runoob-logo.png" width="50%"><h1 id="Markdown-表格"><a href="#Markdown-表格" class="headerlink" title="Markdown 表格"></a>Markdown 表格</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">|  表头   | 表头  |</span><br><span class="line">|  ----  | ----  |</span><br><span class="line">| 单元格  | 单元格 |</span><br><span class="line">| 单元格  | 单元格 |</span><br></pre></td></tr></table></figure><table><thead><tr><th>表头</th><th>表头</th></tr></thead><tbody><tr><td>单元格</td><td>单元格</td></tr><tr><td>单元格</td><td>单元格</td></tr></tbody></table><ul><li><strong>-:</strong> 设置内容和标题栏居右对齐。</li><li><strong>:-</strong> 设置内容和标题栏居左对齐。</li><li><strong>:-:</strong> 设置内容和标题栏居中对齐。</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">| 左对齐 | 右对齐 | 居中对齐 |</span><br><span class="line">| :-----| ----: | :----: |</span><br><span class="line">| 单元格 | 单元格 | 单元格 |</span><br><span class="line">| 单元格 | 单元格 | 单元格 |</span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">左对齐</th><th align="right">右对齐</th><th align="center">居中对齐</th></tr></thead><tbody><tr><td align="left">单元格</td><td align="right">单元格</td><td align="center">单元格</td></tr><tr><td align="left">单元格</td><td align="right">单元格</td><td align="center">单元格</td></tr></tbody></table><h1 id="Markdown-高级技巧"><a href="#Markdown-高级技巧" class="headerlink" title="Markdown 高级技巧"></a>Markdown 高级技巧</h1><h3 id="支持的-HTML-元素"><a href="#支持的-HTML-元素" class="headerlink" title="支持的 HTML 元素"></a>支持的 HTML 元素</h3><p>不在 Markdown 涵盖范围之内的标签，都可以直接在文档里面用 HTML 撰写。</p><p>目前支持的 HTML 元素有：<code>&lt;kbd&gt; &lt;b&gt; &lt;i&gt; &lt;em&gt; &lt;sup&gt; &lt;sub&gt; &lt;br&gt;</code>等 ，如：</p><p>使用 <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>Del</kbd> 重启电脑</p><h3 id="转义"><a href="#转义" class="headerlink" title="转义"></a>转义</h3><p>Markdown 使用了很多特殊符号来表示特定的意义，如果需要显示特定的符号则需要使用转义字符，Markdown 使用反斜杠转义特殊字符：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">**文本加粗** </span><br><span class="line">\*\* 正常显示星号 \*\*</span><br></pre></td></tr></table></figure><p><strong>文本加粗</strong><br>** 正常显示星号 **</p><p><strong>Markdown 支持以下这些符号前面加上反斜杠来帮助插入普通的符号：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">\   反斜线</span><br><span class="line">&#96;   反引号</span><br><span class="line">*   星号</span><br><span class="line">_   下划线</span><br><span class="line">&#123;&#125;  花括号</span><br><span class="line">[]  方括号</span><br><span class="line">()  小括号</span><br><span class="line">#   井字号</span><br><span class="line">+   加号</span><br><span class="line">-   减号</span><br><span class="line">.   英文句点</span><br><span class="line">!   感叹号</span><br></pre></td></tr></table></figure><h3 id="公式"><a href="#公式" class="headerlink" title="公式"></a>公式</h3><p>当你需要在编辑器中插入数学公式时，可以使用两个美元符 $$ 包裹 TeX 或 LaTeX 格式的数学公式来实现。提交后，问答和文章页会根据需要加载 Mathjax 对数学公式进行渲染。如：<br>$$<br>\mathbf{V}_1 \times \mathbf{V}_2 =  \begin{vmatrix}<br>\mathbf{i} &amp; \mathbf{j} &amp; \mathbf{k} \<br>\frac{\partial X}{\partial u} &amp;  \frac{\partial Y}{\partial u} &amp; 0 \<br>\frac{\partial X}{\partial v} &amp;  \frac{\partial Y}{\partial v} &amp; 0 \<br>\end{vmatrix}<br>${$tep1}{\style{visibility:hidden}{(x+1)(x+1)}}<br>$$</p><h1 id="typora-画流程图、时序图-顺序图-、甘特图"><a href="#typora-画流程图、时序图-顺序图-、甘特图" class="headerlink" title="typora 画流程图、时序图(顺序图)、甘特图"></a>typora 画流程图、时序图(顺序图)、甘特图</h1><h3 id="横向流程图源码格式："><a href="#横向流程图源码格式：" class="headerlink" title="横向流程图源码格式："></a>横向流程图源码格式：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">A[方形] --&gt;B(圆角)</span><br><span class="line">    B --&gt; C&#123;条件a&#125;</span><br><span class="line">    C --&gt;|a&#x3D;1| D[结果1]</span><br><span class="line">    C --&gt;|a&#x3D;2| E[结果2]</span><br><span class="line">    F[横向流程图]</span><br></pre></td></tr></table></figure><h3 id="竖向流程图源码格式"><a href="#竖向流程图源码格式" class="headerlink" title="竖向流程图源码格式"></a>竖向流程图源码格式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">A[方形] --&gt; B(圆角)</span><br><span class="line">    B --&gt; C&#123;条件a&#125;</span><br><span class="line">    C --&gt; |a&#x3D;1| D[结果1]</span><br><span class="line">    C --&gt; |a&#x3D;2| E[结果2]</span><br><span class="line">    F[竖向流程图]</span><br></pre></td></tr></table></figure><h3 id="标准流程图源码格式"><a href="#标准流程图源码格式" class="headerlink" title="标准流程图源码格式"></a>标准流程图源码格式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">st&#x3D;&gt;start: 开始框</span><br><span class="line">op&#x3D;&gt;operation: 处理框</span><br><span class="line">cond&#x3D;&gt;condition: 判断框(是或否?)</span><br><span class="line">sub1&#x3D;&gt;subroutine: 子流程</span><br><span class="line">io&#x3D;&gt;inputoutput: 输入输出框</span><br><span class="line">e&#x3D;&gt;end: 结束框</span><br><span class="line">st-&gt;op-&gt;cond</span><br><span class="line">cond(yes)-&gt;io-&gt;e</span><br><span class="line">cond(no)-&gt;sub1(right)-&gt;op</span><br></pre></td></tr></table></figure><h3 id="标准流程图源码格式（横向）"><a href="#标准流程图源码格式（横向）" class="headerlink" title="标准流程图源码格式（横向）"></a>标准流程图源码格式（横向）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">st&#x3D;&gt;start: 开始框</span><br><span class="line">op&#x3D;&gt;operation: 处理框</span><br><span class="line">cond&#x3D;&gt;condition: 判断框(是或否?)</span><br><span class="line">sub1&#x3D;&gt;subroutine: 子流程</span><br><span class="line">io&#x3D;&gt;inputoutput: 输入输出框</span><br><span class="line">e&#x3D;&gt;end: 结束框</span><br><span class="line">st(right)-&gt;op(right)-&gt;cond</span><br><span class="line">cond(yes)-&gt;io(bottom)-&gt;e</span><br><span class="line">cond(no)-&gt;sub1(right)-&gt;op</span><br></pre></td></tr></table></figure><h3 id="UML时序图源码样例"><a href="#UML时序图源码样例" class="headerlink" title="UML时序图源码样例"></a>UML时序图源码样例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">对象A-&gt;对象B: 对象B你好吗?（请求）</span><br><span class="line">Note right of 对象B: 对象B的描述</span><br><span class="line">Note left of 对象A: 对象A的描述(提示)</span><br><span class="line">对象B--&gt;对象A: 我很好(响应)</span><br><span class="line">对象A-&gt;对象B: 你真的好吗？</span><br></pre></td></tr></table></figure><h3 id="UML时序图源码复杂样例"><a href="#UML时序图源码复杂样例" class="headerlink" title="UML时序图源码复杂样例"></a>UML时序图源码复杂样例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Title: 标题：复杂使用</span><br><span class="line">对象A-&gt;对象B: 对象B你好吗?（请求）</span><br><span class="line">Note right of 对象B: 对象B的描述</span><br><span class="line">Note left of 对象A: 对象A的描述(提示)</span><br><span class="line">对象B--&gt;对象A: 我很好(响应)</span><br><span class="line">对象B-&gt;小三: 你好吗</span><br><span class="line">小三--&gt;&gt;对象A: 对象B找我了</span><br><span class="line">对象A-&gt;对象B: 你真的好吗？</span><br><span class="line">Note over 小三,对象B: 我们是朋友</span><br><span class="line">participant C</span><br><span class="line">Note right of C: 没人陪我玩</span><br></pre></td></tr></table></figure><h3 id="UML标准时序图样例"><a href="#UML标准时序图样例" class="headerlink" title="UML标准时序图样例"></a>UML标准时序图样例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">%% 时序图例子,-&gt; 直线，--&gt;虚线，-&gt;&gt;实线箭头</span><br><span class="line">  sequenceDiagram</span><br><span class="line">    participant 张三</span><br><span class="line">    participant 李四</span><br><span class="line">    张三-&gt;王五: 王五你好吗？</span><br><span class="line">    loop 健康检查</span><br><span class="line">        王五-&gt;王五: 与疾病战斗</span><br><span class="line">    end</span><br><span class="line">    Note right of 王五: 合理 食物 &lt;br&#x2F;&gt;看医生...</span><br><span class="line">    李四--&gt;&gt;张三: 很好!</span><br><span class="line">    王五-&gt;李四: 你怎么样?</span><br><span class="line">    李四--&gt;王五: 很好!</span><br></pre></td></tr></table></figure><h3 id="甘特图样例"><a href="#甘特图样例" class="headerlink" title="甘特图样例"></a>甘特图样例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">%% 语法示例</span><br><span class="line">        gantt</span><br><span class="line">        dateFormat  YYYY-MM-DD</span><br><span class="line">        title 软件开发甘特图</span><br><span class="line">        section 设计</span><br><span class="line">        需求                      :done,    des1, 2014-01-06,2014-01-08</span><br><span class="line">        原型                      :active,  des2, 2014-01-09, 3d</span><br><span class="line">        UI设计                     :         des3, after des2, 5d</span><br><span class="line">    未来任务                     :         des4, after des3, 5d</span><br><span class="line">        section 开发</span><br><span class="line">        学习准备理解需求                      :crit, done, 2014-01-06,24h</span><br><span class="line">        设计框架                             :crit, done, after des2, 2d</span><br><span class="line">        开发                                 :crit, active, 3d</span><br><span class="line">        未来任务                              :crit, 5d</span><br><span class="line">        耍                                   :2d</span><br><span class="line">        section 测试</span><br><span class="line">        功能测试                              :active, a1, after des3, 3d</span><br><span class="line">        压力测试                               :after a1  , 20h</span><br><span class="line">        测试报告                               : 48h</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nhentai使用</title>
      <link href="/2020/06/23/nhentai%E4%BD%BF%E7%94%A8/"/>
      <url>/2020/06/23/nhentai%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="nhentai"><a href="#nhentai" class="headerlink" title="nhentai"></a>nhentai</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">       _   _            _        _</span><br><span class="line"> _ __ | | | | ___ _ __ | |_ __ _(_)</span><br><span class="line">| &#39;_ \| |_| |&#x2F; _ \ &#39;_ \| __&#x2F; _&#96; | |</span><br><span class="line">| | | |  _  |  __&#x2F; | | | || (_| | |</span><br><span class="line">|_| |_|_| |_|\___|_| |_|\__\__,_|_|</span><br></pre></td></tr></table></figure><a id="more"></a><p>あなたも変態。 いいね?</p><p><a href="https://travis-ci.org/RicterZ/nhentai" target="_blank" rel="noopener"><img src="https://camo.githubusercontent.com/3f38947f0cea0aafd4d76de55237400cbf5fe437/68747470733a2f2f7472617669732d63692e6f72672f5269637465725a2f6e68656e7461692e7376673f6272616e63683d6d6173746572" alt="travis"></a> <a href="https://pypi.org/project/nhentai/" target="_blank" rel="noopener"><img src="https://camo.githubusercontent.com/ea59fdecb1005fc2b393a9b720cdb68b6729f7b1/68747470733a2f2f696d672e736869656c64732e696f2f707970692f646d2f6e68656e7461692e737667" alt="pypi"> </a><a href="https://github.com/RicterZ/nhentai/blob/master/LICENSE" target="_blank" rel="noopener"><img src="https://camo.githubusercontent.com/7218a5e11e337e8416a840d1183851a6771e5ccc/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f7269637465727a2f6e68656e7461692e737667" alt="license"></a></p><p>nHentai 是一个从 <a href="http://nhentai.net/" target="_blank" rel="noopener">http://nhentai.net/</a>下载同人志的的CLI工具</p><h2 id="手动安装"><a href="#手动安装" class="headerlink" title="手动安装"></a>手动安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;RicterZ&#x2F;nhentai</span><br><span class="line">cd nhentai</span><br><span class="line">python setup.py install</span><br></pre></td></tr></table></figure><h2 id="安装-pip"><a href="#安装-pip" class="headerlink" title="安装(pip)"></a>安装(pip)</h2><p>Alternatively, install from PyPI with pip:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install nhentai</span><br></pre></td></tr></table></figure><p>For a self-contained installation, use <a href="https://github.com/pipxproject/pipx/" target="_blank" rel="noopener">Pipx</a>:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pipx install nhentai</span><br></pre></td></tr></table></figure><h2 id="安装-Gentoo"><a href="#安装-Gentoo" class="headerlink" title="安装(Gentoo)"></a>安装(Gentoo)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">layman -fa glicOne</span><br><span class="line">sudo emerge net-misc&#x2F;nhentai</span><br></pre></td></tr></table></figure><h2 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h2><p><strong>重要信息</strong>：要绕过nhentai频率限制，应使用–cookie选项存储cookie。</p><p><em>默认的下载文件夹将是您运行命令的路径（CLI路径）。</em></p><p>将您的nhentai cookie设置为针对验证码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nhentai --cookie &quot;YOUR COOKIE FROM nhentai.net&quot;</span><br></pre></td></tr></table></figure><p><strong>注意</strong>：Cookie的格式为“ csrftoken = TOKEN; sessionid = ID”</p><p>下载指定的同人志：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nhentai --id&#x3D;123855,123866</span><br></pre></td></tr></table></figure><p>下载在文件中指定ID的同人志（同人志ID按行分割）：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nhentai --file&#x3D;doujinshi.txt</span><br></pre></td></tr></table></figure><p>设置搜索默认语言</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nhentai --language&#x3D;english</span><br></pre></td></tr></table></figure><p>搜索关键字并下载第一页：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nhentai --search&#x3D;&quot;tomori&quot; --page&#x3D;1 --download</span><br><span class="line">＃ 你也可以通过标签和多个关键字下载</span><br><span class="line">nhentai --search&#x3D;&quot;tag:lolicon, artist:henreader, tag:full color&quot;</span><br><span class="line">nhentai --search&#x3D;&quot;lolicon, henreader, full color&quot;</span><br></pre></td></tr></table></figure><p>延迟下载您的收藏夹：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nhentai --favorites --download --delay 1</span><br></pre></td></tr></table></figure><p>格式化输出同人志文件夹名称：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nhentai --id 261100 --format &#39;[%i]%s&#39;</span><br></pre></td></tr></table></figure><p>支持的同人志文件夹格式化程序：</p><ul><li>％i：同人志ID</li><li>％t：同人志名称</li><li>％s：同人志字幕（翻译名称）</li><li>％a：同人志作者的名字</li></ul><p>其他选项:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">Options:</span><br><span class="line">  ＃操作选项</span><br><span class="line">  -h, --help            show this help message and exit</span><br><span class="line">  -D, --download        download doujinshi (for search results)</span><br><span class="line">  -S, --show            just show the doujinshi information</span><br><span class="line"></span><br><span class="line">  ＃同人志选项</span><br><span class="line">  --id&#x3D;ID               doujinshi ids set, e.g. 1,2,3</span><br><span class="line">  -s KEYWORD, --search&#x3D;KEYWORD</span><br><span class="line">                        search doujinshi by keyword</span><br><span class="line">  --tag&#x3D;TAG             download doujinshi by tag</span><br><span class="line">  -F, --favorites       list or download your favorites.</span><br><span class="line"></span><br><span class="line">  ＃多页选项</span><br><span class="line">  --page&#x3D;PAGE           page number of search results</span><br><span class="line">  --max-page&#x3D;MAX_PAGE   The max page when recursive download tagged doujinshi</span><br><span class="line"></span><br><span class="line">  ＃下载选项</span><br><span class="line">  -o OUTPUT_DIR, --output&#x3D;OUTPUT_DIR</span><br><span class="line">                        output dir</span><br><span class="line">  -t THREADS, --threads&#x3D;THREADS</span><br><span class="line">                        thread count for downloading doujinshi</span><br><span class="line">  -T TIMEOUT, --timeout&#x3D;TIMEOUT</span><br><span class="line">                        timeout for downloading doujinshi</span><br><span class="line">  -d DELAY, --delay&#x3D;DELAY</span><br><span class="line">                        slow down between downloading every doujinshi</span><br><span class="line">  -p PROXY, --proxy&#x3D;PROXY</span><br><span class="line">                        uses a proxy, for example: http:&#x2F;&#x2F;127.0.0.1:1080</span><br><span class="line">  -f FILE, --file&#x3D;FILE  read gallery IDs from file.</span><br><span class="line">  --format&#x3D;NAME_FORMAT  format the saved folder name</span><br><span class="line"></span><br><span class="line">  ＃生成选项</span><br><span class="line">  --html                generate a html viewer at current directory</span><br><span class="line">  --no-html             don&#39;t generate HTML after downloading</span><br><span class="line">  --gen-main            generate a main viewer contain all the doujin in the folder</span><br><span class="line">  -C, --cbz             generate Comic Book CBZ File</span><br><span class="line">  -P --pdf              generate PDF file</span><br><span class="line">  --rm-origin-dir       remove downloaded doujinshi dir when generated CBZ</span><br><span class="line">                        or PDF file.</span><br><span class="line"></span><br><span class="line">  # nHentai 选项</span><br><span class="line">  --cookie&#x3D;COOKIE       set cookie of nhentai to bypass Google recaptcha</span><br></pre></td></tr></table></figure><h2 id="nHentai-Mirror"><a href="#nHentai-Mirror" class="headerlink" title="nHentai Mirror"></a>nHentai Mirror</h2><p>如果你想使用镜像，你应该为nhentai.net和i.nhentai.net设置一个反向代理。例如:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">i.h.loli.club -&gt; i.nhentai.net</span><br><span class="line">h.loli.club -&gt; nhentai.net</span><br></pre></td></tr></table></figure><p>在你的NHENTAI镜像中设置env值。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NHENTAI&#x3D;http:&#x2F;&#x2F;h.loli.club nhentai --id 123456</span><br></pre></td></tr></table></figure><p><img src="C:%5CUsers%5Ccaihanyuan%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200701004733013.png" alt="image-20200701004733013"></p><p><img src="C:%5CUsers%5Ccaihanyuan%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200701004806573.png" alt="image-20200701004806573"></p><p><img src="C:%5CUsers%5Ccaihanyuan%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200701004813112.png" alt="image-20200701004813112"></p><h2 id="あなたも変態"><a href="#あなたも変態" class="headerlink" title="あなたも変態"></a>あなたも変態</h2><p><img src="C:%5CUsers%5Ccaihanyuan%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200701004828054.png" alt="image-20200701004828054"></p><blockquote><p><a href="https://github.com/2311596178/nhentai-master" target="_blank" rel="noopener">https://github.com/2311596178/nhentai-master</a></p></blockquote><h1 id="另外一种方法：nhentai-master"><a href="#另外一种方法：nhentai-master" class="headerlink" title="另外一种方法：nhentai-master"></a>另外一种方法：nhentai-master</h1><blockquote><p><a href="https://github.com/2311596178/nhentai-master" target="_blank" rel="noopener">https://github.com/2311596178/nhentai-master</a></p></blockquote><p>这个项目主要代码来自于<a href="https://github.com/dixudx/tumblr-crawler" target="_blank" rel="noopener">tumblr-crawler</a>.<br>那个项目用于便捷获取tumblr中的图片和视频，我把它修改成了这个本子下载器</p><p>这是一个<a href="https://www.python.org/" target="_blank" rel="noopener">Python</a>的脚本,配置运行后下载nhentai中的本子 或者可以直接使用编译好的.exe文件</p><h2 id="配置和运行"><a href="#配置和运行" class="headerlink" title="配置和运行"></a>配置和运行</h2><p>有两种方式来指定你要下载的站点,一是编辑<code>sites.txt</code>,二是指定命令行参数.</p><h3 id="第一种方法-编辑sites-txt文件"><a href="#第一种方法-编辑sites-txt文件" class="headerlink" title="第一种方法:编辑sites.txt文件"></a>第一种方法:编辑sites.txt文件</h3><p>打开文件<code>sites.txt</code>,把你想要下载的nhentai页面写进去,以逗号/空格/tab/表格鍵/回车符分隔,可以多行,不需要<code>https://nhentai.net/g/</code>.例如,如果你要下载<code>https://nhentai.net/g/263184/</code>,<code>https://nhentai.net/g/263183/</code>,这个文件应该是这样的:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">263184</span><br><span class="line">263183</span><br></pre></td></tr></table></figure><p>然后保存文件,在终端(terminal)里面运行<code>python nhentai-master.py</code><br>或者直接点击运行nhentai-master.exe</p><h3 id="第二种方法-编辑sites-url-txt文件"><a href="#第二种方法-编辑sites-url-txt文件" class="headerlink" title="第二种方法:编辑sites_url.txt文件"></a>第二种方法:编辑sites_url.txt文件</h3><p>当你搜索akane shinjou和rikka takarada并且需要下载所有的搜索结果时，复制你的网页地址并写入文件，例如：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;nhentai.net&#x2F;search&#x2F;?q&#x3D;akane+shinjou++rikka+takarada</span><br></pre></td></tr></table></figure><p>然后保存文件,在终端(terminal)里面运行<code>python nhentai-master.py</code><br>或者直接点击运行nhentai-master.exe</p>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 其他 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日语(N2)</title>
      <link href="/2020/06/23/%E6%97%A5%E8%AF%AD/"/>
      <url>/2020/06/23/%E6%97%A5%E8%AF%AD/</url>
      
        <content type="html"><![CDATA[<a id="more"></a><h2 id="9类动词变形总结"><a href="#9类动词变形总结" class="headerlink" title="9类动词变形总结"></a>9类动词变形总结</h2><h3 id="1-动词ます形"><a href="#1-动词ます形" class="headerlink" title="1.动词ます形"></a>1.动词ます形</h3><p>①一类动词:结尾[う]段假名变成[い]段+ます</p><p>例:行く～行きます　　買う～買います</p><p>②二类动词:去掉る＋ます</p><p>　例:食べる～食べます　起きる～起きます</p><p>③カ变动词:来（く）る～来（き）ます</p><p>④サ变动词:去掉する+します</p><p>　例：勉強する～勉強します</p><p><strong>★特殊一类动词:</strong></p><p>帰る～帰ります　　知る～知ります</p><p>　入る～入ります　　要る～要ります</p><p>　切る～切ります　　走る～走ります 等，详见后文</p><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200705090848.png" alt=""></p><h3 id="2-动词て形-（た形同て形，た→て，だ→で）"><a href="#2-动词て形-（た形同て形，た→て，だ→で）" class="headerlink" title="2.动词て形 （た形同て形，た→て，だ→で）"></a>2.动词て形 （た形同て形，た→て，だ→で）</h3><p>①一类动词:</p><p>1.く→いて。　ぐ→いで。</p><p>例:書く→書いて。　脱ぐ→脱いで。</p><p>2.す→して。</p><p>例:話す→話して。</p><p>3.う、つ、る结尾的，去掉尾字＋って。</p><p>例:買う→買って。立つ→立って。終わる→終わって。帰る→帰って。知る→知って</p><p>4.ぬ、ぶ、む结尾的，去掉尾字＋んで。</p><p>例:飲む→飲んて。死ぬ→死んで。飛ぶ→飛んで。</p><p>②二类动词:去る+て。</p><p>例:食べる→食べて。起きる→起きて。</p><p>③カ变动词:来る→来（き）て。</p><p>④サ变动词:する→して。</p><p>例:勉強する→勉強して。</p><p><strong>★特殊:行く</strong>→<strong>行って</strong></p><p><img src="https://pic4.zhimg.com/v2-71167921c559d58aad7c53bdd934c8c7_r.jpg" alt="preview"></p><p><img src="https://pic4.zhimg.com/v2-910a677183f9110d6e704c23d319235f_r.jpg" alt="preview"></p><h3 id="3-动词ない形（未然形）"><a href="#3-动词ない形（未然形）" class="headerlink" title="3.动词ない形（未然形）"></a>3.动词ない形（未然形）</h3><p>①一类动词:结尾[う]段假名变成[あ]段后+ない。</p><p>例:行く→行かない．　　</p><p><strong>★特殊：う段变成わ段 [例:買う→買わない。 ]</strong></p><p>②二类动词:去る+ない。</p><p>食べる→食べない。　起きる→起きない。</p><p>③カ变动词:特殊:来る→来(こ)ない。</p><p>④サ变动词:する→しない。</p><p>例：勉強する→勉強しない。</p><p><img src="https://pic1.zhimg.com/v2-947f80baa61a44523ca3f92056cdb4ec_r.jpg" alt="preview"></p><h3 id="4-动词命令形"><a href="#4-动词命令形" class="headerlink" title="4.动词命令形"></a>4.动词命令形</h3><p>①一类动词:结尾[う]段假名变成[え]段.</p><p>例:行く→行け。　　　　買う→買え。</p><p>②二类动词:去る+ろ</p><p>例:起きる→起きろ。　　食べる→食べろ。</p><p>③カ变动词: 来る→来（こ）い。</p><p>④サ变动词: する→しろ。</p><p>例:勉強する→勉強しろ。</p><p>★动词禁止形：所有词的原形（简体形、基本形）+な。</p><p>例:行く→行くな。起きる→起きるな。来る→来（く）るな。勉強する→勉強するな。</p><p><img src="https://pic4.zhimg.com/v2-a31fcf2367800417b06716561ba28f6f_r.jpg" alt="preview"></p><h3 id="5-动词可能形"><a href="#5-动词可能形" class="headerlink" title="5.动词可能形"></a>5.动词可能形</h3><p>①一类动词:将结尾假名变成它同行的下一个假名后+る。</p><p>行く→行ける。　　　買う→買える。</p><p>②二类动词:去る+られる。</p><p>　　　　　　 食べる→食べられる。　起きる→起きられる。</p><p>③カ变动词:来る→来（こ）られる。</p><p>④サ变动词:する→できる。</p><p>　　勉強する→勉強できる。</p><p><img src="https://pic2.zhimg.com/v2-73914199b44b21d5eb741c4583e51415_r.jpg" alt="preview"></p><h3 id="6-假定形"><a href="#6-假定形" class="headerlink" title="6.假定形"></a>6.假定形</h3><p>①一类动词:将结尾假名变成它同行的下一个假名后+ば。</p><p>例:行く→行けば。　　　買う→買えば。</p><p>②二类动词:去る+れば</p><p>例:食べる→食べれば。　　起きる→起きれば。</p><p>③カ变动词: 来る→来（く）れば。</p><p>④サ变动词: する→すれば。</p><p>例:散歩する→散歩すれば。</p><p>⑤形容词:去い+ければ</p><p>例:安い→安ければ。　　おいしい→おいしければ。</p><p>⑥形容动词:去だ+なら。</p><p>例:暇だ→暇なら。　　　简単だ→简単なら。</p><p>‡名词:名词直接+なら。</p><p>例:日本人→日本人なら。</p><p><img src="https://pic3.zhimg.com/v2-e1e722ec3904818db944d94ae870d322_r.jpg" alt="preview"></p><h3 id="7-动词意志形（ましょう的简体形）"><a href="#7-动词意志形（ましょう的简体形）" class="headerlink" title="7.动词意志形（ましょう的简体形）"></a>7.动词意志形（ましょう的简体形）</h3><p>①一类动词:结尾[う]段假名变成[お]段长音（即[お]+う）.</p><p>例:行く→行こう。　　　　買う→買おう。</p><p>②二类动词:去掉结尾る+よう</p><p>例:食べる→食べよう。　　起きる→起きよう。</p><p>③カ变动词: 来る→来（こ）よう。</p><p>④サ变动词: する→しよう。</p><p>例:散歩する→散歩しよう。</p><p><img src="https://pic3.zhimg.com/v2-d99b95aba371947efcf9bbb4e129564e_r.jpg" alt="preview"></p><h3 id="8-动词被动形"><a href="#8-动词被动形" class="headerlink" title="8.动词被动形"></a>8.动词被动形</h3><p>①一类动词:将结尾假名变成它所在行的あ段上假名后+れる。</p><p>例:踏む→踏まれる。　　呼ぶ→呼ばれる。</p><p>②二类动词:去る+られる。</p><p>例:褒める→褒められる。　　食べる→食べられる。</p><p>③カ变动词: 来る→来（こ）られる。</p><p>④サ变动词: する→される。</p><p>例:発明する→発明される。</p><p><img src="https://pic3.zhimg.com/v2-fa1b48e6779fbec3c04c4c3250c4267a_r.jpg" alt="preview"></p><h3 id="9-动词使役形"><a href="#9-动词使役形" class="headerlink" title="9.动词使役形"></a>9.动词使役形</h3><p>①一类动词:将结尾假名变成它所在行的あ段上假名后+せる。</p><p>例:行く→行かせる。　　飲む→飲ませる。</p><p>②二类动词:去る+させる。</p><p>例:食べる→食べさせる。　　起きる→起きさせる。</p><p>③カ变动词: 来る→来（こ）させる。</p><p>④サ变动词: する→させる。</p><p>例:勉強する→勉強させる。</p><p><img src="https://pic1.zhimg.com/v2-8051cec61eb13a2259ac6dea87d5c8fc_r.jpg" alt="preview"></p><h2 id="★26个特殊一类动词"><a href="#★26个特殊一类动词" class="headerlink" title="★26个特殊一类动词"></a><strong>★26个特殊一类动词</strong></h2><p>1．嘲（あざけ）る</p><ul><li>彼は皆の前で私を嘲った。/他在众人面前讥讽我。</li></ul><p>2．焦（あせ）る</p><ul><li>若者はすぐ出発したくて焦っているようだ。/年轻人似乎急着想马上出发。</li></ul><p>3．要（い）る</p><ul><li>その旅行にどれだけ金が要るのか。/这次旅行需要多少钱？</li></ul><p>4．煎（い）る</p><ul><li>コーヒーを煎る时いい匂いがします。/烘培咖啡时散发出一股香气。</li></ul><p>5．返（かえ）る</p><ul><li>バスで忘れた伞が返ってきた。/落在公共汽车上的雨伞找回来了。</li></ul><p>6．帰（かえ）る</p><ul><li>アメリカへ渡ったきり帰って来なかった。/去了美国之后就没有再回来。</li></ul><p>7．限（かぎ）る</p><ul><li>入场者は女性に限ります。/仅限女性观众入场。</li></ul><p>8．切（き）る</p><ul><li>包丁で指先を切った。/菜刀把手指划开了。</li></ul><p>9．覆（くつがえ）る</p><ul><li>道の曲がり角でドラックが覆った。/卡车在道路拐角翻车了。</li></ul><p>10．蹴（け）る</p><ul><li>この马は人を蹴る癖がある。/这匹马有踢人的坏毛病。</li></ul><p>11．遮（さえぎ）る</p><ul><li>カーテンで光を遮る。/用窗帘挡住光线。</li></ul><p>12．茂（しげ）る</p><ul><li>庭の木が青々とよく茂っています。/院子里的树郁郁葱葱十分茂盛。</li></ul><p>13．湿（しめ）る</p><ul><li>夜の湿った空気は体に毒だ。/夜晚的潮湿空气身体有害。</li></ul><p>14．知（し）る</p><ul><li>彼は自分の弱点を知らない。/他不知道自己的弱点。</li></ul><p>15．滑（すべ）る</p><ul><li>手が滑って花瓶を床に落とした。/手一滑把花瓶摔在了地上。</li></ul><p>16．散（ち）る</p><ul><li>桜の花が散ってしまった。/樱花已经谢了。</li></ul><p>17．照（て）る</p><ul><li>降っても照っても明日は出ける。/下雨还是晴天明天都要出门。</li></ul><p>18．握（にぎ）る</p><ul><li>何か私たちの秘密を握っているようだ。/他似乎掌握了我们的秘密。</li></ul><p>19．练（ね）る</p><ul><li>书いた文章は何回も缲り返し练らなければならない。/写好文章必须反复推敲多次。</li></ul><p>20．骂（ののし）る</p><ul><li>彼は运転手を酷く骂った。/他把驾驶员臭骂了一顿。</li></ul><p>21．入（はい）る</p><ul><li>六歳の时、学校に入った。/六岁时，进了学校。</li></ul><p>22．走（はし）る</p><ul><li>駅まで走って5分です。/跑去车站要5分钟。</li></ul><p>23．减（へ）る</p><ul><li>农业人口が目立って减っている。/务农人口正急剧减少。</li></ul><p>24．参（まい）る</p><ul><li>はい、だたいま参ります。/知道了，马上就过去。</li></ul><p>25．混（ま）じる</p><ul><li>あの少女には日本人とイタリア人の血が混じっている。/那个女孩是日本与意大利人的混血儿。</li></ul><p>26．涨（みなぎ）る</p><ul><li>青年の心には正义感が涨ってた。/青年心中充满了正义感。</li></ul><h2 id="动词名词化"><a href="#动词名词化" class="headerlink" title="动词名词化"></a>动词名词化</h2><p>一类动词：把词尾的[う]段→[い]段</p><p>「読む（よむ）」→「読み（よみ）」→「読み方（よみかた）」</p><p>「売る（うる）」→「売り（うり）」→「売り切れ（うりきれ）」</p><p>「引く（ひく）」→「引き（ひき）」→「引き出し（ひきだし）」</p><p>二类动词：把最后的る去掉</p><p>「始める（はじめる）」→「始め」</p><p>「締める（しめる）」→「締め」</p><p>「別れる（わかれる）」→「別れ」→「お別れ」（お/ご表示尊敬）</p><p>「壊れる（こわれる）」→「壊れ」</p><p>三类动词：</p><p>①サ变动词：把词尾的する去掉。</p><p>「接客する」→「接客（せっきゃく）」</p><p>「電話する」→「電話（でんわ）」</p><p>「勉強する」→「勉強（べんきょう）」</p><p>②カ变动词：</p><p>「来る（くる）」→「来（き）」→「行き来（いきき）」</p>]]></content>
      
      
      <categories>
          
          <category> 日语 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日语 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>各种网站</title>
      <link href="/2020/06/23/%E7%BD%91%E7%AB%99/"/>
      <url>/2020/06/23/%E7%BD%91%E7%AB%99/</url>
      
        <content type="html"><![CDATA[<a id="more"></a><h1 id="搞学习"><a href="#搞学习" class="headerlink" title="搞学习"></a>搞学习</h1><p>CSDN： <a href="https://www.csdn.net/" target="_blank" rel="noopener">https://www.csdn.net/</a></p><p>TED（最优质的演讲）：<a href="https://www.ted.com/" target="_blank" rel="noopener">https://www.ted.com/</a></p><p>谷粉学术： <a href="https://gfsoso.99lb.net/scholar.html" target="_blank" rel="noopener">https://gfsoso.99lb.net/scholar.html</a></p><p>大学资源网：<a href="http://www.dxzy163.com/" target="_blank" rel="noopener">http://www.dxzy163.com/</a></p><p>简答题：<a href="http://www.jiandati.com/" target="_blank" rel="noopener">http://www.jiandati.com/</a></p><p>网易公开课：<a href="https://open.163.com/ted/" target="_blank" rel="noopener">https://open.163.com/ted/</a></p><p>网易云课堂：<a href="https://study.163.com/" target="_blank" rel="noopener">https://study.163.com/</a></p><p>中国大学MOOC：<a href="http://www.icourse163.org" target="_blank" rel="noopener">www.icourse163.org</a></p><p>网易云课堂：study.163.com</p><p>哔哩哔哩弹幕网： <a href="http://www.bilibili.com" target="_blank" rel="noopener">www.bilibili.com</a></p><p>我要自学网： <a href="http://www.51zxw.net" target="_blank" rel="noopener">www.51zxw.net</a></p><p>知乎：<a href="http://www.zhihu.com" target="_blank" rel="noopener">www.zhihu.com</a></p><p>学堂在线：<a href="http://www.xuetangx.com" target="_blank" rel="noopener">www.xuetangx.com</a></p><p>爱课程：<a href="http://www.icourses.cn" target="_blank" rel="noopener">www.icourses.cn</a></p><p>猫咪论文：<a href="https://lunwen.im/" target="_blank" rel="noopener">https://lunwen.im/</a></p><p>iData（论文搜索）：<a href="http://www.cn-ki.net" target="_blank" rel="noopener">www.cn-ki.net</a></p><p>文泉考试：<a href="https://www.wqkaoshi.com" target="_blank" rel="noopener">https://www.wqkaoshi.com</a></p><p>猿学：<a href="http://yuanxue365.com/" target="_blank" rel="noopener">http://yuanxue365.com/</a></p><p>简书：<a href="https://www.jianshu.com/" target="_blank" rel="noopener">https://www.jianshu.com/</a></p><p>doyoudo：<a href="http://www.doyoudo.com/" target="_blank" rel="noopener">http://www.doyoudo.com/</a></p><p>好知网：<a href="http://www.howzhi.com/" target="_blank" rel="noopener">http://www.howzhi.com/</a></p><p>学小易（大学生搜题）<a href="https://www.51xuexiaoyi.com/" target="_blank" rel="noopener">https://www.51xuexiaoyi.com/</a></p><h1 id="找书籍"><a href="#找书籍" class="headerlink" title="找书籍"></a>找书籍</h1><p>书栈网（极力推荐）： <a href="https://www.bookstack.cn/" target="_blank" rel="noopener">https://www.bookstack.cn/</a></p><p>码农之家（计算机电子书下载）：<a href="http://www.xz577.com" target="_blank" rel="noopener">www.xz577.com</a></p><p>鸠摩搜书：<a href="http://www.jiumodiary.com" target="_blank" rel="noopener">www.jiumodiary.com</a></p><p>云海电子图书馆：<a href="http://www.pdfbook.cn" target="_blank" rel="noopener">www.pdfbook.cn</a></p><p>周读（书籍搜索）：ireadweek.com</p><p>知轩藏书：<a href="http://www.zxcs.me/" target="_blank" rel="noopener">http://www.zxcs.me/</a></p><p>脚本之家电子书下载：<a href="https://www.jb51.net/books/" target="_blank" rel="noopener">https://www.jb51.net/books/</a></p><p>搜书VIP-电子书搜索：<a href="http://www.soshuvip.com/all.html" target="_blank" rel="noopener">http://www.soshuvip.com/all.html</a></p><p>书格（在线古籍图书馆）：<a href="https://new.shuge.org/" target="_blank" rel="noopener">https://new.shuge.org/</a></p><p>caj云阅读：<a href="http://cajviewer.cnki.net/cajcloud/" target="_blank" rel="noopener">http://cajviewer.cnki.net/cajcloud/</a></p><p>必看网（人生必看的书籍）：<a href="https://www.biikan.com/" target="_blank" rel="noopener">https://www.biikan.com/</a></p><p>ePuBw（优质电子书下载网站）：<a href="https://epubw.com/" target="_blank" rel="noopener">https://epubw.com/</a></p><p>鸠摩搜书：<a href="https://www.jiumodiary.com/" target="_blank" rel="noopener">https://www.jiumodiary.com/</a></p><p>书伴：<a href="https://bookfere.com/" target="_blank" rel="noopener">https://bookfere.com/</a></p><p>ePUBee电子书库：<a href="http://cn.epubee.com/books/" target="_blank" rel="noopener">http://cn.epubee.com/books/</a></p><p>超星读书：<a href="http://book.chaoxing.com/" target="_blank" rel="noopener">http://book.chaoxing.com/</a></p><p>Owllook：<a href="https://www.owllook.net/" target="_blank" rel="noopener">https://www.owllook.net/</a></p><p>书格：<a href="https://new.shuge.org/" target="_blank" rel="noopener">https://new.shuge.org/</a></p><p>相识电子书：<a href="http://m.xiangshi123.com/" target="_blank" rel="noopener">http://m.xiangshi123.com/</a></p><h1 id="冷知识-黑科技"><a href="#冷知识-黑科技" class="headerlink" title="冷知识 / 黑科技"></a>冷知识 / 黑科技</h1><p>上班摸鱼必备（假装电脑系统升级）： <a href="http://fakeupdate.net/" target="_blank" rel="noopener">http://fakeupdate.net/</a></p><p>PIECES 拼图（30 个 CSS 碎片进行拼图，呈现 30 种濒临灭绝的动物）： <a href="http://www.species-in-pieces.com/" target="_blank" rel="noopener">http://www.species-in-pieces.com/</a></p><p>图片立体像素画： <a href="https://pissang.github.io/voxelize-image/" target="_blank" rel="noopener">https://pissang.github.io/voxelize-image/</a></p><p>福利单词（一个不太正经的背单词网站）： <a href="http://dict.ftqq.com" target="_blank" rel="noopener">http://dict.ftqq.com</a></p><p>查无此人（刷新网站，展现一张AI 生成的人脸照片）：<a href="https://thispersondoesnotexist.com/" target="_blank" rel="noopener">https://thispersondoesnotexist.com/</a></p><p>在线制作地图图例：<a href="https://mapchart.net/" target="_blank" rel="noopener">https://mapchart.net/</a></p><p>创意光线绘画：<a href="http://weavesilk.com/" target="_blank" rel="noopener">http://weavesilk.com/</a></p><p>星系观察： <a href="https://stellarium-web.org/" target="_blank" rel="noopener">https://stellarium-web.org/</a></p><p>煎蛋：<a href="http://jandan.net/" target="_blank" rel="noopener">http://jandan.net/</a></p><p>渣男-说话的艺术：<a href="https://lovelive.tools/" target="_blank" rel="noopener">https://lovelive.tools/</a></p><p>全历史：<a href="https://www.allhistory.com/" target="_blank" rel="noopener">https://www.allhistory.com/</a></p><p>iData：<a href="https://www.cn-ki.net/" target="_blank" rel="noopener">https://www.cn-ki.net/</a></p><p>术语在线：<a href="http://www.termonline.cn/" target="_blank" rel="noopener">http://www.termonline.cn/</a></p><p>全球网络攻击实时地图：<a href="https://cybermap.kaspersky.com/" target="_blank" rel="noopener">https://cybermap.kaspersky.com/</a></p><p>毒鸡汤：<a href="http://www.nows.fun/" target="_blank" rel="noopener">http://www.nows.fun/</a></p><p>微景天下：<a href="http://www.vizen.cn/" target="_blank" rel="noopener">http://www.vizen.cn/</a></p><p>果汁排行榜（生活中各种各样的排行榜）：<a href="http://guozhivip.com/rank/" target="_blank" rel="noopener">http://guozhivip.com/rank/</a></p><p>小鸡词典（查网络流行语）：<a href="https://jikipedia.com/" target="_blank" rel="noopener">https://jikipedia.com/</a></p><p>中国妖怪百集：<a href="http://www.cbaigui.com/" target="_blank" rel="noopener">http://www.cbaigui.com/</a></p><p>全球电视直播：<a href="http://tvvtvv.com/" target="_blank" rel="noopener">http://tvvtvv.com/</a></p><p>百度企业信用：<a href="https://xin.baidu.com/" target="_blank" rel="noopener">https://xin.baidu.com/</a></p><p>爱航天网：<a href="http://www.aihangtian.com/" target="_blank" rel="noopener">http://www.aihangtian.com/</a></p><h1 id="写代码"><a href="#写代码" class="headerlink" title="写代码"></a>写代码</h1><p>GitHub：<a href="https://github.com/" target="_blank" rel="noopener">https://github.com/</a></p><p>码云：<a href="https://gitee.com/" target="_blank" rel="noopener">https://gitee.com/</a></p><p>源码之家：<a href="https://www.mycodes.net/" target="_blank" rel="noopener">https://www.mycodes.net/</a></p><p>JSON to Dart： <a href="https://javiercbk.github.io/json_to_dart/" target="_blank" rel="noopener">https://javiercbk.github.io/json_to_dart/</a></p><p>Json在线解析验证： <a href="https://www.json.cn/" target="_blank" rel="noopener">https://www.json.cn/</a></p><p>在线接口测试（Getman）：<a href="https://getman.cn/" target="_blank" rel="noopener">https://getman.cn/</a></p><p>程序员在线工具：<a href="https://tool.lu/" target="_blank" rel="noopener">https://tool.lu/</a></p><p>菜鸟工具：<a href="https://c.runoob.com/" target="_blank" rel="noopener">https://c.runoob.com/</a></p><p>toolfk：<a href="https://www.toolfk.com/" target="_blank" rel="noopener">https://www.toolfk.com/</a></p><p>源码之家_站长下载：<a href="http://down.chinaz.com/" target="_blank" rel="noopener">http://down.chinaz.com/</a></p><h1 id="资源搜索"><a href="#资源搜索" class="headerlink" title="资源搜索"></a>资源搜索</h1><p>DogeDoge搜索引擎：<a href="http://www.dogedoge.com" target="_blank" rel="noopener">www.dogedoge.com</a></p><p>秘迹搜索：<a href="https://mijisou.com/" target="_blank" rel="noopener">https://mijisou.com/</a></p><p>小白盘：<a href="https://www.xiaobaipan.com/" target="_blank" rel="noopener">https://www.xiaobaipan.com/</a></p><p>云盘精灵（资源搜索）：<a href="http://www.yunpanjingling.com" target="_blank" rel="noopener">www.yunpanjingling.com</a></p><p>虫部落（资源搜索）：<a href="http://www.chongbuluo.com" target="_blank" rel="noopener">www.chongbuluo.com</a></p><p>如风搜（资源搜索）：<a href="http://www.rufengso.net/" target="_blank" rel="noopener">http://www.rufengso.net/</a></p><p>爱扒：<a href="https://www.zyboe.com/" target="_blank" rel="noopener">https://www.zyboe.com/</a></p><p>大力盘搜索：<a href="https://dalipan.com/" target="_blank" rel="noopener">https://dalipan.com/</a></p><h1 id="小工具"><a href="#小工具" class="headerlink" title="小工具"></a>小工具</h1><p>奶牛快传（在线传输文件利器）： cowtransfer.com</p><p>文叔叔（大文件传输，不限速）：<a href="https://www.wenshushu.cn/" target="_blank" rel="noopener">https://www.wenshushu.cn/</a></p><p>云端超级应用空间（PS，PPT，Excel，Ai）：<a href="https://uzer.me/" target="_blank" rel="noopener">https://uzer.me/</a></p><p>香当网（年终总结，个人简历，事迹材料，租赁合同，演讲稿）：<a href="https://www.xiangdang.net/" target="_blank" rel="noopener">https://www.xiangdang.net/</a></p><p>二维码生成：<a href="https://cli.im/" target="_blank" rel="noopener">https://cli.im/</a></p><p>搜狗翻译：fanyi.sogou.com</p><p>熵数（图表制作，数据可视化）：<a href="https://dydata.io/appv2/#/pages/index/home" target="_blank" rel="noopener">https://dydata.io/appv2/#/pages/index/home</a></p><p>拷贝兔：<a href="https://cp.anyknew.com/" target="_blank" rel="noopener">https://cp.anyknew.com/</a></p><p>图片无限变放大：<a href="http://bigjpg.com/zh" target="_blank" rel="noopener">http://bigjpg.com/zh</a></p><p>幕布（在线大纲笔记工具）：mubu.com</p><p>在线转换器（在线转换器转换任何测量单位）：<a href="https://zh.justcnw.com/" target="_blank" rel="noopener">https://zh.justcnw.com/</a></p><p>调查问卷制作：<a href="https://www.wenjuan.com/" target="_blank" rel="noopener">https://www.wenjuan.com/</a></p><p>果核剥壳（软件下载）：<a href="https://www.ghpym.com/" target="_blank" rel="noopener">https://www.ghpym.com/</a></p><p>软件下载：<a href="https://www.unyoo.com/" target="_blank" rel="noopener">https://www.unyoo.com/</a></p><p>MSDN我告诉你（windows10系统镜像下载）：<a href="https://msdn.itellyou.cn/" target="_blank" rel="noopener">https://msdn.itellyou.cn/</a></p><p>MacWK（精选Mac软件下载）：<a href="https://www.macwk.com/" target="_blank" rel="noopener">https://www.macwk.com/</a></p><p>Mixkit（免费视频，音乐，视频模板下载）：<a href="https://mixkit.co/" target="_blank" rel="noopener">https://mixkit.co/</a></p><p>Softonic（软件下载）：<a href="https://en.softonic.com/" target="_blank" rel="noopener">https://en.softonic.com/</a></p><p>PC下载网（软件下载）<a href="https://www.pcsoft.com.cn/" target="_blank" rel="noopener">https://www.pcsoft.com.cn/</a></p><p>GitMind（在线思维导图）：<a href="https://gitmind.cn/" target="_blank" rel="noopener">https://gitmind.cn/</a></p><p>MindLine思维导图：<a href="https://www.mindline.cn/" target="_blank" rel="noopener">https://www.mindline.cn/</a></p><p>draw.io（在线流程图制作）：<a href="https://app.diagrams.net/" target="_blank" rel="noopener">https://app.diagrams.net/</a></p><p>站长素材：<a href="http://sc.chinaz.com/" target="_blank" rel="noopener">http://sc.chinaz.com/</a></p><p>第一PPT：<a href="http://www.1ppt.com/" target="_blank" rel="noopener">http://www.1ppt.com/</a></p><p>waifu2x（图片拉伸提升画质）：<a href="http://waifu2x.udp.jp" target="_blank" rel="noopener">http://waifu2x.udp.jp</a></p><p>文字云：<a href="https://wordart.com/" target="_blank" rel="noopener">https://wordart.com/</a></p><p>Akuziti （汉字转换艺术字体效果）：<a href="http://www.akuziti.com/" target="_blank" rel="noopener">http://www.akuziti.com/</a></p><p>Ezgif（GIF动画编辑工具，视频转GIF）：<a href="https://ezgif.com/" target="_blank" rel="noopener">https://ezgif.com/</a></p><p>ProcessOn（在线作图工具）：<a href="https://www.processon.com/mindmap" target="_blank" rel="noopener">https://www.processon.com/mindmap</a></p><p>吾道幻灯片：<a href="https://www.woodo.cn/" target="_blank" rel="noopener">https://www.woodo.cn/</a></p><p>word代码美化：<a href="http://www.planetb.ca/syntax-highlight-word" target="_blank" rel="noopener">http://www.planetb.ca/syntax-highlight-word</a></p><h1 id="导航页（工具集）"><a href="#导航页（工具集）" class="headerlink" title="导航页（工具集）"></a>导航页（工具集）</h1><p>世界各国网址大全： <a href="http://www.world68.com/" target="_blank" rel="noopener">http://www.world68.com/</a></p><p>小森林导航：<a href="http://www.xsldh6.com/" target="_blank" rel="noopener">http://www.xsldh6.com/</a></p><p>简捷工具：<a href="http://www.shulijp.com/" target="_blank" rel="noopener">http://www.shulijp.com/</a></p><p>NiceTool.net 好工具网：<a href="http://www.nicetool.net/" target="_blank" rel="noopener">http://www.nicetool.net/</a></p><p>现实君工具箱（综合型在线工具集成网站）：<a href="http://tool.uixsj.cn/" target="_blank" rel="noopener">http://tool.uixsj.cn/</a></p><p>蓝调网站：<a href="http://lcoc.top/" target="_blank" rel="noopener">http://lcoc.top/</a></p><p>偷渡鱼：<a href="https://touduyu.com/" target="_blank" rel="noopener">https://touduyu.com/</a></p><p>牛导航：<a href="http://www.ziliao6.com/" target="_blank" rel="noopener">http://www.ziliao6.com/</a></p><p>小呆导航：<a href="https://www.webjike.com/index.html" target="_blank" rel="noopener">https://www.webjike.com/index.html</a></p><p>简法主页：<a href="http://www.jianfast.com/" target="_blank" rel="noopener">http://www.jianfast.com/</a></p><p>KIM主页：<a href="https://kim.plopco.com/" target="_blank" rel="noopener">https://kim.plopco.com/</a></p><p>聚BT：<a href="https://jubt.net/cn/index.html" target="_blank" rel="noopener">https://jubt.net/cn/index.html</a></p><p>精准云工具合集：<a href="https://jingzhunyun.com/" target="_blank" rel="noopener">https://jingzhunyun.com/</a></p><p>兔2工具合集：<a href="https://www.tool2.cn/" target="_blank" rel="noopener">https://www.tool2.cn/</a></p><p>爱资料工具（在线实用工具集合）：<a href="http://www.toolnb.com" target="_blank" rel="noopener">www.toolnb.com</a></p><p>工具导航：<a href="https://hao.logosc.cn/" target="_blank" rel="noopener">https://hao.logosc.cn/</a></p><p>炫猿：<a href="https://xydh.fun/" target="_blank" rel="noopener">https://xydh.fun/</a></p><p>国内外网站的导航站：<a href="https://www.egouz.com/" target="_blank" rel="noopener">https://www.egouz.com/</a></p><p>AnywhereAnything：<a href="http://lackar.com/aa/" target="_blank" rel="noopener">http://lackar.com/aa/</a></p><p>兔二工具：<a href="https://www.tool2.cn/" target="_blank" rel="noopener">https://www.tool2.cn/</a></p><p>工具123：<a href="http://www.gjw123.com/" target="_blank" rel="noopener">http://www.gjw123.com/</a></p><p>nicetool：<a href="http://www.nicetool.net/" target="_blank" rel="noopener">http://www.nicetool.net/</a></p><p>一个工具箱：<a href="http://www.atoolbox.net/" target="_blank" rel="noopener">http://www.atoolbox.net/</a></p><p>孟坤工具箱：<a href="http://tool.mkblog.cn/" target="_blank" rel="noopener">http://tool.mkblog.cn/</a></p><p>网站直通车：<a href="http://www.wangzhanztc.com/" target="_blank" rel="noopener">http://www.wangzhanztc.com/</a></p><p>实用工具大全：<a href="https://tool.520101.com/" target="_blank" rel="noopener">https://tool.520101.com/</a></p><h1 id="学设计"><a href="#学设计" class="headerlink" title="学设计"></a>学设计</h1><p>码力全开（产品/设计师/独立开发者的资源库）： <a href="https://www.maliquankai.com/designnav/" target="_blank" rel="noopener">https://www.maliquankai.com/designnav/</a></p><p>免费音频素材：<a href="https://icons8.cn/music" target="_blank" rel="noopener">https://icons8.cn/music</a></p><p>新CG儿（视频素材模板，无水印+免费下载）：<a href="https://www.newcger.com/" target="_blank" rel="noopener">https://www.newcger.com/</a></p><p>Iconfont（阿里巴巴矢量图标库）： <a href="https://www.iconfont.cn/" target="_blank" rel="noopener">https://www.iconfont.cn/</a></p><p>小图标下载：<a href="https://www.easyicon.net/" target="_blank" rel="noopener">https://www.easyicon.net/</a></p><p>Flight Icon：<a href="https://www.flighticon.co/" target="_blank" rel="noopener">https://www.flighticon.co/</a></p><p>第一字体转换器：<a href="http://www.diyiziti.com/" target="_blank" rel="noopener">http://www.diyiziti.com/</a></p><p>doyoudosh（平面设计）：<a href="http://www.doyoudo.com" target="_blank" rel="noopener">www.doyoudo.com</a></p><p>企业宣传视频在线制作：<a href="https://duomu.tv/" target="_blank" rel="noopener">https://duomu.tv/</a></p><p>MAKE海报设计官网：<a href="http://maka.im/" target="_blank" rel="noopener">http://maka.im/</a></p><p>一键海报神器：<a href="https://www.logosc.cn/photo/?utm_source=hao.logosc.cn&amp;utm_medium=referral" target="_blank" rel="noopener">https://www.logosc.cn/photo/?utm_source=hao.logosc.cn&amp;utm_medium=referral</a></p><p>字由（字体设计）：<a href="http://www.hellofont.cn/" target="_blank" rel="noopener">http://www.hellofont.cn/</a></p><p>查字体网站：<a href="https://fonts.safe.360.cn/" target="_blank" rel="noopener">https://fonts.safe.360.cn/</a></p><p>爱给网（免费素材下载的网站，包括音效、配乐，3D、视频、游戏，平面、教程）： <a href="http://www.aigei.com/" target="_blank" rel="noopener">http://www.aigei.com/</a></p><p>在线视频剪辑：<a href="https://bilibili.clipchamp.com/editor" target="_blank" rel="noopener">https://bilibili.clipchamp.com/editor</a></p><h1 id="搞文档"><a href="#搞文档" class="headerlink" title="搞文档"></a>搞文档</h1><p>即书（在线制作PPT）：<a href="https://www.keysuper.com/" target="_blank" rel="noopener">https://www.keysuper.com/</a></p><p>PDF处理：<a href="https://smallpdf.com/cn" target="_blank" rel="noopener">https://smallpdf.com/cn</a></p><p>PDF处理：<a href="https://www.ilovepdf.com/zh-cn" target="_blank" rel="noopener">https://www.ilovepdf.com/zh-cn</a></p><p>PDF处理： <a href="https://www.pdfpai.com/" target="_blank" rel="noopener">https://www.pdfpai.com/</a></p><p>PDF处理：<a href="https://www.hipdf.cn/" target="_blank" rel="noopener">https://www.hipdf.cn/</a></p><p>图片压缩，PDF处理：<a href="https://docsmall.com/" target="_blank" rel="noopener">https://docsmall.com/</a></p><p>腾讯文档（在线协作编辑和管理文档）：docs.qq.com</p><p>ProcessOn（在线协作制作结构图）：<a href="http://www.processon.com" target="_blank" rel="noopener">www.processon.com</a></p><p>iLovePDF（在线转换PDF利器）：<a href="http://www.ilovepdf.com" target="_blank" rel="noopener">www.ilovepdf.com</a></p><p>PPT在线制作：<a href="https://www.woodo.cn/" target="_blank" rel="noopener">https://www.woodo.cn/</a></p><p>PDF24工具（pdf处理工具）：<a href="https://tools.pdf24.org/en" target="_blank" rel="noopener">https://tools.pdf24.org/en</a></p><p>IMGBOT（在线图片处理）：<a href="http://www.imgbot.ai" target="_blank" rel="noopener">www.imgbot.ai</a></p><p>福昕云编辑（在线编辑PDF）：edit.foxitcloud.cn</p><p>TinyPNG（在线压缩图片）：tinypng.com</p><p>UZER.ME（在线使用各种大应用，在线使用CAD，MATLAB，Office三件套）：uzer.me</p><p>优品PPT（模板下载）： <a href="http://www.ypppt.com/" target="_blank" rel="noopener">http://www.ypppt.com/</a></p><p>第一PPT（模板下载）：<a href="http://www.1ppt.com/xiazai/" target="_blank" rel="noopener">http://www.1ppt.com/xiazai/</a></p><p>三顿PPT导航：sandunppt.com</p><p>Excel函数表： <a href="https://support.office.com/zh-cn/article/excel-%E5%87%BD%E6%95%B0%EF%BC%88%E6%8C%89%E5%AD%97%E6%AF%8" target="_blank" rel="noopener">https://support.office.com/zh-cn/article/excel-%E5%87%BD%E6%95%B0%EF%BC%88%E6%8C%89%E5%AD%97%E6%AF%8</a></p><p>D%E9%A1%BA%E5%BA%8F%EF%BC%89-b3944572-255d-4efb-bb96-c6d90033e188</p><h1 id="找图片"><a href="#找图片" class="headerlink" title="找图片"></a>找图片</h1><p>电脑壁纸：<a href="http://lcoc.top/bizhi/" target="_blank" rel="noopener">http://lcoc.top/bizhi/</a></p><p><a href="https://unsplash.com/" target="_blank" rel="noopener">https://unsplash.com/</a></p><p><a href="https://pixabay.com/" target="_blank" rel="noopener">https://pixabay.com/</a></p><p><a href="https://www.pexels.com/" target="_blank" rel="noopener">https://www.pexels.com/</a></p><p><a href="https://visualhunt.com/" target="_blank" rel="noopener">https://visualhunt.com/</a></p><p><a href="https://www.ssyer.com/" target="_blank" rel="noopener">https://www.ssyer.com/</a></p><p>彼岸图网：<a href="http://pic.netbian.com/" target="_blank" rel="noopener">http://pic.netbian.com/</a></p><p>极像素（超高清大图）：<a href="https://www.sigoo.com/" target="_blank" rel="noopener">https://www.sigoo.com/</a></p><p>免费版权图片搜索：<a href="https://www.logosc.cn/so/" target="_blank" rel="noopener">https://www.logosc.cn/so/</a></p><p>高清壁纸网站：<a href="https://wall.alphacoders.com/?lang=Chinese" target="_blank" rel="noopener">https://wall.alphacoders.com/?lang=Chinese</a></p><p>免费正版高清图片素材库：<a href="https://pixabay.com/zh/" target="_blank" rel="noopener">https://pixabay.com/zh/</a></p><h1 id="听音乐"><a href="#听音乐" class="headerlink" title="听音乐"></a>听音乐</h1><p>墨灵音乐：<a href="https://music.qugeek.com/" target="_blank" rel="noopener">https://music.qugeek.com/</a></p><p>音乐搜索器：<a href="http://www.xieqian.vip/music/" target="_blank" rel="noopener">http://www.xieqian.vip/music/</a></p><p>51APE无损乐下载：<a href="http://www.51ape.com/" target="_blank" rel="noopener">http://www.51ape.com/</a></p><p>超高无损音乐下载：<a href="https://www.sq688.com/" target="_blank" rel="noopener">https://www.sq688.com/</a></p><p>音乐搜索器：<a href="http://www.xieqian.vip/music/" target="_blank" rel="noopener">http://www.xieqian.vip/music/</a></p><p>耳聆网：<a href="https://www.ear0.com/" target="_blank" rel="noopener">https://www.ear0.com/</a></p><h1 id="看视频"><a href="#看视频" class="headerlink" title="看视频"></a>看视频</h1><p>阿木影视： <a href="https://www.aosk.online/" target="_blank" rel="noopener">https://www.aosk.online/</a></p><p>电影推荐（分类别致）：<a href="http://www.mvcat.com" target="_blank" rel="noopener">http://www.mvcat.com</a></p><p>APP影院：<a href="https://app.movie/" target="_blank" rel="noopener">https://app.movie/</a></p><p>去看TV：<a href="https://www.qukantv.net/" target="_blank" rel="noopener">https://www.qukantv.net/</a></p><p>动漫视频网：<a href="http://www.zzzfun.com/" target="_blank" rel="noopener">http://www.zzzfun.com/</a></p><p>94神马电影网：<a href="http://www.9rmb.com/" target="_blank" rel="noopener">http://www.9rmb.com/</a></p><p>NO视频官网：<a href="http://www.novipnoad.com/" target="_blank" rel="noopener">http://www.novipnoad.com/</a></p><p>蓝光画质电影：<a href="http://www.languang.co/" target="_blank" rel="noopener">http://www.languang.co/</a></p><p>在线看剧：<a href="http://dy.27234.cn/" target="_blank" rel="noopener">http://dy.27234.cn/</a></p><p>大数据导航：<a href="http://hao.199it.com/" target="_blank" rel="noopener">http://hao.199it.com/</a></p><p>多功能图片网站：<a href="https://www.logosc.cn/so/" target="_blank" rel="noopener">https://www.logosc.cn/so/</a></p><p>牛牛TV：<a href="http://www.ziliao6.com/tv/" target="_blank" rel="noopener">http://www.ziliao6.com/tv/</a></p><p>VideoFk解析视频：<a href="http://www.videofk.com/" target="_blank" rel="noopener">http://www.videofk.com/</a></p><p>蓝调网站：<a href="http://lcoc.top/vip2.3/" target="_blank" rel="noopener">http://lcoc.top/vip2.3/</a></p><p>永久资源采集网：<a href="http://www.yongjiuzy1.com/" target="_blank" rel="noopener">http://www.yongjiuzy1.com/</a></p><p>美剧星球：<a href="http://www.meijuxingqiu.com/" target="_blank" rel="noopener">http://www.meijuxingqiu.com/</a></p><p>zzzfun动漫网</p><p>动漫花园</p><p>麻辣黑科技影视：<a href="http://dy.27234.cn/" target="_blank" rel="noopener">http://dy.27234.cn/</a></p><p>美剧17：<a href="http://meiju17.com/index.php/vod/show/by/time/" target="_blank" rel="noopener">http://meiju17.com/index.php/vod/show/by/time/</a></p><p>AGE动漫：<a href="https://www.agefans.tv/" target="_blank" rel="noopener">https://www.agefans.tv/</a></p>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 其他 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>npm——taobao镜像</title>
      <link href="/2020/06/23/%E6%B7%98%E5%AE%9D%E9%95%9C%E5%83%8F/"/>
      <url>/2020/06/23/%E6%B7%98%E5%AE%9D%E9%95%9C%E5%83%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="使用淘宝镜像"><a href="#使用淘宝镜像" class="headerlink" title="使用淘宝镜像"></a>使用淘宝镜像</h1><p>参考：<a href="https://developer.aliyun.com/mirror/NPM" target="_blank" rel="noopener">https://developer.aliyun.com/mirror/NPM</a></p><a id="more"></a><p><img src="C:%5CUsers%5Ccaihanyuan%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200708224740142.png" alt="image-20200708224740142"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g cnpm --registry&#x3D;https:&#x2F;&#x2F;registry.npm.taobao.org</span><br></pre></td></tr></table></figure><p>在安装命令后面加上<code>--registry=https://registry.npm.taobao.org</code></p>]]></content>
      
      
      <categories>
          
          <category> npm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> npm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IIC学习</title>
      <link href="/2020/06/23/STM32/IIC%E5%AD%A6%E4%B9%A0/"/>
      <url>/2020/06/23/STM32/IIC%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="IIC概述"><a href="#IIC概述" class="headerlink" title="IIC概述"></a>IIC概述</h1><h3 id="IIC的简介"><a href="#IIC的简介" class="headerlink" title="IIC的简介"></a>IIC的简介</h3><p>IIC（Inter－Integrated Circuit）总线是一种由PHILIPS公司在80年代开发的两线式串行总线，用于连接微控制器及其外围设备。<strong>它是半双工通信方式</strong>。</p><ul><li>IIC总线最主要的优点是其简单性和有效性。由于接口直接在组件之上，因此IIC总线占用的空间非常小，减少了电路板的空间和芯片管脚的数量，降低了互联成本。总线的长度可高达25英尺，并且能够以10Kbps的最大传输速率支持40个组件。</li><li>IIC总线的另一个优点是，<strong>它支持多主控(multimastering)， 其中任何能够进行发送和接收的设备都可以成为主总线。一个主控能够控制信号的传输和时钟频率。当然，在任何时间点上只能有一个主控。</strong></li></ul><a id="more"></a><p><img src="https://img-blog.csdn.net/20180514203538172" alt="img"></p><p><strong>IIC串行总线一般有两根信号线，一根是双向的数据线SDA，另一根是时钟线SCL，其时钟信号是由主控器件产生。所有接到IIC总线设备上的串行数据SDA都接到总线的SDA上，各设备的时钟线SCL接到总线的SCL上。对于并联在一条总线上的每个IC都有唯一的地址。</strong></p><p><img src="https://img-blog.csdn.net/20180515110246982" alt="img"></p><p>一般情况下，数据线SDA和时钟线SCL都是处于上拉电阻状态。因为：在总线空闲状态时，这两根线一般被上面所接的上拉电阻拉高，保持着高电平。</p><h3 id="STM32的IIC接口"><a href="#STM32的IIC接口" class="headerlink" title="STM32的IIC接口"></a>STM32的IIC接口</h3><p>目前绝大多数的MCU都附带IIC总线接口，STM32也不例外。但是在本文中，我们不使用STM32的硬件IIC来读取24C02，而是通过软件的方式来模拟。</p><p>原因是因为：STM32的硬件IIC非常复杂，更重要的是它并不稳定，故不推荐使用。 </p><h3 id="IIC协议"><a href="#IIC协议" class="headerlink" title="IIC协议"></a>IIC协议</h3><p>IIC总线在传输数据的过程中一共有三种类型信号，分别为：<strong>开始信号、结束信号和应答信号。这些信号中，起始信号是必需的，结束信号和应答信号，都可以不要。</strong>同时我们还要介绍其空闲状态、数据的有效性、数据传输。</p><p>先来看一下IIC总线的时序图：</p><p><img src="https://img-blog.csdn.net/20180514184425119" alt="img"></p><p>这可能会比较复杂，可以先看一份简化了的时序图：</p><h3 id="空闲状态"><a href="#空闲状态" class="headerlink" title="空闲状态"></a>空闲状态</h3><p><strong>当IIC总线的数据线SDA和时钟线SCL两条信号线同时处于高电平时，规定为总线的空闲状态。</strong>此时各个器件的输出级场效应管均处在截止状态，即释放总线，由两条信号线各自的上拉电阻把电平拉高。 </p><h3 id="起始信号与停止信号"><a href="#起始信号与停止信号" class="headerlink" title="起始信号与停止信号"></a>起始信号与停止信号</h3><ul><li><strong>起始信号：当时钟线SCL为高期间，数据线SDA由高到低的跳变；</strong>启动信号是一种电平跳变时序信号，而不是一个电平信号；</li><li><strong>停止信号：当时钟线SCL为高期间，数据线SDA由低到高的跳变；</strong>停止信号也是一种电平跳变时序信号，而不是一个电平信号。</li></ul><p><img src="https://img-blog.csdn.net/20180514203940683" alt="img"></p><h3 id="应答信号"><a href="#应答信号" class="headerlink" title="应答信号"></a>应答信号</h3><p>发送器<strong>每发送一个字节（8个bit），就在时钟脉冲9期间释放数据线，由接收器反馈一个应答信号。</strong> </p><ul><li><strong>应答信号为低电平时，规定为有效应答位（ACK，简称应答位），表示接收器已经成功地接收了该字节；</strong></li><li><strong>应答信号为高电平时，规定为非应答位（NACK），一般表示接收器接收该字节没有成功。</strong> </li></ul><p><img src="https://img-blog.csdn.net/20180514204129274" alt="img"></p><p>对于反馈有效应答位ACK的要求是：接收器在第9个时钟脉冲之前的低电平期间将数据线SDA拉低，并且确保在该时钟的高电平期间为稳定的低电平。 <strong>如果接收器是主控器，则在它收到最后一个字节后，发送一个NACK信号，以通知被控发送器结束数据发送，并释放数据线SDA，以便主控接收器发送一个停止信号P。</strong></p><h3 id="数据有效性"><a href="#数据有效性" class="headerlink" title="数据有效性"></a>数据有效性</h3><p><strong>IIC总线进行数据传送时，时钟信号为高电平期间，数据线上的数据必须保持稳定；只有在时钟线上的信号为低电平期间，数据线上的高电平或低电平状态才允许变化。</strong> </p><p>即：<strong>数据在时钟线SCL的上升沿到来之前就需准备好。并在在下降沿到来之前必须稳定。</strong></p><p><img src="https://img-blog.csdn.net/20180514203753563" alt="img"></p><h3 id="数据的传达"><a href="#数据的传达" class="headerlink" title="数据的传达"></a>数据的传达</h3><p>在IIC总线上传送的每一位数据都有一个时钟脉冲相对应（或同步控制），即在SCL串行时钟的配合下，在SDA上逐位地串行传送每一位数据。数据位的传输是边沿触发。</p><h3 id="延时时间"><a href="#延时时间" class="headerlink" title="延时时间"></a>延时时间</h3><p><img src="https://img-blog.csdn.net/20180514204517583" alt="img"></p><p>本节主要讲述IIC的使用及源码实现。</p><p>IIC数据有效性：<strong>只有在SCL线为低时，SDA线才允许改变电平。</strong></p><h3 id="初始宏定义如下："><a href="#初始宏定义如下：" class="headerlink" title="初始宏定义如下："></a>初始宏定义如下：</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 端口设置 */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IIC_SCL         PAout(6)       <span class="comment">//SCLK  时钟   </span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IIC_SDA         PAout(7)       <span class="comment">//SDA   写数据  </span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> READ_SDA        PAin(7)        <span class="comment">//SDA   读数据</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* IO方向设置 */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SDA_IN()  &#123;GPIOA-&gt;CRL&amp;=0X0FFFFFFF; GPIOA-&gt;CRL|=(u32)8<span class="meta-string">&lt;&lt;28;/*GPIOA-&gt;ODR|=1&lt;&lt;7;*/&#125;                        //设置SDA口为上拉输入</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SDA_OUT() &#123;GPIOA-&gt;CRL&amp;=0X0FFFFFFF; GPIOA-&gt;CRL|=(u32)3&lt;&lt;28;&#125;                                                        <span class="comment">//设置SDA口为推挽输出</span></span></span><br></pre></td></tr></table></figure><h1 id="IIC详解"><a href="#IIC详解" class="headerlink" title="IIC详解"></a>IIC详解</h1><blockquote><p> 参考文章：<a href="https://blog.csdn.net/qq_38410730/article/details/80312357?utm_medium=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.nonecase&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.nonecase" target="_blank" rel="noopener">IIC的基本原理</a></p></blockquote><p><img src="https://images2017.cnblogs.com/blog/1309643/201801/1309643-20180129163222468-1621921476.png" alt="img"></p><h3 id="先看前一部分（开始与结束）："><a href="#先看前一部分（开始与结束）：" class="headerlink" title="先看前一部分（开始与结束）："></a>先看前一部分（开始与结束）：</h3><p><img src="https://images2017.cnblogs.com/blog/1309643/201801/1309643-20180129202110453-1546154669.png" alt="img"></p><p>从时序图可以看出来：</p><ul><li><p>开始信号为SCL为高时，SDA由高变低</p></li><li><p>结束信号为SCL为低时，SDA由低变高</p></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*******************************************</span></span><br><span class="line"><span class="comment">函数名称： IIC_Start</span></span><br><span class="line"><span class="comment">功    能：I2C起始数据</span></span><br><span class="line"><span class="comment">参    数：无</span></span><br><span class="line"><span class="comment">返回值  ：无</span></span><br><span class="line"><span class="comment">********************************************/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">IIC_Start</span><span class="params">(<span class="keyword">void</span>)</span>       </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">SDA_OUT();     <span class="comment">//sda线输出</span></span><br><span class="line">IIC_SDA=<span class="number">1</span>;    </span><br><span class="line">IIC_SCL=<span class="number">1</span>;</span><br><span class="line">delay_us(<span class="number">4</span>);</span><br><span class="line"> IIC_SDA=<span class="number">0</span>;     <span class="comment">//START:when CLK is high,DATA change form high to low </span></span><br><span class="line">delay_us(<span class="number">4</span>);</span><br><span class="line">IIC_SCL=<span class="number">0</span>;     <span class="comment">//钳住I2C总线，准备发送或接收数据 </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*******************************************</span></span><br><span class="line"><span class="comment">函数名称： IIC_Stop</span></span><br><span class="line"><span class="comment">功    能：I2C终止数据</span></span><br><span class="line"><span class="comment">参    数：无</span></span><br><span class="line"><span class="comment">返回值  ：无</span></span><br><span class="line"><span class="comment">********************************************/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">IIC_Stop</span><span class="params">(<span class="keyword">void</span>)</span>   </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">SDA_OUT();     <span class="comment">//sda线输出</span></span><br><span class="line">IIC_SCL=<span class="number">0</span>;</span><br><span class="line">IIC_SDA=<span class="number">0</span>;     <span class="comment">//STOP:when CLK is high DATA change form low to high</span></span><br><span class="line"> delay_us(<span class="number">4</span>);</span><br><span class="line">IIC_SCL=<span class="number">1</span>; </span><br><span class="line">IIC_SDA=<span class="number">1</span>;     <span class="comment">//发送I2C总线结束信号</span></span><br><span class="line">delay_us(<span class="number">4</span>);   </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="发送数据与读数据："><a href="#发送数据与读数据：" class="headerlink" title="发送数据与读数据："></a>发送数据与读数据：</h3><p><img src="https://images2017.cnblogs.com/blog/1309643/201801/1309643-20180129203859187-1169903857.png" alt="img"></p><p>由图可知：</p><p>发送一个字节：</p><pre><code>1. 开始信号   2. SCL，SDA为输出模式   3. **SCL拉低**，准备数据传输   4. SDA电平变化后（最高位为1则拉高，为0则拉低）   5. 拉高SCL后，再拉低（等于发送）   6. 发送数据（**最高位先发送**），循环8次（**一个字节**）</code></pre><p>接收一个字节： </p><pre><code>2. 开始信号   2. SDA为输入模式   3. **SCL拉低**   4. 等待SDA电平发生变化   5. 拉高SCL后，再拉低（等于接收）   6. 接收8次（**一个字节**），最高位开始接收。</code></pre><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*******************************************</span></span><br><span class="line"><span class="comment">函数名称： IIC_Send_Byte</span></span><br><span class="line"><span class="comment">功    能：I2C发送数据</span></span><br><span class="line"><span class="comment">参    数：txd</span></span><br><span class="line"><span class="comment">返回值  ：txd</span></span><br><span class="line"><span class="comment">********************************************/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">IIC_Send_Byte</span><span class="params">(u8 txd)</span></span></span><br><span class="line"><span class="function"></span>&#123;                        </span><br><span class="line">    u8 t;   </span><br><span class="line">SDA_OUT();     </span><br><span class="line">    IIC_SCL=<span class="number">0</span>;<span class="comment">//拉低时钟开始数据传输</span></span><br><span class="line">    <span class="keyword">for</span>(t=<span class="number">0</span>;t&lt;<span class="number">8</span>;t++)</span><br><span class="line">    &#123;              </span><br><span class="line">        IIC_SDA=(txd&amp;<span class="number">0x80</span>)&gt;&gt;<span class="number">7</span>;</span><br><span class="line">        txd&lt;&lt;=<span class="number">1</span>;   </span><br><span class="line">delay_us(<span class="number">2</span>);   <span class="comment">//对TEA5767这三个延时都是必须的</span></span><br><span class="line">IIC_SCL=<span class="number">1</span>;</span><br><span class="line">delay_us(<span class="number">2</span>); </span><br><span class="line">IIC_SCL=<span class="number">0</span>;</span><br><span class="line">delay_us(<span class="number">2</span>);</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*******************************************</span></span><br><span class="line"><span class="comment">函数名称： IIC_Read_Byte</span></span><br><span class="line"><span class="comment">功    能：I2C接收数据</span></span><br><span class="line"><span class="comment">参    数：ack</span></span><br><span class="line"><span class="comment">返回值  ：ack</span></span><br><span class="line"><span class="comment">********************************************/</span></span><br><span class="line"><span class="function">u8 <span class="title">IIC_Read_Byte</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> ack)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> i, receive=<span class="number">0</span>;</span><br><span class="line">SDA_IN();<span class="comment">//SDA设置为输入</span></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++ )</span><br><span class="line">&#123;</span><br><span class="line">        IIC_SCL=<span class="number">0</span>; </span><br><span class="line">        delay_us(<span class="number">2</span>);</span><br><span class="line">IIC_SCL=<span class="number">1</span>;</span><br><span class="line">        receive&lt;&lt;=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(READ_SDA)  receive++;   </span><br><span class="line">delay_us(<span class="number">1</span>); </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">if</span> (!ack)</span><br><span class="line">        IIC_NAck();<span class="comment">//发送nACK</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        IIC_Ack(); <span class="comment">//发送ACK   </span></span><br><span class="line">    <span class="keyword">return</span> receive;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="主机应答信号与非应答信号："><a href="#主机应答信号与非应答信号：" class="headerlink" title="主机应答信号与非应答信号："></a>主机应答信号与非应答信号：</h3><p><img src="https://images2017.cnblogs.com/blog/1309643/201801/1309643-20180129210833937-2127679015.png" alt="img"></p><p>主机<strong>接收完从机数据</strong>后，要发送应答或者非应答信号。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*******************************************</span></span><br><span class="line"><span class="comment">函数名称： IIC_Ack</span></span><br><span class="line"><span class="comment">功    能：I2C发送应答信号</span></span><br><span class="line"><span class="comment">参    数：无</span></span><br><span class="line"><span class="comment">返回值  ：无</span></span><br><span class="line"><span class="comment">********************************************/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">IIC_Ack</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">IIC_SCL=<span class="number">0</span>;     <span class="comment">//SCL拉低，允许SDA改变电平</span></span><br><span class="line">SDA_OUT();     <span class="comment">//主机为接收端   发送应答信号</span></span><br><span class="line">IIC_SDA=<span class="number">0</span>;     <span class="comment">//SDA低电平为应答</span></span><br><span class="line">delay_us(<span class="number">2</span>);</span><br><span class="line">IIC_SCL=<span class="number">1</span>;</span><br><span class="line">delay_us(<span class="number">2</span>);</span><br><span class="line">IIC_SCL=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*******************************************</span></span><br><span class="line"><span class="comment">函数名称： IIC_NAck</span></span><br><span class="line"><span class="comment">功    能：I2C发送非应答信号</span></span><br><span class="line"><span class="comment">参    数：无</span></span><br><span class="line"><span class="comment">返回值  ：无</span></span><br><span class="line"><span class="comment">********************************************/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">IIC_NAck</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">IIC_SCL=<span class="number">0</span>;    <span class="comment">//SCL拉低，允许SDA改变电平</span></span><br><span class="line">SDA_OUT();    <span class="comment">//此时，相当于主机在接收数据，是被动方</span></span><br><span class="line">IIC_SDA=<span class="number">1</span>;    <span class="comment">//SDA高电平为非应答</span></span><br><span class="line">delay_us(<span class="number">2</span>);</span><br><span class="line">IIC_SCL=<span class="number">1</span>;</span><br><span class="line">delay_us(<span class="number">2</span>);</span><br><span class="line">IIC_SCL=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="主机接收从机应答信号："><a href="#主机接收从机应答信号：" class="headerlink" title="主机接收从机应答信号："></a>主机接收从机应答信号：</h3><p>IIC 总线协议规定，每传送一个字节数据后，都要有一个应答信号以确定数据传送是否被对方收到。应答信号由接受设备产生，在SCL为高电平期间，接受设备将SDA拉低为低电平，表示数据传输正确，产生应答（ACK）</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*******************************************</span></span><br><span class="line"><span class="comment">函数名称： IIC_Wait_Ack</span></span><br><span class="line"><span class="comment">功    能：I2C接收应答信号</span></span><br><span class="line"><span class="comment">参    数：无</span></span><br><span class="line"><span class="comment">返回值  ：返回值：1，接收应答失败</span></span><br><span class="line"><span class="comment">               0，接收应答成功</span></span><br><span class="line"><span class="comment">********************************************/</span></span><br><span class="line"><span class="function">u8 <span class="title">IIC_Wait_Ack</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">u8 ucErrTime=<span class="number">0</span>;</span><br><span class="line">SDA_IN();      <span class="comment">//SDA设置为输入  </span></span><br><span class="line">IIC_SDA=<span class="number">1</span>;delay_us(<span class="number">1</span>);   </span><br><span class="line">IIC_SCL=<span class="number">1</span>;delay_us(<span class="number">1</span>); </span><br><span class="line"><span class="keyword">while</span>(READ_SDA)</span><br><span class="line">&#123;</span><br><span class="line">ucErrTime++;</span><br><span class="line"><span class="keyword">if</span>(ucErrTime&gt;<span class="number">250</span>)</span><br><span class="line">&#123;</span><br><span class="line">IIC_Stop();</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">IIC_SCL=<span class="number">0</span>;<span class="comment">//时钟输出0    </span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Stm32 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Stm32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>学习使用DS3231</title>
      <link href="/2020/06/23/STM32/%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8DS3231/"/>
      <url>/2020/06/23/STM32/%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8DS3231/</url>
      
        <content type="html"><![CDATA[<h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>DS3231M是低成本、高精度<strong>I2C实时时钟</strong>(RTC)。该器件包含电池输入端，断开主电源时仍可保持精确计时。集成微机电系统(MEMS)提高了器件的长期精确度，并减少了生产线的元件数量。 DS3231M采用与流行的DS3231    RTC相同的器件封装。</p><p>RTC保存秒、分、时、星期、日期、月和年信息。少于31天的月份，将自动调整月末的日期，包括<strong>闰年修正</strong>。时钟格式可以是24小时或带AM/PM指示的12小时格式。提供<strong>两个可设置的日历闹钟</strong>和<strong>一个1Hz输出</strong>。地址与数据通过I2C双向总线串行传输。精密的、经过温度补偿的电压基准和比较器电路用来监视VCC状态，检测电源故障，提供复位输出，并在必要时自动切换到备份电源。另外， RST监测引脚可以作为产生微处理器复位的按键输入，详细信息请参考方框图。  </p><a id="more"></a><ul><li><p><em>工作电压：2.3V – 5.5V</em></p></li><li><p><em>工作温度范围：0℃ - 70℃（商用级），-40℃ - 85℃（工业级）</em></p></li><li><p><em>0℃ - 40℃精度为±2ppm</em></p></li><li><p><em>-40℃ - 85℃精度为±3.5ppm</em> </p></li></ul><p>DS3231是一个可以提供时间信息的模块，支持I2C协议。 </p><p>买回来的模块留出了6个引脚，其功能描述如下：</p><ul><li><p>VCC:外部电源供电(5V) GND:外部电源回路 </p></li><li><p>SCL:I2C通信引脚 </p></li><li><p>SDA:I2C通信引脚 </p></li><li><p>SQW:中断信号或特殊信号输出 32K:32K信号输出 从商家给的原理图可以看出，SQW被接在了DS3231芯片的int引脚 </p></li><li><p>32K是32kHz</p></li></ul><p>  <img src="http://qcev8hlsw.bkt.clouddn.com//20200629160110.png" alt=""></p><p>  技术手册上对这两个引脚的描述如下：<img src="https://rosskang.github.io/images/working/32KHZ.png" alt="Image text"><img src="https://rosskang.github.io/images/working/SQW.png" alt="Image text"></p><p>  之后这个闹钟的功能可能会被用到。</p><h1 id="内部结构"><a href="#内部结构" class="headerlink" title="内部结构"></a>内部结构</h1><blockquote><p> <a href="https://www.cnblogs.com/wxz1995/p/8306381.html" target="_blank" rel="noopener">DS3231的使用（一）</a></p></blockquote><p>引脚图</p><p><img src="https://images2017.cnblogs.com/blog/1309643/201801/1309643-20180117214746396-1367917457.png" alt="img"></p><p><strong>VCC</strong>为电源引脚；</p><p><strong>INT/SQW</strong>为低电平有效中断或方波输出：是低电平有效复位引脚；</p><p><strong>N.C.</strong>表示无连接，外部必须接地；</p><p><strong>GND</strong>为地；</p><p><strong>VBAT</strong>为备用电源输入；</p><p><strong>SDA</strong>为串行数据输入输出；</p><p><strong>SCL</strong>为串行时钟输入。</p><h2 id="内部结构图"><a href="#内部结构图" class="headerlink" title="内部结构图"></a>内部结构图</h2><p><img src="https://images2017.cnblogs.com/blog/1309643/201801/1309643-20180117215000599-761655826.png" alt="img"></p><h4 id="32-kHz的TCXO"><a href="#32-kHz的TCXO" class="headerlink" title="32 kHz的TCXO"></a>32 kHz的TCXO</h4><p>TCXO包括温度传感器、振荡器和控制逻辑。控制器读取片上温度传感器输出，使用查表法确定所需的电容，加上AGE寄存器的老化修正。然后设置电容选择寄存器。仅在温度变化或者用户启动的温度转换完成时，才加载包括AGE寄存器变化的新值。VCC初次上电时就会读取温度值，然后每隔64 s读取一次。</p><h4 id="DS3231的电源控制"><a href="#DS3231的电源控制" class="headerlink" title="DS3231的电源控制"></a>DS3231的电源控制</h4><p>电源控制功能由温度补偿电压基准(VPF)和监视VCC电平的比较器电路提供。当VCC高于VPF时，DS3231由VCC供电，当VCC低于VPF但高于VBAT时，DS3231由VCC供电；当VCC低于VPF并低于VBAT时，DS3231由VBAT供电。为保护电池，VBAT首次加到器件时振荡器并不启动，除非加载VCC，或者向器件写入一个有效的I2C地址。典型的振荡器启动时间在1 s以内。在VCC加电后或者有效的I2C地址写入后大约2 s，器件会测量一次温度，并使用计算的修正值校准振荡器。一旦振荡器运行，只要电源(VCC或者VBAT)有效就会一直保持工作状态。器件每隔64 s进行一次温度测量并校准振荡器频率。</p><h4 id="DS3231的时钟和日历RTC"><a href="#DS3231的时钟和日历RTC" class="headerlink" title="DS3231的时钟和日历RTC"></a>DS3231的时钟和日历RTC</h4><p>可以通过读取适当的寄存器字节获得时钟和日历信息。通过写入适当的寄存器字节设定或者初始化时钟和日历数据。时钟和日历寄存器的内容采用二-十进制编码(BCD)格式。DS3231运行于12小时或者24小时模式。小时寄存器的第6位定义为12或24小时模式选择位。该位为高时，选择12小时模式。在12小时模式下，第5位为AM／PM指示位，逻辑高时为PM。</p><h4 id="DS3231的复位按钮"><a href="#DS3231的复位按钮" class="headerlink" title="DS3231的复位按钮"></a>DS3231的复位按钮</h4><p>DS3231具有连接至RST输出引脚的按钮开关功能。若DS3231不在复位周期，会持续监视RST信号的下降沿。如果检测到一个边沿转换，DS3231通过拉低RST完成开关去抖。内部定时器定时结束后，DS3231继续监视RST信号。如果信号依旧保持低电平，DS3231持续监视信号线以检测上升沿。一旦检测到按钮释放，DS3231强制RST为低电平并保持tRST。RST还可用于指示电源故障报警情况。当VCC低于VPF时，产生内部电源故障报警信号，并强制拉低RST引脚。当VCC返回至超过VPF电平时。RST保持低电平大约250 ms(tREC)，使供电电源达到稳定。如果在VCC加载时，振荡器不工作，将跳过tREC，RST立刻变为高电平。</p><h4 id="DS3231的闹钟和报警功能"><a href="#DS3231的闹钟和报警功能" class="headerlink" title="DS3231的闹钟和报警功能"></a>DS3231的闹钟和报警功能</h4><p>DS3231包含2个定时／日期闹钟。闹钟1可通过写入寄存器07h～0Ah设定。闹钟2可通过写入寄存器0Bh～0Dh设定。可对闹钟进行编程(通过控制寄存器的闹钟使能位和INTCN位)，从而在闹钟匹配条件下触发INT／SQW输出。每个定时／日期闹钟寄存器的第7位是屏蔽位。当每个闹钟的屏蔽位均为逻辑0时，只有当计时寄存器中的值与存储于定时／日期闹钟寄存器中的对应值相匹配时才会告警。闹钟也可以编程为每秒、分、时、星期或日期重复告警。当RTC寄存器值与闹钟寄存器的设定值相匹配时，相应的闹钟标志位A1F或A2F置为逻辑1。如果对应的闹钟中断使能位A1IE或A2IE也置为逻辑1，并且INTCN位置为逻辑1，闹钟条件将会触发INT／SQW信号。RTC在时间和日期寄存器每秒更新时都会检测匹配情况。</p><h4 id="DS3231的控制寄存器及功能"><a href="#DS3231的控制寄存器及功能" class="headerlink" title="DS3231的控制寄存器及功能"></a>DS3231的控制寄存器及功能</h4><p><img src="https://images2017.cnblogs.com/blog/1309643/201801/1309643-20180117215429740-564178968.png" alt="img"></p><ul><li>BIT7位：使能振荡器(EOEC)。设定为逻辑0时，启动振荡器。如果设定为逻辑1，在DS3231电源切换至VBAT时，振荡器停止。初次上电时该位清零 (逻辑0) 。当DS3231由VCC供电时，振荡器与EOSC位的状态无关，始终保持工作状态。</li></ul><ul><li>BIT6位：电池备份的方波使能(BBSOW)。当设定为逻辑1并且DS3231由VBAT引脚供电时，在没有加载VCC的情况下，该位使能方波输出。当BB-SQW设定为逻辑0时，若VCC降至低于电源故障门限值，则INT／SQW引脚变为高阻抗。初次上电时，该位清零(逻辑0)。</li></ul><ul><li>BIT5位：转换温度(CONV)。该位置为1时，强制温度传感器将温度转换成数字，并执行TCXO算法更新振荡器的电容阵列。只在空闲期间有效。状态位BSY=1时，禁止设定转换温度位。用户在强制控制器开始新的TCXO操作之前。应检查状态位BSY。用户启动的温度转换不影响内部64 s更新周期。用户启动的温度转换在大约2 ms内不会影响BSY位。CONV位从写入开始直到转换完成一直保持为1，转换完后，CONV和BSY均变为0。在监视用户启动转换状态时，应使用CONV位。</li></ul><ul><li>BIT4和BIT3位：频率选择(RS2和RS1)，初次上电时，BIT4和BIT3设置为逻辑1。方波使能时用于控制方波输出的频率。RS1、RS2的逻辑值与方波输出频率的关系如表所列。</li></ul><p><img src="https://images2017.cnblogs.com/blog/1309643/201801/1309643-20180117215601818-1637155768.png" alt="img"></p><ul><li>BIT2位：中断控制(INTCN)。该位控制INT／SQW信号。INTCN置为0时，INT／SQW引脚输出方波；INTCN置为1时，若计时寄存器与任一个闹钟寄存器相匹配，则会触发INT／SQW信号(如果也使能闹钟的话)。匹配时相应的闹钟标志总是置位，而与INTCN位的状态无关。初次上电时，INTCN位置为逻辑1。</li></ul><ul><li>BIT1位：闹钟2中断使能(A2IE)。该位置为逻辑1时，允许状态寄存器中的闹钟2标志位(A2F)触发INT／SQW信号(当INTCN=1时)。当A2IE位置为0或者INTCN置为0时，A2F位不启动中断信号。初次上电时，A2IE位清零(逻辑0)。</li></ul><ul><li>BIT0位：闹钟1中断使能(A1IE)。该位置为逻辑1时，允许状态寄存器中的闹钟1标志位(A1F)触发INT／SQW信号(当INTCN=1时)。当A1IE位置为0或者INTCN置为0时，A1F位不启动INT／SQW信号。初次上电时，A1IE位清零(逻辑0)。</li></ul><h1 id="IIC的使用及源码实现"><a href="#IIC的使用及源码实现" class="headerlink" title="IIC的使用及源码实现"></a>IIC的使用及源码实现</h1><blockquote><p><strong><a href="[http://nepqiu.com/2020/06/23/IIC%E5%AD%A6%E4%B9%A0/](http://nepqiu.com/2020/06/23/IIC学习/)">看这里</a></strong></p></blockquote><h3 id="DS3231实现："><a href="#DS3231实现：" class="headerlink" title="DS3231实现："></a>DS3231实现：</h3><h4 id="BCD码"><a href="#BCD码" class="headerlink" title="BCD码"></a>BCD码</h4><blockquote><p> 采用BCD码，既可保存数值的精确度，又可免去使计算机作浮点运算时所耗费的时间。此外，对于其他需要高精确度的计算，BCD编码亦很常用。 </p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//BCD转换为Byte</span></span><br><span class="line"><span class="function">u8 <span class="title">BCD2_Hex</span><span class="params">(u8 val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">u8 temp;</span><br><span class="line">temp = val &amp; <span class="number">0x0f</span>;</span><br><span class="line">val&gt;&gt;= <span class="number">4</span>;</span><br><span class="line">val &amp;= <span class="number">0x0f</span>;</span><br><span class="line">val *= <span class="number">10</span>;</span><br><span class="line">temp+= val;</span><br><span class="line"><span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Byte转换为BCD</span></span><br><span class="line"><span class="function">u8 <span class="title">HEX2_Bcd</span><span class="params">(u8 val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">u8 i,j,k;</span><br><span class="line">i = val/<span class="number">10</span>;</span><br><span class="line">j = val%<span class="number">10</span>;</span><br><span class="line">k = j+(i&lt;&lt;<span class="number">4</span>);</span><br><span class="line"><span class="keyword">return</span> k;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="DS3231传输时序图："><a href="#DS3231传输时序图：" class="headerlink" title="DS3231传输时序图："></a>DS3231传输时序图：</h4><p><img src="https://images2017.cnblogs.com/blog/1309643/201801/1309643-20180129211822421-288257006.png" alt="img"></p><p>由图可知，在发送开始信号后，DS3231接收的第一个字节的前7位是从机地址，即DS3231地址，第八位为读/写操作。</p><p> <img src="https://images2017.cnblogs.com/blog/1309643/201801/1309643-20180130204721843-1129628838.png" alt="img"></p><p><img src="https://images2017.cnblogs.com/blog/1309643/201801/1309643-20180130204918765-1007538508.png" alt="img"></p><p><img src="https://images2017.cnblogs.com/blog/1309643/201801/1309643-20180130210210625-1249616586.png" alt="img"></p><p>从DS3231的数据手册中可以看出来，DS3231的地址为1101000，所以主机操作的写地址为0XD1，读地址为0XD0。（不要写反）读寄存器指针的方式是开始信号-写器件地址-写寄存器地址-开始信号-接收数据-停止。</p><h4 id="读写命令"><a href="#读写命令" class="headerlink" title="读写命令"></a>读写命令</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 指定地址写数据/命令 */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DS3231_Write_Byte</span><span class="params">(u8 addr,u8 dat)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">IIC_Start();</span><br><span class="line">delay_us(<span class="number">5</span>);</span><br><span class="line">IIC_Send_Byte(DS3231_WRITE_ADDRESS);</span><br><span class="line">IIC_Wait_Ack();</span><br><span class="line">delay_us(<span class="number">5</span>);</span><br><span class="line">IIC_Send_Byte(addr);</span><br><span class="line">IIC_Wait_Ack();</span><br><span class="line">delay_us(<span class="number">5</span>);</span><br><span class="line">IIC_Send_Byte(dat);</span><br><span class="line">IIC_Wait_Ack();</span><br><span class="line">delay_us(<span class="number">5</span>);</span><br><span class="line">IIC_Stop();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 指定地址读数据/命令 */</span></span><br><span class="line"><span class="function">u8 <span class="title">DS3231_Read_Byte</span><span class="params">(u8 addr)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">u8 Dat = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">IIC_Start();</span><br><span class="line">IIC_Send_Byte(DS3231_WRITE_ADDRESS);</span><br><span class="line">IIC_Wait_Ack();</span><br><span class="line"><span class="comment">//delay_us(5);</span></span><br><span class="line">IIC_Send_Byte(addr);</span><br><span class="line">IIC_Wait_Ack();</span><br><span class="line">delay_us(<span class="number">5</span>);</span><br><span class="line">IIC_Start();</span><br><span class="line">IIC_Send_Byte(DS3231_READ_ADDRESS);</span><br><span class="line">IIC_Wait_Ack();</span><br><span class="line"><span class="comment">//delay_us(5);</span></span><br><span class="line">Dat = IIC_Read_Byte(<span class="number">1</span>);</span><br><span class="line">IIC_Stop();</span><br><span class="line"><span class="keyword">return</span> Dat;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="获取和修改时间"><a href="#获取和修改时间" class="headerlink" title="获取和修改时间"></a>获取和修改时间</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 获取时间 */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DS3231_get_time</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">ds.w_year = DS3231_Read_Byte(<span class="number">0x06</span>);  <span class="comment">//年</span></span><br><span class="line">ds.w_year = BCD2_Hex(ds.w_year);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ds.w_month = DS3231_Read_Byte(<span class="number">0x05</span>);  <span class="comment">//月</span></span><br><span class="line">ds.w_month = BCD2_Hex(ds.w_month);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ds.w_date = DS3231_Read_Byte(<span class="number">0x04</span>);  <span class="comment">//日</span></span><br><span class="line">ds.w_date = BCD2_Hex(ds.w_date);</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">ds.hour = DS3231_Read_Byte(<span class="number">0x02</span>);  <span class="comment">//时</span></span><br><span class="line">ds.hour &amp;= <span class="number">0x3f</span>;                   </span><br><span class="line">ds.hour = BCD2_Hex(ds.hour);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ds.<span class="built_in">min</span> = DS3231_Read_Byte(<span class="number">0x01</span>);  <span class="comment">//分</span></span><br><span class="line">ds.<span class="built_in">min</span> = BCD2_Hex(ds.<span class="built_in">min</span>);</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">ds.sec = DS3231_Read_Byte(<span class="number">0x00</span>);  <span class="comment">//秒</span></span><br><span class="line">ds.sec = BCD2_Hex(ds.sec);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 修改时间 */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DS3231_ModifyTime</span><span class="params">(u8 yea,u8 mon,u8 day,u8 hou,u8 <span class="built_in">min</span>,u8 sec)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">u8 temp = <span class="number">0</span>;</span><br><span class="line">temp = HEX2_Bcd(yea);</span><br><span class="line">DS3231_Write_Byte(DS3231_YEAR_REG, temp);   <span class="comment">//修改年</span></span><br><span class="line"></span><br><span class="line">temp = HEX2_Bcd(mon);</span><br><span class="line">DS3231_Write_Byte(DS3231_MONTH_REG, temp);  <span class="comment">//修改月</span></span><br><span class="line"></span><br><span class="line">temp = HEX2_Bcd(day);</span><br><span class="line">DS3231_Write_Byte(DS3231_MDAY_REG, temp);   <span class="comment">//修改日</span></span><br><span class="line"></span><br><span class="line">temp = HEX2_Bcd(hou);</span><br><span class="line">DS3231_Write_Byte(DS3231_HOUR_REG, temp);   <span class="comment">//修改时</span></span><br><span class="line"></span><br><span class="line">temp = HEX2_Bcd(<span class="built_in">min</span>);</span><br><span class="line">DS3231_Write_Byte(DS3231_MIN_REG, temp);    <span class="comment">//修改分        </span></span><br><span class="line"></span><br><span class="line">temp = HEX2_Bcd(sec);</span><br><span class="line">DS3231_Write_Byte(DS3231_SEC_REG, temp);    <span class="comment">//修改秒        </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="闹钟功能"><a href="#闹钟功能" class="headerlink" title="闹钟功能"></a>闹钟功能</h1><p>可以使能INT/SQW产生由闹钟条件决定的中断信号或 者1Hz方波信号，功能选择由控制寄存器中的INTCN位控制。</p><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200630235456.png" alt=""></p><p>该器件包含两个星期/日期闹钟。闹钟1可通过写入寄存器 07h至0Ah来设定。闹钟2可通过写入寄存器0Bh至0Dh来 设定，参见表2。可对闹钟进行编程(通过控制寄存器的闹 钟使能位和INTCN位)，从而在闹钟匹配条件下触发INT/ SQW输出。每个星期/日期闹钟寄存器的第7位是屏蔽位(表 2)。当每个闹钟的屏蔽位均为逻辑0时，闹钟只有在计时寄 存器中的值与存储于星期/日期闹钟寄存器的对应值相匹配 时才会告警。闹钟也可以编程为每秒、分、时、星期或日期 重复告警。</p><p>表3给出了可能的设置。如果不按照表中配置， 会导致不合逻辑的操作。DY/DT位(闹钟星期/日期寄存器的 第6位)用于控制存储于寄存器第0位至第5位的闹钟值是 反映星期几还是月份中的日期。如果DY/DT设为逻辑0，闹 钟将是与月份日期匹配的结果。如果DY/DT设为逻辑1，闹 钟则是与星期几匹配的结果。当RTC寄存器值与闹钟寄存器 的设定值相匹配时，相应的闹钟标志位A1F或A2F置为逻 辑1。如果对应的闹钟中断使能A1IE或A2IE位也设定为逻 辑1，并且INTCN位设定为逻辑1时，闹钟条件将会触发 INT/SQW信号。在时间和日期寄存器每秒更新时都会检测 匹配情况。</p><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200630235902.png" alt=""></p><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200701001800.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> Stm32 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Stm32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>制作像素钟</title>
      <link href="/2020/06/23/STM32/%E5%88%B6%E4%BD%9C%E5%83%8F%E7%B4%A0%E9%92%9F/"/>
      <url>/2020/06/23/STM32/%E5%88%B6%E4%BD%9C%E5%83%8F%E7%B4%A0%E9%92%9F/</url>
      
        <content type="html"><![CDATA[<h1 id="想法来源"><a href="#想法来源" class="headerlink" title="想法来源"></a>想法来源</h1><p>看到b站有类似的教程，是用树莓派和esp8266 d1 min来做的，于是想着能不能自己弄个stm32来当主控，利用wifi模块来控制像素钟。</p><a id="more"></a><h1 id="学习Esp8266"><a href="#学习Esp8266" class="headerlink" title="学习Esp8266"></a>学习Esp8266</h1><p>教程<a href="https://blog.csdn.net/XiaoCaiDaYong/article/details/82289276" target="_blank" rel="noopener">ESP8266 WIFI模块学习之路</a></p><h2 id="ESP-8266wifi模块获取网络实时时间"><a href="#ESP-8266wifi模块获取网络实时时间" class="headerlink" title="ESP-8266wifi模块获取网络实时时间"></a>ESP-8266wifi模块获取网络实时时间</h2><p>每天两次校准：</p><ol><li>每天0点进行时间校准</li><li>开机进行校准</li></ol><p>wifi模块在联网的情况下，只需要访问：</p><blockquote><p><a href="http://www.beijing-time.org/time15.asp1" target="_blank" rel="noopener">http://www.beijing-time.org/time15.asp1</a></p></blockquote><p>这是一个获取网络实时时间的免费网址，就可以获取到网络时间，如：</p><blockquote><p>t0=new Date().getTime(); nyear=2017; nmonth=10; nday=9; nwday=1; nhrs=13; nmin=0; nsec=24;</p></blockquote><p>这以看出，现在是2017年10月9日星期一，13点0分24秒；</p><p>参考：<a href="https://blog.csdn.net/s592652578/article/details/42455973" target="_blank" rel="noopener">https://blog.csdn.net/s592652578/article/details/42455973</a></p><h2 id="ESP-8266wifi模块获取天气"><a href="#ESP-8266wifi模块获取天气" class="headerlink" title="ESP-8266wifi模块获取天气"></a>ESP-8266wifi模块获取天气</h2><h1 id="微信小程序"><a href="#微信小程序" class="headerlink" title="微信小程序"></a>微信小程序</h1><ol><li>SmartConfig 实现配网 ,小程序负责绑定</li><li>微信公众号点击按钮跳转网页,网页里面实现控制设备</li><li>小程序其中一个呢,直接打开网页,,就是和上面一样</li><li>直接用小程序的API实现MQTT,通信控制</li></ol><p><a href="https://www.jianshu.com/p/ff64584b0206" target="_blank" rel="noopener">https://www.jianshu.com/p/ff64584b0206</a></p><h1 id="WS2821B控制"><a href="#WS2821B控制" class="headerlink" title="WS2821B控制"></a>WS2821B控制</h1><blockquote><p><strong><a href="[http://nepqiu.com/2020/06/23/%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8WS2812B/](http://nepqiu.com/2020/06/23/学习使用WS2812B/)">看这里</a></strong></p></blockquote><h1 id="DS3231控制"><a href="#DS3231控制" class="headerlink" title="DS3231控制"></a>DS3231控制</h1><blockquote><p><strong><a href="[http://nepqiu.com/2020/06/23/%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8DS3231/](http://nepqiu.com/2020/06/23/学习使用DS3231/)">看这里</a></strong></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Stm32 </category>
          
          <category> 小项目 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Stm32 </tag>
            
            <tag> Esp8266 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>学习使用WS2812B</title>
      <link href="/2020/06/23/STM32/%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8WS2812B/"/>
      <url>/2020/06/23/STM32/%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8WS2812B/</url>
      
        <content type="html"><![CDATA[<blockquote><p>参考文章：</p><p>​    <a href="https://www.amobbs.com/thread-5670296-1-1.html" target="_blank" rel="noopener">stm32 驱动ws2812</a></p><p>​    <a href="https://www.myoschain.com/share/blog/131078716791980032" target="_blank" rel="noopener">WS2812灯珠的STM32驱动方式</a></p></blockquote><a id="more"></a><p>看一下WS2812灯珠的相关资料。</p><p><img src="http://bbs.eeworld.com.cn/data/attachment/forum/upload/image/20181023/1540258869666808.jpg" alt="img"></p><p>以上照片来自某厂家官网的截图，可以看到同系列的LED型号还是不少的。尽管都是常见的5050封装，却由四脚与六脚之分，设计的时候一定要注意，<br>我们这次使用的是WS2812B。下面是有关这可灯珠的介绍。 </p><p>1.WS2812B灯珠介绍</p><p>1.1 WS2812B灯珠的主要特点</p><p><img src="http://bbs.eeworld.com.cn/data/attachment/forum/upload/image/20181023/1540258869429126.jpg" alt="img"></p><p>这张图是对这狂灯珠的一些基本介绍，例如电源可以串联共用，每个灯珠都自带信号整形电路，上电掉电复位电路，每颗灯珠都可以实现RGB256级控制，扫描频率400KHz，任意两点间通信距离不低于3米，至少可以级联1024颗，看起来这款灯珠就是专为LED灯带设计的。</p><p>1.2 WS2812B灯珠的电气特性</p><p><img src="http://bbs.eeworld.com.cn/data/attachment/forum/upload/image/20181023/1540258869946337.jpg" alt="img"></p><p>上面是关于这款灯带的一下电气参数，供电电压可以使最常用的5V电源，限号传输延迟很小，不过参数里有一点没提及，这款芯片内置了恒流驱动电路，<br>不但能保证灯珠颜色的良好一致，而且连限流电阻都可以省了。</p><p>WS2812B驱动方式：</p><ul><li>DMA+PWM</li><li>DMA+SPI</li><li>直接IO口控制</li></ul><p><a href="https://htmlcolorcodes.com/zh/yanse-xuanze-qi/" target="_blank" rel="noopener">3x256颜色选择器</a></p>]]></content>
      
      
      <categories>
          
          <category> Stm32 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Stm32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>test1</title>
      <link href="/2020/06/23/STM32/PlatformIO%20IDE(VSCode)%20%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"/>
      <url>/2020/06/23/STM32/PlatformIO%20IDE(VSCode)%20%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="PlatformIO-IDE-VSCode-基本使用"><a href="#PlatformIO-IDE-VSCode-基本使用" class="headerlink" title="PlatformIO IDE(VSCode) 基本使用"></a>PlatformIO IDE(VSCode) 基本使用</h1><blockquote><p> 参考文章：</p><p><a href="https://zhuanlan.zhihu.com/p/61589772" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/61589772</a></p><p><a href="https://zhuanlan.zhihu.com/p/78722930" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/78722930</a></p></blockquote><p>PlatformIO IDE (VSCode) 可以帮助我们更好地使用 PlatforIO，一个 MCU 项目的开始那就是新建，本文就讲解一下如果使用 PlatformIO IDE 新建一个 MCU 的项目。</p><a id="more"></a><h2 id="1-基本概念"><a href="#1-基本概念" class="headerlink" title="1. 基本概念"></a>1. 基本概念</h2><p>在使用 PlatformIO 的过程中经常会遇到一些词，比如 Platform 、 Framworks 以及 Boards，在新建项目之前有必要先说明一下，这些具体都代表了什么！</p><h3 id="1-1-Platform"><a href="#1-1-Platform" class="headerlink" title="1.1 Platform"></a>1.1 Platform</h3><p>直译的话就是 <strong>平台</strong>，具体就是指的芯片平台，再详细一点那就是各个公司具体的系列芯片的开发平台了。目前为止 PIO<a href="https://zhuanlan.zhihu.com/p/78722930#ref_1" target="_blank" rel="noopener">[1]</a> 针对支持的平台都有以下功能支撑：</p><ul><li>支持指定框架的基于脚本的编译构建系统</li><li>针对各公司常规开发板的预配置</li><li>提供多架构的构建工具及相关工具链的支持</li></ul><p>PIO 目前支持的平台分为嵌入式和桌面两大类。</p><ul><li><p>嵌入式平台</p></li><li><ul><li><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/platforms/aceinna_imu.html">Aceinna IMU</a></li><li><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/platforms/atmelavr.html">Atmel AVR</a></li><li><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/platforms/atmelsam.html">Atmel SAM</a></li><li><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/platforms/espressif32.html">Espressif 32</a></li><li><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/platforms/espressif8266.html">Espressif 8266</a></li><li><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/platforms/freescalekinetis.html">Freescale Kinetis</a></li><li><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/platforms/infineonxmc.html">Infineon XMC</a></li><li><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/platforms/intel_arc32.html">Intel ARC32</a></li><li><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/platforms/intel_mcs51.html">Intel MCS-51 (8051)</a></li><li><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/platforms/kendryte210.html">Kendryte K210</a></li><li><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/platforms/lattice_ice40.html">Lattice iCE40</a></li><li><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/platforms/maxim32.html">Maxim 32</a></li><li><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/platforms/microchippic32.html">Microchip PIC32</a></li><li><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/platforms/nordicnrf51.html">Nordic nRF51</a></li><li><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/platforms/nordicnrf52.html">Nordic nRF52</a></li><li><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/platforms/nxplpc.html">NXP LPC</a></li><li><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/platforms/riscv_gap.html">RISC-V GAP</a></li><li><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/platforms/samsung_artik.html">Samsung ARTIK</a></li><li><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/platforms/sifive.html">SiFive</a></li><li><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/platforms/siliconlabsefm32.html">Silicon Labs EFM32</a></li><li><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/platforms/ststm32.html">ST STM32</a></li><li><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/platforms/ststm8.html">ST STM8</a></li><li><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/platforms/teensy.html">Teensy</a></li><li><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/platforms/timsp430.html">TI MSP430</a></li><li><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/platforms/titiva.html">TI TIVA</a></li><li><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/platforms/wiznet7500.html">WIZNet W7500</a></li></ul></li><li><p>桌面平台</p></li><li><ul><li><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/platforms/native.html">Native</a></li><li><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/platforms/linux_arm.html">Linux ARM</a></li><li><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/platforms/linux_i686.html">Linux i686</a></li><li><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/platforms/linux_x86_64.html">Linux x86_64</a></li><li><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/platforms/windows_x86.html">Windows x86</a></li></ul></li></ul><p>上面也有前面文章中使用到的 ST STM32，Atmel AVR 一般指的就是 Arduino 系列开发板使用的芯片，说到 Arduino ，它其实就是一个完整的生态，提供开源的硬件开发板的设计以及 Arduino 统一的软件开发包就是所谓的 Frameworks。</p><h3 id="1-2-Frameworks"><a href="#1-2-Frameworks" class="headerlink" title="1.2 Frameworks"></a>1.2 Frameworks</h3><p>上面已经提到 Frameworks 其实就是类似于 SDK 的一个东西，全世界最有名的 Arduino 有自家的一套 SDK，那就是 Arduino，框架基本特征就是提供一整套一致的 API 的集合，本质是一个官方或第三方提供的软件库。</p><p>因为 Arduino 极具影响力，所以很多芯片平台也都有了自己的 Arduino 框架，现在 Arduino 框架平台支持的平台有很多：Atmel AVR、Atmel SAM、Espressif 32、Espressif 8266、Infineon XMC、Intel ARC32、Kendryte K210、Microchip PIC32、Nordic nRF51、Nordic nRF52、T STM32、ST STM8 、Teensy、TI MSP430 、TI TIVA <a href="https://zhuanlan.zhihu.com/p/78722930#ref_2" target="_blank" rel="noopener">[2]</a>。</p><p>反过来讲，一个平台有可能支持多个不同开发框架，比如 <strong>ST STM32</strong> 支持的开发框架有：Arduino、CMSIS、libOpenCM3、mbed、SPL、STM32Cube<a href="https://zhuanlan.zhihu.com/p/78722930#ref_3" target="_blank" rel="noopener">[3]</a>。</p><p>PIO 支持的框架也是有很多，总有适合你的：</p><ul><li>Arduino</li><li>ARTIK SDK</li><li>CMSIS</li><li>ESP8266 Non-OS SDK</li><li>ESP8266 RTOS SDK</li><li>ESP-IDF</li><li>Freedom E SDK</li><li>Kendryte FreeRTOS SDK</li><li>Kendryte Standalone SDK</li><li>libOpenCM3</li><li>mbed</li><li>PULP OS</li><li>Pumbaa</li><li>Simba</li><li>SPL</li><li>STM32Cube</li><li>Tizen RT</li><li>WiringPi</li></ul><p>详见：<a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/frameworks/index.html">https://docs.platformio.org/en/latest/frameworks/index.html</a></p><h3 id="1-3-Boards"><a href="#1-3-Boards" class="headerlink" title="1.3 Boards"></a>1.3 Boards</h3><p>PIO 支持绝大部分流行的开发板，比如 Arduino 的全系开发板、STM32 的 Nucleo 和 Discovery 系列评估板。有太多太多了，这里就没必要一一罗列了，可以查看下面的链接了解更多关于开发板的支持列表：</p><p><a href="https://link.zhihu.com/?target=https%3A//docs.platformio.org/en/latest/boards/index.html">https://docs.platformio.org/en/latest/boards/index.html</a></p><p>PIO 针对支持的开发板都提供完整的项目生成脚本，新建项目从未如此快捷和简单！</p><h2 id="platformio-IDE-简介"><a href="#platformio-IDE-简介" class="headerlink" title="platformio IDE 简介"></a>platformio IDE 简介</h2><p>重新打开安装好插件的 VS Code ，会看到左下角多了一个小房子logo样式的按钮，点击这个按钮就会打开 Platformio 主页：</p><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200712103818.png" alt=""></p><p>可以看到主页中最顶端包含了一个导航栏，有用的就是前进后退的按钮和账户相关的交互元素，整个主页其实是Platformio在本地开启了一个web应用（类似于一个简单的小网站），包含了Home、Account、Libraries、Boards、Platforms和Devices六个标签页，下面分别简单说明一下。</p><h3 id="Home-标签页"><a href="#Home-标签页" class="headerlink" title="Home 标签页"></a>Home 标签页</h3><p>进入Platformio 的主页显示的就是 Home 标签页，标签页内从上到下可以依次看到以下内容：</p><ul><li><p><code>Show at startup</code> 的复选框，勾上后，每次启动 vs code 就会启动这个主页；</p></li><li><p><code>Quick Access</code> 下有四个操作按钮，分别是：</p></li><li><ul><li><strong>New Project</strong>：用于新建工程；</li><li><strong>Import Arduino Project</strong>：用于导入电脑中已经存在的 Arduino 工程；</li><li><strong>Open Project</strong>：用于打开已经存在的 Platformio 工程；</li><li><strong>Project Examples</strong>：用于打开本机已经安装的单片机平台的例程工程；</li></ul></li><li><p><code>Recent News</code>：显示最新 Platformio 信息；</p></li></ul><h3 id="Account-标签页"><a href="#Account-标签页" class="headerlink" title="Account 标签页"></a>Account 标签页</h3><p>这个标签页用于管理账户信息，首次打开的时候，是用户登录页面，当登录已有的 Platformio 账户后，就会显示用户信息和密码的相关操作，这里就不细讲了！</p><h3 id="Libraries-标签页"><a href="#Libraries-标签页" class="headerlink" title="Libraries 标签页"></a>Libraries 标签页</h3><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200712103829.png" alt=""></p><p>Libraries 标签页是管理库的接口，这里只简单说明一下，后面如果有时间就写一篇文章详细讲解一下库管理。主要包含四个标签页：</p><ol><li>Registry 标签页<br>这个页面是有一个搜索框，搜索框内没有内容的时候，会在搜索框下面显示所有可用的库，搜索框中输入关键词就会过滤显示相关的库。<br>点击想要安装的库，就会进入这个库的详细页面，这个页面里有安装按钮、例程、使用方法等操作接口。</li><li>Installed 标签页<br>这里主要展示本机已经安装的第三方库。</li><li>Built-in 标签页<br>这里显示已安装平台内置的库。</li><li>Updates 标签页<br>展示需要更新的库。</li></ol><h3 id="Boards-标签页"><a href="#Boards-标签页" class="headerlink" title="Boards 标签页"></a>Boards 标签页</h3><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200712103850.png" alt=""></p><p>这个标签页用来展示 Platformio 支持的开发板列表，最上方的搜索框内可以输入关键词过滤显示相关的开发板，比如输入 <strong>Arduino</strong> 就会显示Arduino的开发板。</p><p>列表中每个条目显示一个开发板，包含信息：</p><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200712103859.png" alt=""></p><h3 id="Platforms-标签页"><a href="#Platforms-标签页" class="headerlink" title="Platforms 标签页"></a>Platforms 标签页</h3><p>这个标签页用来管理平台支持，比如我的这里安装了两个单片机平台的支持：</p><ul><li>Atmel AVR</li><li>ST STM32</li></ul><p>这两个条目可以点进去查看平台详细信息和对平台进行一定操作。标签页内还包含所有的嵌入式、桌面平台的相关管理项，同时也有框架展示的标签页，可以通过这里的每个条目了解对应框架的信息和使用方法。</p><h3 id="Devices-标签页"><a href="#Devices-标签页" class="headerlink" title="Devices 标签页"></a>Devices 标签页</h3><p>这里显示连接电脑的硬件设备，比如串口、数字逻辑设备和网络设备。</p><h2 id="使用-Platformio-IDE"><a href="#使用-Platformio-IDE" class="headerlink" title="使用 Platformio IDE"></a>使用 Platformio IDE</h2><p>这里以创建 ST STM32 平台的 stm32f103c8t6 芯片工程为例，讲解一下工程的基本使用方法。</p><h3 id="新建工程"><a href="#新建工程" class="headerlink" title="新建工程"></a>新建工程</h3><ol><li>打开 Platformio 的主页，点击 <code>New Projects</code>；</li><li>在工程新建窗口中，配置如下创建名为 <strong>blink</strong> 的工程：</li></ol><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200712103910.png" alt=""></p><p>最后点击 <strong>Finish</strong> ，等待片刻工程就会创建完成。<br>这里暂时选择使用框架为 <code>Arduino</code>，stm32还可以选择其它框架，这里先挖个坑，等有时间专门写一下针对stm32其它框架的使用。</p><h3 id="工程界面介绍"><a href="#工程界面介绍" class="headerlink" title="工程界面介绍"></a>工程界面介绍</h3><p>新建工程后，就会打开相应的工程，如下图所示：</p><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200712103921.png" alt=""></p><h3 id="文件结构"><a href="#文件结构" class="headerlink" title="文件结构"></a>文件结构</h3><p>窗口左侧默认显示的是资源管理器，这里可以看到文件结构。</p><ol><li><code>.pioenvs</code> 文件夹：存放编译产生的中间文件和最后生成的执行文件;</li><li><code>lib</code> 文件夹：存放库文件；</li><li><code>src</code> 文件夹：存放源文件，其内部默认生成名为 <code>main.cpp</code> 的源文件；</li><li><code>platformio.ini</code>：工程的配置文件</li></ol><h3 id="工具栏"><a href="#工具栏" class="headerlink" title="工具栏"></a>工具栏</h3><p>在工程窗口的左下方会看到多出来的一些按钮，这就是工程的工具栏：</p><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200712103929.png" alt=""></p><p>依次说明这几个快捷按钮的作用：</p><ol><li>主页按钮：前面已经提到过是打开 Platformio 主页的按钮</li><li>编译按钮：小对号，点击后会编译当前激活的工程</li><li>烧写按钮：向右的小箭头，触发程序烧写的过程</li><li>远程烧写按钮：小云朵，触发远程烧写程序的过程</li><li>清理按钮：小垃圾桶，用于清理编译过程生成的文件</li><li>测试按钮：小烧瓶，测试工程，免费版的Platformio受限不能用；</li><li>运行任务按钮：小本子，会跳出操作菜单，包含编译、烧写、调试等操作；</li><li>串口监视器按钮：小插头，点击后会启动命令行的串口监视助手；</li><li>终端按钮：小命令行，点击后新建一个终端窗口；</li></ol><h2 id="2-新建项目（arduino）"><a href="#2-新建项目（arduino）" class="headerlink" title="2. 新建项目（arduino）"></a>2. 新建项目（arduino）</h2><p>这里我们以新建一个 <strong>Arduino Leonardo</strong> 的项目为例。</p><ul><li>打开 PIO Home：打开新的 VSCode 的窗口，点击左下角状态栏的第三个小房子按钮，就能打开 PIO Home 页面了：</li></ul><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200712103102.png" alt=""></p><ul><li>点击项目操作按钮的 <strong>+ New Project</strong>，在弹窗中分别填入或选择 Name、Board、Framework 点击 Finish：</li></ul><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200712103118.png" alt=""></p><ul><li>稍作等待，PIO 会自动根据选择的 Board 和 Framework 配置工程并且下载需要用到的编译工具，需要的编译依赖什么的 PIO 通通帮我们搞定，一段时间过后项目工程就新建完成了，打开 <code>src</code> 文件夹下的 <code>main.cpp</code> 如下：</li></ul><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200712103127.png" alt=""></p><h2 id="3-项目文件结构"><a href="#3-项目文件结构" class="headerlink" title="3. 项目文件结构"></a>3. 项目文件结构</h2><p>项目文件结构要了解一下，方便后期自己手动管理项目。</p><ul><li><strong>.pio</strong>，存放工程编译产生的文件</li><li><strong>.vscode</strong>, 存放针对工程定制化的 vscode 配置文件</li><li><strong>include</strong>，存放统一管理的 h 头文件</li><li><strong>lib</strong>，存放自己编写的库文件</li><li><strong>src</strong>，存放工程项目的 C/C++ 源文件</li><li><strong>test</strong>，存放工程项目的测试文件，一般用不到</li><li><strong>.gitignore</strong>，git 仓库的忽略文件，方便 git 进行工程项目的版本控制</li><li><strong>travis.yml</strong>，持续集成的配置文件，一般用不到</li><li><strong>platformio.ini</strong>，项目的核心配置文件，这个会经常用到，所以得了解其中可用的配置项<a href="https://zhuanlan.zhihu.com/p/78722930#ref_4" target="_blank" rel="noopener">[4]</a></li></ul><h2 id="4-编译和上传"><a href="#4-编译和上传" class="headerlink" title="4. 编译和上传"></a>4. 编译和上传</h2><p>新建了项目工程之后，就是进行开发了，必然要用到编译代码，要将编译生成的二进制文件上传到开发板的芯片中。</p><p>为了看到效果，我们编写一段让板载 LED 闪动的实现：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Arduino.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// put your setup code here, to run once:</span></span><br><span class="line">  pinMode(LED_BUILTIN, OUTPUT);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// put your main code here, to run repeatedly:</span></span><br><span class="line">  digitalWrite(LED_BUILTIN, HIGH);</span><br><span class="line">  delay(<span class="number">1000</span>);</span><br><span class="line">  digitalWrite(LED_BUILTIN, LOW);</span><br><span class="line">  delay(<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这之前有必要了解一下 PIO 的工具栏按钮：</p><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200712103203.png" alt=""></p><p><strong>Tip:</strong></p><p>如果使用 Arduino 框架代码中，一定要包含头文件 <code>Arduino.h</code>。</p><h3 id="4-1-编译项目工程"><a href="#4-1-编译项目工程" class="headerlink" title="4.1 编译项目工程"></a>4.1 编译项目工程</h3><p>将上面的代码录入 <code>src</code> 目录下的 <code>main.cpp</code> 文件中，看文件名就知道使用的是 c++ 编程语言了。多种方式可以触发编译，比如笔者经常用的两种方式：</p><ul><li>点击上面截图底部中工具栏的第二个对号图标</li><li>按下组合键 <code>CTRL</code> + <code>ALT</code> + <code>B</code></li></ul><p>还有两种方式可以触发编译任务：</p><ul><li>按下组合键 <code>CTRL</code> + <code>SHIFT</code> + <code>P</code> (macOS 下是 <code>COMMAND</code> + <code>SHIFT</code> + <code>P</code>)，然后输入关键字 <strong>platformio</strong>，选择 <strong>Build</strong></li><li>点击窗口左边栏的蚂蚁头的图标会打开 PlatformIO 的工具栏，点击其中的 <strong>Build</strong></li></ul><p>顺利的话，触发了编译，很快就会在终端窗口提示编译完成：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&gt; Executing task: platformio run &lt;</span><br><span class="line"></span><br><span class="line">Processing leonardo (platform: atmelavr; board: leonardo; framework: arduino)</span><br><span class="line">------------------------------------------------------------------------------------</span><br><span class="line">Verbose mode can be enabled via `-v, --verbose` option</span><br><span class="line">CONFIGURATION: https://docs.platformio.org/page/boards/atmelavr/leonardo.html</span><br><span class="line">PLATFORM: Atmel AVR 1.15.0 &gt; Arduino Leonardo</span><br><span class="line">HARDWARE: ATMEGA32U4 16MHz, 2.50KB RAM, 28KB Flash</span><br><span class="line">PACKAGES: toolchain-atmelavr 1.50400.190710 (5.4.0), framework-arduinoavr 4.1.1</span><br><span class="line">LDF: Library Dependency Finder -&gt; http://bit.ly/configure-pio-ldf</span><br><span class="line">LDF Modes: Finder ~ chain, Compatibility ~ soft</span><br><span class="line">Found 7 compatible libraries</span><br><span class="line">Scanning dependencies...</span><br><span class="line">No dependencies</span><br><span class="line">Checking size .pio/build/leonardo/firmware.elf</span><br><span class="line">Memory Usage -&gt; http://bit.ly/pio-memory-usage</span><br><span class="line">DATA:    [=         ]   5.8% (used 149 bytes from 2560 bytes)</span><br><span class="line">PROGRAM: [=         ]  14.4% (used 4130 bytes from 28672 bytes)</span><br><span class="line">============================ [SUCCESS] Took 0.66 seconds ============================</span><br></pre></td></tr></table></figure><h3 id="4-2-上传"><a href="#4-2-上传" class="headerlink" title="4.2 上传"></a>4.2 上传</h3><p>先把手头的 Arduino Leonardo 开发板与电脑连接，直接触发上传任务即可，甚至不用自己去选择接口，PlatformIO 会自动查找与电脑连接的端口进行判断然后上传程序，笔者经常会用到的触发方式：</p><ul><li>组合键 <code>CTRL</code> + <code>ALT</code> + <code>U</code></li><li>点击窗口状态栏中 PIO 工具栏的第三个按钮<strong>→</strong></li></ul><p>第一次上传程序的时候，PIO 往往会先根据板子芯片对应的平台选择合适的上传工具包，所以第一次上传可能需要等一会儿，顺利的话也会在终端窗口看到 <strong>Sucess</strong> 的消息，同时会看到 Leonardo 板载 LED 开始闪烁：</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>PIO 让新建芯片开发的项目工程变得异常简单，只需几小步就可以完成，另外本文也简单说了一下程序的编译和上传操作，同样简单方便！希望本文能够帮助想要体会 PlatformIO 魅力的朋友！</p><p><strong>博客原文：</strong></p><p><a href="https://www.smslit.top/2019/08/18/platformio-newproject/" target="_blank" rel="noopener">https://www.smslit.top/2019/08/18/platformio-newproject/</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol><li><a href="https://zhuanlan.zhihu.com/p/78722930#ref_1_0" target="_blank" rel="noopener">^</a>PIO 是 PlatformIO 的简称，后面系列文章会经常使用这个简称</li><li><a href="https://zhuanlan.zhihu.com/p/78722930#ref_2_0" target="_blank" rel="noopener">^</a>更多关于 Arduino 框架的信息参考：<a href="https://docs.platformio.org/en/latest/frameworks/arduino.html" target="_blank" rel="noopener">https://docs.platformio.org/en/latest/frameworks/arduino.html</a></li><li><a href="https://zhuanlan.zhihu.com/p/78722930#ref_3_0" target="_blank" rel="noopener">^</a>更多关于 stm32 单片机开发平台的信息参考：<a href="https://docs.platformio.org/en/latest/platforms/ststm32.html" target="_blank" rel="noopener">https://docs.platformio.org/en/latest/platforms/ststm32.html</a></li><li><a href="https://zhuanlan.zhihu.com/p/78722930#ref_4_0" target="_blank" rel="noopener">^</a>PIO 是 PlatformIO 的简称，后面系列文章会经常使用这个简称</li></ol>]]></content>
      
      
      <categories>
          
          <category> Stm32 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Stm32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vscode开发stm32</title>
      <link href="/2020/06/23/STM32/vscode%E5%BC%80%E5%8F%91stm32/"/>
      <url>/2020/06/23/STM32/vscode%E5%BC%80%E5%8F%91stm32/</url>
      
        <content type="html"><![CDATA[<blockquote><p>转自：<a href="https://zhuanlan.zhihu.com/p/61519415" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/61519415</a></p></blockquote><blockquote><p>参考文章：</p><p><a href="https://blog.csdn.net/for_dream1205/article/details/97893066" target="_blank" rel="noopener">https://blog.csdn.net/for_dream1205/article/details/97893066</a></p><p><a href="https://blog.csdn.net/Attack_on_cc/article/details/105514735" target="_blank" rel="noopener">https://blog.csdn.net/Attack_on_cc/article/details/105514735</a></p></blockquote><h1 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h1><p>本文了搭建一个用<strong>VSCode + 开源 arm 工具链 + OpenOCD</strong>开发STM32的环境。此方案跨平台，Windows，linux，OSX都可以用。本文以Windows 10为例进行配置，在linux和macOS上的配置应该会更简单。</p><p>以下所有的路径都最好不要有中文。</p><a id="more"></a><h1 id="CubeMX"><a href="#CubeMX" class="headerlink" title="CubeMX"></a>CubeMX</h1><blockquote><p>转自：<a href="https://blog.csdn.net/ybhuangfugui/article/details/94363006" target="_blank" rel="noopener">https://blog.csdn.net/ybhuangfugui/article/details/94363006</a></p></blockquote><h3 id="安装HAL库"><a href="#安装HAL库" class="headerlink" title="安装HAL库"></a><strong>安装HAL库</strong></h3><p>HAL库，也可理解为软件包，有<strong>在线安装、离线安装</strong>两种方式。</p><h3 id="在线安装"><a href="#在线安装" class="headerlink" title="在线安装"></a><strong>在线安装</strong></h3><p>打开安装好的 STM32CubeMX 软件， 进入库管理界面（Help -&gt; Manage embedded…），会有一个列表， 勾选上你要安装的HAL库， 点击“Install Now” 直到安装成功。 如下图：</p><p><img src="https://pic2.zhimg.com/80/v2-964e284ce631d8cb3f56a8eb5c3e04d9_hd.jpg" alt="img"></p><p><img src="https://pic2.zhimg.com/80/v2-1b7ce9dff14ef4e2d0c30e4b4c9e6869_hd.jpg" alt="img"></p><p>这种方式比较简单，需要联网在线下载，可能需要等待一段时间。如果刷新之后，可以看到最新版本，以及一些老版本HAL库。</p><h3 id="离线安装"><a href="#离线安装" class="headerlink" title="离线安装"></a><strong>离线安装</strong></h3><p>离线安装的前提是需要下载好离线包，方法有两种：1.从库管理界面直接导入离线包。2.直接解压离线包到指定路径下。</p><p><strong>1.导入离线包</strong></p><p><img src="https://pic4.zhimg.com/80/v2-147a3111424cf66fc0abad717658bd3f_hd.jpg" alt="img"></p><p><strong>2.直接解压</strong> Help -&gt; Updater Settings得到HAL库路径</p><p><img src="https://pic1.zhimg.com/80/v2-5c811e3e49a03d708ff69860ba14ca34_hd.jpg" alt="img"></p><p>直接解压HAL库离线包，注意路径、文件夹名需一致：</p><p><img src="https://pic1.zhimg.com/80/v2-cfb66362af4e53c82d3d05ebae420e8c_hd.jpg" alt="img"></p><h1 id="vscode开发"><a href="#vscode开发" class="headerlink" title="vscode开发"></a>vscode开发</h1><h2 id="1-需要的软件和工具"><a href="#1-需要的软件和工具" class="headerlink" title="1.需要的软件和工具"></a>1.需要的软件和工具</h2><p>(1) <a href="https://link.zhihu.com/?target=http%3A//www.stm32cube.com/">STM32CubeMX</a>：用于生成带makefile的HAL库工程（给的链接是国内的论坛，因为官网下载太麻烦了还要注册账号）。注意STM32CubeMX是依赖Java的，所以要确保你电脑上安装了<a href="https://link.zhihu.com/?target=https%3A//www.oracle.com/java/technologies/javase-jre8-downloads.html">JRE</a>（Ubuntu用sudo apt install default-jre来安装）；</p><p>(2) <a href="https://link.zhihu.com/?target=https%3A//code.visualstudio.com/">VSCode</a>：很好用的编辑器，现在已经有64位的版本；</p><p>(3) <a href="https://link.zhihu.com/?target=https%3A//developer.arm.com/tools-and-software/open-source-software/developer-tools/gnu-toolchain/gnu-rm/downloads">GNU Arm Embedded Toolchain</a>：arm用的GNU工具链，包括编译器(gcc)，调试器(gdb），链接器(ld)和其它工具。</p><p>(4) <a href="https://link.zhihu.com/?target=https%3A//gnutoolchains.com/arm-eabi/openocd/">OpenOCD ( windows版 )</a>：一个开源的片上调试器(Open On-Chip Debugger)。linux可以直接 <code>apt install openocd</code>。</p><p>(5) <a href="https://link.zhihu.com/?target=https%3A//zadig.akeo.ie/">Zadig</a>：用来装USB驱动的，虽然Jlink插上就能装驱动，但是直接装的OpenOCD识别不到。<strong>Linux系统无视这条就行。</strong></p><p>(6) <a href="https://link.zhihu.com/?target=https%3A//git-scm.com/">Git</a>：git版本管理不用多介绍了吧，但是我们这里要使用的是下载git附带的git bash。这个bash是基于mingw的，非常轻量了，甚至于make都没有。但是问题不大，<strong>给git bash增加make，wget等工具的方法，见<a href="https://link.zhihu.com/?target=https%3A//blog.csdn.net/z69183787/article/details/96290717">这篇文章</a>。</strong></p><p>(7) <a href="https://releases.llvm.org/download.html" target="_blank" rel="noopener">下载安装LLVM</a>：<br>    LLVM能够对代码进行有效补全，可以理解为Clang。安装完毕后，需要手动添加环境变量。方法如下：右击电脑属性-高级系统设置-高级-环境变量-系统变量，打开变量path，添加C:\Program Files\LLVM\bin。</p><p>(8) <a href="https://gitforwindows.org/" target="_blank" rel="noopener">下载安装git for windows</a>：<br>    git for windows提供git的支持和MINGW64指令终端。下载安装完毕后，打开VSCode，在<code>.vscode</code>文件的<code>setting.json</code>文件下加入</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"terminal.integrated.automationShell.windows"</span>: <span class="string">"G:\\Git\\bin\\bash.exe"</span>,</span><br><span class="line">    <span class="attr">"terminal.integrated.shell.windows"</span>: <span class="string">"G:\\Git\\bin\\bash.exe"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这样就可以直接修改下面的终端为<code>git bash</code></p><p>或者也可以不修改<code>setting.json</code>文件直接，使用 <kbd>Ctrl</kbd> + <kbd>P</kbd> 输入<code>task</code>然后<code>空格</code>，启动<strong>“build”</strong>任务和<strong>“clean”</strong>任务</p><p>不使用mingw的原因是，mingw有时会安装失败，很烦。</p><p><strong>linux自带bash，不用管。</strong></p><h3 id="VSCode集成终端和Bash-Shell交互"><a href="#VSCode集成终端和Bash-Shell交互" class="headerlink" title="VSCode集成终端和Bash Shell交互"></a>VSCode集成终端和Bash Shell交互</h3><blockquote><p>转自：<a href="https://www.jianshu.com/p/4af5687fe58c" target="_blank" rel="noopener">https://www.jianshu.com/p/4af5687fe58c</a></p></blockquote><p>我这里会介绍有关如何让VSCode自带的命令行窗口和Bash脚本交互自动化地完成项目(调试前)的一些设置操作.例如版本控制和调试前的备份操作,重新初始化测试数据库等一系列操作,我们都可以通过Bash脚本或者Python脚本和VSCode交互来完成,阅读本文前.</p><ul><li>我假设你有基本的Bash脚本或者Python脚本编写能力</li><li>CMake的基本配置</li><li>熟悉VSCode的操作</li></ul><p>首先VSCode刚完成一个工程项目创建的话,在当前工作空间新建一个叫.vscode的文件夹并会自动生成三个json文件</p><p><img src="https://upload-images.jianshu.io/upload_images/16148197-f509f6dcbe0046c2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/466/format/webp" alt="img"></p><p>一个较为完善的工程项目结构</p><ul><li>c_cpp_properties.json:这是C/C++程序开发的环境设置,例如include头文件的设置.</li><li>launch.json:这个文件跟调试器或程序运行的设置有关</li><li>tasks.json: 这个文件项目的编译器的配置有关</li><li><strong>setting.json:这个文件跟当前工作空间的环境设置有关</strong></li></ul><p>我们这里的重点是讲述setting.json这个配置文档,因为这个配置与terminal.integrated有关,我们先打开settings.json这个文档</p><p><img src="https://upload-images.jianshu.io/upload_images/16148197-52800dbd62b7296b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/542/format/webp" alt="img"></p><p>2019-09-07 20-02-07屏幕截图.png</p><p>首先我们按照VSCode的帮助文档将以下命令copy到settings.json中然后保存即可.而我这里要解释的是这里配置指令,每当我们在VSCode打开集成的终端窗口,就会触发以下的配置指令.</p><blockquote><p>“terminal.integrated.shellArgs.linux”: [“-l”]</p></blockquote><p>这条这令所作的动作其实等价于以下bash的操作,如果在当前用户的配置目录下存在<strong>~/.bash_profile</strong>,它会加载bash_profile里面的脚本设置,并完成一个bash终端会话的环境设置.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;bin&#x2F;bash  -l</span><br></pre></td></tr></table></figure><h4 id="工程项目自动初始化"><a href="#工程项目自动初始化" class="headerlink" title="工程项目自动初始化"></a>工程项目自动初始化</h4><p>我们在C/C++项目中经常要用到CMake重建项目,那么我们可以在~/.bash_profile文件中,将平时经常执行的操作写成脚本条目,让我们启动一个终端会话的时候自动执行这些初始化设置.</p><p>下面的脚本写入~/.bash_profile文件,每次启动termimal窗口后会自动执行重定向到cmake指定的build目录,再将之前的cmake缓存的旧文件删除,然后再执行<strong>cmake ..</strong>和<strong>make</strong>命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PS1=<span class="string">'\u@it-dog:'</span></span><br><span class="line">PROJECT_PATH=<span class="string">""</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">"<span class="variable">$OSTYPE</span>"</span> == <span class="string">"linux-gnu"</span> ]]; <span class="keyword">then</span></span><br><span class="line">    PROJECT_PATH=<span class="string">"/media/yening/Seagate/cool"</span></span><br><span class="line"><span class="keyword">elif</span> [[ <span class="string">"<span class="variable">$OSTYPE</span>"</span> == <span class="string">"darwin"</span>* ]]; <span class="keyword">then</span></span><br><span class="line">    PROJECT_PATH=<span class="string">"/Volumes/Seagate/cool/"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">source</span> <span class="string">"<span class="variable">$PROJECT_PATH</span>/project.sh"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"camke开始重建工程...请稍等~~"</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"你确定删除?(Y/N)"</span> -n 1 -r</span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$REPLY</span> =~ ^[Yy]$ ]]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   rm -rf <span class="string">"<span class="variable">$&#123;PRJECT_PATH&#125;</span>/app/*"</span></span><br><span class="line">   cmake -DCMAKE_BUILD_TYPE=Debug  ..</span><br><span class="line">   make</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><p>项目根目录下的project.sh</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [[ <span class="string">"<span class="variable">$OSTYPE</span>"</span> == <span class="string">"linux-gnu"</span> ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">cd</span>  /media/yening/Seagate/cool/build</span><br><span class="line"><span class="keyword">elif</span> [[ <span class="string">"<span class="variable">$OSTYPE</span>"</span> == <span class="string">"darwin"</span>* ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">cd</span> /Volumes/Seagate/cool/build/</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><p>这里只是一个简单的案例,当然更复杂的开发应用我们可以往~/.bash_profile文件整合python脚本和git等工具,创建符合实际的开发环境.</p><h2 id="2-软件安装"><a href="#2-软件安装" class="headerlink" title="2.软件安装"></a>2.软件安装</h2><p>STM32CubeMX、ARM工具链、VS Code、Git都是安装包，一路next就行了。Zadig是免安装，就不说了。注意一下arm工具链安装时有个选项是把bin文件夹添加到系统Path环境变量。如果忘了勾选，后面手动加也可以。</p><p>OpenOCD还是推荐直接下载编译好的可执行文件，免得麻烦。Windows戳<a href="https://link.zhihu.com/?target=https%3A//gnutoolchains.com/arm-eabi/openocd/">&lt;这个链接&gt;</a>，linux直接<code>apt install openocd</code>。下载完后解压到C盘根目录或者别的任何你喜欢的地方。</p><h2 id="3-添加环境变量"><a href="#3-添加环境变量" class="headerlink" title="3.添加环境变量"></a>3.添加环境变量</h2><p>把Arm工具链安装目录下的bin文件夹和openOCD安装目录下的bin文件夹都添加到PATH环境变量中。添加环境变量的方法就不赘述了。linux也要加，但如果你的openocd是用apt-get装的，就不用加openocd的了。</p><p><img src="https://pic4.zhimg.com/80/v2-64fc67918156f15e1a0a82b973cebf53_720w.jpg" alt="img"></p><p>环境变量修改完毕后，需要<strong>重启电脑</strong>才能生效。然后打开Power Shell，输入：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arm-none-eabi-gcc --version</span><br></pre></td></tr></table></figure><p>和</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openocd --version</span><br></pre></td></tr></table></figure><p>可以看到版本信息，说明安装成功。</p><p>这两个命令也可以在git bash中运行：</p><p><img src="https://picb.zhimg.com/80/v2-9a7f61d4919851e5fa1b6e50ac920bd8_720w.jpg" alt="img"></p><p>【注】如果是Ubuntu系统，最好把gdb也试一下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arm-none-eabi-gdb -v</span><br></pre></td></tr></table></figure><p>如果出现了报错，说缺什么库就用apt装什么库：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#报错</span><br><span class="line">arm-none-eabi-gdb：error while loading shared libraries: </span><br><span class="line">libncurses.so.5: cannot open shared object file: No such file or directory</span><br><span class="line"></span><br><span class="line">#手动安装</span><br><span class="line">sudo apt install libncurses5</span><br></pre></td></tr></table></figure><p>能早在命令行发现的问题早解决。不然后面图形化运行，出了错都不知道为啥。</p><h2 id="4-使用Zadig修改J-link驱动（Linux无视这条）"><a href="#4-使用Zadig修改J-link驱动（Linux无视这条）" class="headerlink" title="4.使用Zadig修改J-link驱动（Linux无视这条）"></a>4.使用Zadig修改J-link驱动（Linux无视这条）</h2><p>当我们直接插上Jlink，自动安装完驱动后，打开设备管理器，是这样的：</p><p><img src="https://pic3.zhimg.com/80/v2-8a8efb4fc7a3c5eeabf27f40b4340d23_720w.jpg" alt="img"></p><p>我们在Keil中用的很好，但是它是“<strong>通用串行总线控制器</strong>”，OpenOCD识别不到。因此我们插上Jlink后，打开Zadig，选择Options—List All Devices，下拉菜单中选择J-link，然后在右侧选择WinUSB，点击Reinstall Driver。</p><p><img src="https://pic4.zhimg.com/80/v2-5337c4cc0075349d067fe4ccd17b85c2_720w.jpg" alt="img"></p><p>然后，打开设备管理器，就看到J-link从<strong>“通用串行总线控制器”</strong>变成了<strong>“通用串行总线设备”</strong>。这样就修改完成了。</p><p><img src="https://pic4.zhimg.com/80/v2-bc0ab81fe78b8242991a43ab100b26c7_720w.jpg" alt="img"></p><h1 id="配置文件-vscode"><a href="#配置文件-vscode" class="headerlink" title="配置文件.vscode"></a>配置文件<code>.vscode</code></h1><h2 id="c-cpp-properties-json文件"><a href="#c-cpp-properties-json文件" class="headerlink" title="c_cpp_properties.json文件"></a>c_cpp_properties.json文件</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"configurations"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Win32"</span>,</span><br><span class="line">            <span class="attr">"includePath"</span>: [</span><br><span class="line">                <span class="string">"$&#123;workspaceFolder&#125;/**"</span>,</span><br><span class="line">                <span class="string">"G:/GNU_ARM/9 2020-q2-update/lib/gcc/arm-none-eabi/9.3.1/include"</span>,</span><br><span class="line">                <span class="string">"G:/GNU_ARM/9 2020-q2-update/lib/gcc/arm-none-eabi/9.3.1"</span>,</span><br><span class="line">                <span class="string">"G:/GNU_ARM/9 2020-q2-update/lib/gcc/arm-none-eabi/9.3.1/include-fixed"</span>,</span><br><span class="line">                <span class="string">"Drivers/CMSIS/Include"</span>,</span><br><span class="line">                <span class="string">"Drivers/CMSIS/Device/ST/STM32F4xx/Include"</span>,</span><br><span class="line">                <span class="string">"Drivers/STM32F4xx_HAL_Driver/Inc"</span>,</span><br><span class="line">                <span class="string">"Drivers/STM32F4xx_HAL_Driver/Inc/Legacy"</span>,</span><br><span class="line">                <span class="string">"Drivers/STM32F4xx_HAL_Driver/Src"</span>,</span><br><span class="line">                <span class="string">"Inc"</span>,</span><br><span class="line">                <span class="string">"Src"</span></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">"defines"</span>: [</span><br><span class="line">                <span class="string">"_DEBUG"</span>,</span><br><span class="line">                <span class="string">"UNICODE"</span>,</span><br><span class="line">                <span class="string">"_UNICODE"</span>,</span><br><span class="line">                <span class="string">"USE_HAL_DRIVER"</span>,</span><br><span class="line">                <span class="string">"STM32F407xx"</span>  </span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">"compilerPath"</span>: <span class="string">"G:/GNU_ARM/9 2020-q2-update/bin/arm-none-eabi-gcc.exe"</span>,</span><br><span class="line">            <span class="attr">"intelliSenseMode"</span>: <span class="string">"gcc-x64"</span>,</span><br><span class="line">            <span class="attr">"browse"</span>: &#123;</span><br><span class="line">                <span class="attr">"limitSymbolsToIncludedHeaders"</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">"databaseFilename"</span>: <span class="string">""</span>,</span><br><span class="line">                <span class="attr">"path"</span>: [</span><br><span class="line">                    <span class="string">"$&#123;workspaceFolder&#125;"</span></span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"version"</span>: <span class="number">4</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>其中<code>includePath</code>中</li></ul><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200712234255.png" alt=""></p><p>值基本上不变</p><p>但是，</p><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200712234422.png" alt=""></p><p>这些值随使用的stm32芯片不一样需要改（查看文件夹）</p><ul><li>其中<code>define</code>中<code>STM32F407xx</code>的值随使用的stm32芯片不一样需要改，在下面这里查看</li></ul><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200712233816.png" alt=""></p><h2 id="launch-json文件"><a href="#launch-json文件" class="headerlink" title="launch.json文件"></a>launch.json文件</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"version"</span>: <span class="string">"0.2.0"</span>,</span><br><span class="line">    <span class="attr">"configurations"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"(gdb) 启动"</span>,<span class="comment">//配置名称；显示在启动配置下拉菜单中。</span></span><br><span class="line">            <span class="attr">"type"</span>: <span class="string">"cppdbg"</span>,   <span class="comment">//配置类型。</span></span><br><span class="line">            <span class="attr">"request"</span>: <span class="string">"launch"</span>,<span class="comment">//请求配置类型。可以是“启动”或“附加”。</span></span><br><span class="line">            <span class="attr">"program"</span>: <span class="string">"$&#123;workspaceFolder&#125;/build/$&#123;workspaceRootFolderName&#125;.elf"</span>,   <span class="comment">//需要运行的是当前打开文件的目录中/build/中的，</span></span><br><span class="line">                                                                                    <span class="comment">//名字和当前文件相同，但扩展名为elf的程序</span></span><br><span class="line">                                                                                    <span class="comment">//即程序可执行文件的完整路径。</span></span><br><span class="line">            <span class="attr">"args"</span>: [],<span class="comment">//传递给程序的命令行参数。</span></span><br><span class="line">            <span class="attr">"stopAtEntry"</span>: <span class="literal">false</span>,<span class="comment">//可选参数。如果为 true，则调试程序应在目标的入口点处停止。如果传递了 processId，则不起任何作用。</span></span><br><span class="line">            <span class="attr">"cwd"</span>: <span class="string">"$&#123;workspaceFolder&#125;"</span>,<span class="comment">//目标的工作目录</span></span><br><span class="line">            <span class="attr">"environment"</span>: [],<span class="comment">//要添加到程序环境的环境变量。示例: [ &#123; "name": "squid", "value": "clam" &#125; ]。</span></span><br><span class="line">            <span class="attr">"externalConsole"</span>: <span class="literal">false</span>,<span class="comment">//如果为 true，则为调试对象启动控制台。如果为 false，它在 Linux 和 Windows 上会显示在集成控制台中。</span></span><br><span class="line">            <span class="attr">"MIMode"</span>: <span class="string">"gdb"</span>,<span class="comment">//指示 MIDebugEngine 要连接到的控制台调试程序。允许的值为 "gdb"、"lldb"。</span></span><br><span class="line">            <span class="attr">"miDebuggerPath"</span>: <span class="string">"arm-none-eabi-gdb.exe"</span>,<span class="comment">//MI 调试程序(如 gdb)的路径。如果未指定，将首先在路径中搜索调试程序</span></span><br><span class="line">            <span class="attr">"setupCommands"</span>: [  <span class="comment">//为了安装基础调试程序而执行的一个或多个 GDB/LLDB 命令。</span></span><br><span class="line">                                <span class="comment">//示例: "setupCommands": [ </span></span><br><span class="line">                                <span class="comment">//&#123; "text": "-enable-pretty-printing", </span></span><br><span class="line">                                <span class="comment">//"description": "Enable GDB pretty printing",</span></span><br><span class="line">                                <span class="comment">// "ignoreFailures": true &#125;</span></span><br><span class="line">                                <span class="comment">//]</span></span><br><span class="line">                &#123;<span class="attr">"text"</span>: <span class="string">"cd $&#123;workspaceFolder&#125;/build"</span>&#125;,</span><br><span class="line">                &#123;<span class="attr">"text"</span>: <span class="string">"file $&#123;workspaceRootFolderName&#125;.elf"</span>&#125;,</span><br><span class="line">                &#123;<span class="attr">"text"</span>: <span class="string">"target remote localhost:3333"</span>&#125;,</span><br><span class="line">                &#123;<span class="attr">"text"</span>: <span class="string">"monitor reset"</span>&#125;,</span><br><span class="line">                &#123;<span class="attr">"text"</span>: <span class="string">"monitor halt"</span>&#125;,</span><br><span class="line">                &#123;<span class="attr">"text"</span>: <span class="string">"load"</span>&#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="tasks-json文件"><a href="#tasks-json文件" class="headerlink" title="tasks.json文件"></a>tasks.json文件</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="comment">// See https://go.microsoft.com/fwlink/?LinkId=733558</span></span><br><span class="line">    <span class="comment">// for the documentation about the tasks.json format</span></span><br><span class="line">        <span class="attr">"version"</span>: <span class="string">"2.0.0"</span>,</span><br><span class="line">        <span class="attr">"tasks"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"label"</span>: <span class="string">"build"</span>,</span><br><span class="line">                <span class="attr">"type"</span>: <span class="string">"shell"</span>,</span><br><span class="line">                <span class="attr">"command"</span>: <span class="string">"make"</span>,</span><br><span class="line">                <span class="attr">"args"</span>: [</span><br><span class="line">                    <span class="string">"-j4"</span></span><br><span class="line">                ] </span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"label"</span>: <span class="string">"clean"</span>,</span><br><span class="line">                <span class="attr">"type"</span>: <span class="string">"shell"</span>,</span><br><span class="line">                <span class="attr">"command"</span>: <span class="string">"make"</span>,</span><br><span class="line">                <span class="attr">"args"</span>: [</span><br><span class="line">                    <span class="string">"clean"</span></span><br><span class="line">                ] </span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="setting-json文件"><a href="#setting-json文件" class="headerlink" title="setting.json文件"></a>setting.json文件</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"terminal.integrated.automationShell.windows"</span>: <span class="string">"G:\\Git\\bin\\bash.exe"</span>,</span><br><span class="line">    <span class="attr">"terminal.integrated.shell.windows"</span>: <span class="string">"G:\\Git\\bin\\bash.exe"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="配置build文件"><a href="#配置build文件" class="headerlink" title="配置build文件"></a>配置build文件</h2><p>直接在终端里敲一个make，就会根据makefile的内容，在当前目录下创建一个build文件夹，在里面生成每个源文件生成的.o文件，以及最终链接得到的elf文件（用于调试），以及用于直接下载用的十六进制文件(.hex)和二进制文件(.bin)。编译成功的话看起来就像这样：</p><p>（在文件目录下右键，<code>Git Bash Here</code>，然后输入<code>make</code>）</p><p><img src="https://pic2.zhimg.com/80/v2-cd4cebbfd0cd2dd3eb7018ce87286967_720w.jpg" alt="img"></p><p><strong>【注】如果你没有看前一篇文章，git bash里没有make，可以从<a href="https://link.zhihu.com/?target=https%3A//blog.csdn.net/z69183787/article/details/96290717">这个链接</a>搞</strong></p><p>为了方便后面的操作，我们在.vscode目录下创建<strong>tasks.json</strong>文件(文件名里别少了s！)，内容如下：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="comment">// See https://go.microsoft.com/fwlink/?LinkId=733558</span></span><br><span class="line">    <span class="comment">// for the documentation about the tasks.json format</span></span><br><span class="line">        <span class="attr">"version"</span>: <span class="string">"2.0.0"</span>,</span><br><span class="line">        <span class="attr">"tasks"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"label"</span>: <span class="string">"build"</span>,</span><br><span class="line">                <span class="attr">"type"</span>: <span class="string">"shell"</span>,</span><br><span class="line">                <span class="attr">"command"</span>: <span class="string">"make"</span>,</span><br><span class="line">                <span class="attr">"args"</span>: [</span><br><span class="line">                    <span class="string">"-j4"</span></span><br><span class="line">                ] </span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"label"</span>: <span class="string">"clean"</span>,</span><br><span class="line">                <span class="attr">"type"</span>: <span class="string">"shell"</span>,</span><br><span class="line">                <span class="attr">"command"</span>: <span class="string">"make"</span>,</span><br><span class="line">                <span class="attr">"args"</span>: [</span><br><span class="line">                    <span class="string">"clean"</span></span><br><span class="line">                ] </span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个文件创建了两个任务，分别叫做build和clean:</p><ul><li><p>build任务就是在bash里执行了make -j4</p></li><li><p>clean任务就是在bash里执行了make clean。</p></li></ul><p>VS Code是可以给任务绑定快捷键的，具体就不介绍了，有兴趣可以自己搜索。</p><p>不使用快捷键而执行task的方法：按Ctrl + P，然后输入”task[空格]“，就会出现可用的任务列表。</p><h1 id="第一个版本配置"><a href="#第一个版本配置" class="headerlink" title="第一个版本配置"></a>第一个版本配置</h1><h2 id="配置文件openocd-cfg文件"><a href="#配置文件openocd-cfg文件" class="headerlink" title="配置文件openocd.cfg文件"></a>配置文件<code>openocd.cfg</code>文件</h2><p>直接在项目文件夹下新建一个openocd.cfg文件，内容如下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 选择调试器为jlink</span></span><br><span class="line"><span class="built_in">source</span> [find interface/jlink.cfg]</span><br><span class="line"><span class="comment">#source [find interface/cmsis-dap.cfg]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 选择接口为SWD</span></span><br><span class="line">transport select swd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 选择目标芯片</span></span><br><span class="line"><span class="built_in">source</span> [find target/stm32f4x.cfg]</span><br></pre></td></tr></table></figure><p>openocd启动时，会自动在当前目录下寻找名为openocd.cfg的文件作为配置文件。</p><p>本配置文件中引用到的其他配置文件，都在openocd安装目录下的share/openocd/scripts目录下。其中interface目录下都是接口相关配置文件、target目录下都是芯片相关的配置文件。</p><h2 id="下载svd文件"><a href="#下载svd文件" class="headerlink" title="下载svd文件"></a>下载svd文件</h2><p>在<a href="https://link.zhihu.com/?target=https%3A//github.com/posborne/cmsis-svd">&lt;这个链接&gt;</a>寻找STM32F4的svd文件。CMSIS-SVD是CMSIS的一个组件，它包含完整微控制器系统（包括外设）的程序员视图的系统视图描述 XML 文件。简单来说，<strong>VS Code可以通过它来知道外设寄存器的地址分布，从而把寄存器内容展示到窗口中</strong>。</p><p>下载好的STM32F407.svd文件放在项目文件夹根目录即可。</p><h2 id="配置VS-Code的调试功能"><a href="#配置VS-Code的调试功能" class="headerlink" title="配置VS Code的调试功能"></a>配置VS Code的调试功能</h2><p>在.vscode文件夹中新建一个launch.json，内容如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F; 使用 IntelliSense 了解相关属性。 </span><br><span class="line">    &#x2F;&#x2F; 悬停以查看现有属性的描述。</span><br><span class="line">    &#x2F;&#x2F; 欲了解更多信息，请访问: https:&#x2F;&#x2F;go.microsoft.com&#x2F;fwlink&#x2F;?linkid&#x3D;830387</span><br><span class="line">    &quot;version&quot;: &quot;0.2.0&quot;,</span><br><span class="line">    &quot;configurations&quot;: [</span><br><span class="line">        </span><br><span class="line">        &#123;</span><br><span class="line">            &quot;name&quot;: &quot;Cortex Debug&quot;,</span><br><span class="line">            &quot;cwd&quot;: &quot;$&#123;workspaceRoot&#125;&quot;,</span><br><span class="line">            &quot;executable&quot;: &quot;$&#123;workspaceRoot&#125;&#x2F;build&#x2F;$&#123;workspaceFolderBasename&#125;.elf&quot;,</span><br><span class="line">            &quot;request&quot;: &quot;launch&quot;,</span><br><span class="line">            &quot;type&quot;: &quot;cortex-debug&quot;,</span><br><span class="line">            </span><br><span class="line">            &quot;device&quot;:&quot;STM32F407VE&quot;,        &#x2F;&#x2F;使用J-link GDB Server时必须；其他GBD Server时可选（有可能帮助自动选择SVD文件）。支持的设备见 https:&#x2F;&#x2F;www.segger.com&#x2F;downloads&#x2F;supported-devices.php</span><br><span class="line">            &quot;svdFile&quot;: &quot;.&#x2F;STM32F407.svd&quot;,  &#x2F;&#x2F;svd文件，有这个文件才能查看寄存器的值，每个单片机都不同。可以在以下地址找到 https:&#x2F;&#x2F;github.com&#x2F;posborne&#x2F;cmsis-svd</span><br><span class="line">            &quot;servertype&quot;: &quot;openocd&quot;,       &#x2F;&#x2F;使用的GDB Server</span><br><span class="line">            &quot;configFiles&quot;: [                  </span><br><span class="line">                &quot;$&#123;workspaceRoot&#125;&#x2F;openocd.cfg&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;preLaunchTask&quot;: &quot;build&quot;</span><br><span class="line">            &quot;armToolchainPath&quot;: &quot;C:&#x2F;Program Files (x86)&#x2F;GNU Arm Embedded Toolchain&#x2F;9 2020-q2-update&#x2F;bin&#x2F;&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>解释几个重要选项：</p><ul><li>“executable”：编译出的二进制文件，也就是最终烧录到单片机中的，这里是elf文件。根据芯片的不同，可能产生不同的名称和后缀（例如TI的TM4C123芯片编译出来的名称是”main.axf”）</li><li>“request”：可以选launch或attach。launch是指启动调试时同时开始执行程序；attcah是指程序已经在运行了，然后开始调试。我没测试过attach。</li><li>“type”：调试的类型，选cortex-debug，这是我们装的插件。其实也可以填cppdbg之类的，但是那样我们就得自己配置gdb了，配置起来将会非常麻烦。</li><li>“device”：目标芯片。如果你使用J-LINK GDB Server时必须要设置这个选项。然而我们的GDB Server是openocd，J-Link只用来连接芯片。</li><li>“svdFile”：svd文件的路径。</li><li>“servertype”：要选择的gdb server。我们用openocd。</li><li>“configFiles”：gdb server的配置文件路径。其实openocd会自动读当前目录下的openocd.cfg文件，这个选项不填也行。但是如果你想把openocd.cfg放在别处，就可以用这个选项指定配置文件的路径。</li><li>“preLaunchTask”：在启动调试前，预先执行的任务。在这里我们设置为前一篇文章里配置的build任务。这样每次调试前都会先自动编译好</li><li>“armToolchainPath”：工具链的路径。配置了全局环境变量的情况下好像不设置也行。</li></ul><h2 id="测试使用"><a href="#测试使用" class="headerlink" title="测试使用"></a>测试使用</h2><p>保存以上所有文件后，目录结构应该是这样：</p><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200713130429.png" alt=""></p><p>直接按F5，或者左边的Debug按钮：</p><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200713130444.png" alt=""></p><p>点击运行：</p><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200713130611.png" alt=""></p><p>应该已经可以设置断点、单步执行和暂停了。</p><p>左边可以看到<strong>变量窗口、调用堆栈、断点、外设寄存器、CPU寄存器。</strong></p><h1 id="第二个版本配置"><a href="#第二个版本配置" class="headerlink" title="第二个版本配置"></a>第二个版本配置</h1><p>以stm32f103为例子：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="comment">// See https://go.microsoft.com/fwlink/?LinkId=733558</span></span><br><span class="line">    <span class="comment">// for the documentation about the tasks.json format</span></span><br><span class="line">        <span class="attr">"version"</span>: <span class="string">"2.0.0"</span>,</span><br><span class="line">        <span class="attr">"tasks"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"label"</span>: <span class="string">"build"</span>,</span><br><span class="line">                <span class="attr">"type"</span>: <span class="string">"shell"</span>,</span><br><span class="line">                <span class="attr">"command"</span>: <span class="string">"make"</span>,</span><br><span class="line">                <span class="attr">"args"</span>: [</span><br><span class="line">                    <span class="string">"-j4"</span></span><br><span class="line">                ] </span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"label"</span>: <span class="string">"clean"</span>,</span><br><span class="line">                <span class="attr">"type"</span>: <span class="string">"shell"</span>,</span><br><span class="line">                <span class="attr">"command"</span>: <span class="string">"make"</span>,</span><br><span class="line">                <span class="attr">"args"</span>: [</span><br><span class="line">                    <span class="string">"clean"</span></span><br><span class="line">                ] </span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"label"</span>: <span class="string">"启动调试下载器"</span>,</span><br><span class="line">                <span class="attr">"type"</span>: <span class="string">"shell"</span>,</span><br><span class="line">                <span class="attr">"command"</span>: <span class="string">"openocd -f interface/jlink.cfg -c 'transport select swd' -f target/stm32f1x.cfg"</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>编译——<code>make -j4</code>，这在文件路径下打开，右键，<code>Git Bash Here</code>，然后输入<code>make</code></li><li><kbd>Ctrl</kbd> + <kbd>P</kbd> 输入<code>task</code>然后<code>空格</code>，启动<strong>“启动调试下载器”</strong>任务</li></ol><h1 id="VScode编译C-，头文件显示not-found的解决方法"><a href="#VScode编译C-，头文件显示not-found的解决方法" class="headerlink" title="VScode编译C++，头文件显示not found的解决方法"></a>VScode编译C++，头文件显示not found的解决方法</h1><blockquote><p> 转自：<a href="https://blog.csdn.net/Q1410136042/article/details/83790967" target="_blank" rel="noopener">https://blog.csdn.net/Q1410136042/article/details/83790967</a></p></blockquote><p>这个问题解决方法是：</p><p>直接在<code>settings.json</code>文件下添加：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"clang.diagnostic.enable": false</span><br></pre></td></tr></table></figure><p><img src="C:%5CUsers%5Ccaihanyuan%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200716160605341.png" alt="image-20200716160605341"></p><h1 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h1><h2 id="Jlink-OB"><a href="#Jlink-OB" class="headerlink" title="Jlink OB"></a>Jlink OB</h2><p>通过<code>zadig-2.5</code>修改不了，也就是现在还用不了jlinkob+vscode</p><p>只能用jlink+vscode</p><p>（改错了可以参考这篇文章改回来：<a href="https://blog.csdn.net/whik1194/article/details/90582724）" target="_blank" rel="noopener">https://blog.csdn.net/whik1194/article/details/90582724）</a></p><h3 id="printf函数"><a href="#printf函数" class="headerlink" title="printf函数"></a><code>printf</code>函数</h3>]]></content>
      
      
      <categories>
          
          <category> Stm32 </category>
          
          <category> vsvode </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Stm32 </tag>
            
            <tag> vsvode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>学习之制作音乐频谱</title>
      <link href="/2020/06/23/STM32/%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E9%9F%B3%E4%B9%90%E9%A2%91%E8%B0%B1/"/>
      <url>/2020/06/23/STM32/%E5%AD%A6%E4%B9%A0%E5%88%B6%E4%BD%9C%E9%9F%B3%E4%B9%90%E9%A2%91%E8%B0%B1/</url>
      
        <content type="html"><![CDATA[<h1 id="整体思路："><a href="#整体思路：" class="headerlink" title="整体思路："></a>整体思路：</h1><blockquote><p>参考文章：</p><p><a href="https://blog.csdn.net/mc_li/article/details/81364766#commentsedit" target="_blank" rel="noopener">stm32f103+FFT+OLED的音乐频谱制作（干货 只需三步即可）</a></p><p><a href="https://blog.csdn.net/mc_li/article/details/88761087" target="_blank" rel="noopener">STM32F103+FFT+OLED25664的音乐频谱制作分享（继续干货）</a></p></blockquote><a id="more"></a><p>1.使用ADC采集音频信号</p><p>2.使用官方提供的FFT函数对采集到的信号进行处理</p><p>3.量化显示</p><p>前言：</p><p>在人耳能听到的频率范围（20-20KHz）中，各类乐器和人声的频率大部分在5KHz以下。主要是在0-5KHz这段频率的频谱变化明显一些，所以观赏性更好。故我们设置采样频率为10KHz（根据采样定理，采样频率要大于信号最大频率的两倍，才能保证不失真）来采集这0-5KHz的音频信号。显示是使用的OLED12864屏，分辨率为128*64，在x轴方向上最多显示128个点，所以我们把采样点数设置为256个点，因为FFT计算出来的数据是对称的，我们只取一半，128个点刚刚好。</p><p>采样频率：Fs = 10KHz</p><p>样本数量：NPT = 256</p><p>这两个参数是FFT计算时候要用到的。</p><p>深入研究FFT可参考这位大大的博客（强烈推荐）：</p><p><a href="http://www.opticsjournal.net/Mobile/postdetails/PT160728000122iOlRn?code=3&amp;from=singlemessage&amp;isappinstalled=0" target="_blank" rel="noopener">http://www.opticsjournal.net/Mobile/postdetails/PT160728000122iOlRn?code=3&amp;from=singlemessage&amp;isappinstalled=0</a></p><h1 id="DSP库移植"><a href="#DSP库移植" class="headerlink" title="DSP库移植"></a>DSP库移植</h1><p><strong>1.FFT运算效率</strong></p><p>　　使用STM32官方提供的DSP库进行FFT，虽然在使用上有些不灵活（因为它是基4的FFT，所以FFT的点数必须是4^n），但其执行效率确实非常高效，看图1所示的FFT运算效率测试数据便可见一斑。该数据来自STM32 DSP库使用文档。</p><p><img src="https://images0.cnblogs.com/blog/430074/201412/092014394315467.png" alt="img"></p><p> 图1 FFT运算效率测试数据</p><p>　　由图1可见，在STM32F10x系列处理器上，如果使用72M的系统主频，进行64点的FFT运算，仅仅需要0.078ms而已。如果是进行1024点的FFT运算，也才需要2.138ms。</p><p><strong>2.如何使用STM32提供的DSP库函数</strong></p><p><strong>2.1下载STM32的DSP库</strong></p><p>　　大家可以从网上搜索下载得到STM32的DSP库，这里提供一个下载的地址：</p><p>   <a href="https://download.csdn.net/download/helenie/9700505" target="_blank" rel="noopener">https://download.csdn.net/download/helenie/9700505</a></p><p><strong>2.2添加DSP库到自己的工程项目中</strong></p><p>　　下载得到STM32的DSP库之后，就可以将其添加到自己的工程项目中了。</p><p>　　其中，inc文件夹下的stm32_dsp.h和table_fft.h两个文件是必须添加的。stm32_dsp.h是STM32的DSP库的头文件。</p><p>　　src文件夹下的文件可以有选择的添加（用到那个添加那个即可）。因为我只用到了256点的FFT，所以这里我只添加了cr4_fft_256_stm32.s文件。添加完成后的项目框架如图2所示。</p><p><img src="C:%5CUsers%5Ccaihanyuan%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200706105441305.png" alt="image-20200706105441305"></p><p>图2 项目框架</p><p><strong>2.3模拟采样数据</strong></p><p>　　根据采样定理，采样频率必须是被采样信号最高频率的2倍。这里，我要采集的是音频信号，音频信号的频率范围是20Hz到20KHz，所以我使用的采用频率是44800Hz。那么在进行256点FFT时，将得到44800Hz / 256 = 175Hz的频率分辨率。</p><p>　　为了验证FFT运算结果的正确性，这里我模拟了一组采样数据，并将该采样数据存放到了long类型的lBufInArray数组中，且该数组中每个元素的高16位存储采样数据的实部，低16位存储采样数据的虚部(总是为0)。</p><p>　　为什么要这样做呢？是因为后面要调用STM32的DSP库函数，需要传入的参数规定了必须是这样的数据格式。</p><p>　　下面是具体的实现代码：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/******************************************************************</span></span><br><span class="line"><span class="comment">函数名称:InitBufInArray()</span></span><br><span class="line"><span class="comment">函数功能:模拟采样数据，采样数据中包含3种频率正弦波(350Hz，8400Hz，18725Hz)</span></span><br><span class="line"><span class="comment">参数说明:</span></span><br><span class="line"><span class="comment">备    注:在lBufInArray数组中，每个数据的高16位存储采样数据的实部，</span></span><br><span class="line"><span class="comment">          低16位存储采样数据的虚部(总是为0)</span></span><br><span class="line"><span class="comment">作　　者:博客园 依旧淡然（http://www.cnblogs.com/menlsh/）</span></span><br><span class="line"><span class="comment">*******************************************************************/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InitBufInArray</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">unsigned</span> short i;</span><br><span class="line">    <span class="keyword">float</span> fx;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;NPT; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        fx = <span class="number">1500</span> * <span class="built_in">sin</span>(PI2 * i * <span class="number">350.0</span> / Fs) +</span><br><span class="line">             <span class="number">2700</span> * <span class="built_in">sin</span>(PI2 * i * <span class="number">8400.0</span> / Fs) +</span><br><span class="line">             <span class="number">4000</span> * <span class="built_in">sin</span>(PI2 * i * <span class="number">18725.0</span> / Fs);</span><br><span class="line">        lBufInArray[i] = ((<span class="keyword">signed</span> short)fx) &lt;&lt; <span class="number">16</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>　其中，NPT是采样点数256，PI2是2π（即6.28318530717959），Fs是采样频率44800。可以看到采样数据中包含了3种频率的正弦波，分别为350Hz，8400Hz和18725Hz。</p><p><strong>2.4调用DSP库函数进行FFT</strong></p><p>　　进行256点的FFT，只需要调用STM32 DSP库函数中的cr4_fft_256_stm32()函数即可。该函数的原型为：</p><p>　　void cr4_fft_256_stm32(void *pssOUT, void *pssIN, uint16_t Nbin);</p><p>　　其中，参数pssOUT表示FFT输出数组指针，参数pssIN表示要进行FFT运算的输入数组指针，参数Nbin表示了点数。至于该函数的具体实现，因为是用汇编语言编写的，我也不懂，这里就不妄谈了。</p><p>　　下面是具体的调用实例：</p><p>　　cr4_fft_256_stm32(lBufOutArray, lBufInArray, NPT);</p><p>　　其中，参数lBufOutArray同样是一个long类型的数组，参数lBufInArray就是存放模拟采样数据的采样数组，NPT为采样点数256。</p><p>　　调用该函数之后，在lBufOutArray数组中就存放了进行FFT运算之后的结果数据。该数组中每个元素的数据格式为；高16位存储虚部，低16位存储实部。</p><p><strong>2.5计算各次谐波幅值</strong></p><p>　　得到FFT运算之后的结果数据之后，就可以计算各次谐波的幅值了。</p><p>　　下面是具体的实现代码：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/******************************************************************</span></span><br><span class="line"><span class="comment">函数名称:GetPowerMag()</span></span><br><span class="line"><span class="comment">函数功能:计算各次谐波幅值</span></span><br><span class="line"><span class="comment">参数说明:</span></span><br><span class="line"><span class="comment">备　　注:先将lBufOutArray分解成实部(X)和虚部(Y)，然后计算幅值(sqrt(X*X+Y*Y)</span></span><br><span class="line"><span class="comment">作　　者:博客园 依旧淡然（http://www.cnblogs.com/menlsh/）</span></span><br><span class="line"><span class="comment">*******************************************************************/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GetPowerMag</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">signed</span> short lX,lY;</span><br><span class="line">    <span class="keyword">float</span> X,Y,Mag;</span><br><span class="line">    <span class="keyword">unsigned</span> short i;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;NPT/<span class="number">2</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        lX  = (lBufOutArray[i] &lt;&lt; <span class="number">16</span>) &gt;&gt; <span class="number">16</span>;</span><br><span class="line">        lY  = (lBufOutArray[i] &gt;&gt; <span class="number">16</span>);</span><br><span class="line">        X = NPT * ((<span class="keyword">float</span>)lX) / <span class="number">32768</span>;</span><br><span class="line">        Y = NPT * ((<span class="keyword">float</span>)lY) / <span class="number">32768</span>;</span><br><span class="line">        Mag = <span class="built_in">sqrt</span>(X * X + Y * Y) / NPT;</span><br><span class="line">        <span class="keyword">if</span>(i == <span class="number">0</span>)</span><br><span class="line">            lBufMagArray[i] = (<span class="keyword">unsigned</span> <span class="keyword">long</span>)(Mag * <span class="number">32768</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            lBufMagArray[i] = (<span class="keyword">unsigned</span> <span class="keyword">long</span>)(Mag * <span class="number">65536</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其中，数组lBufMagArray存储了各次谐波的幅值。</p><p><strong>2.6实验结果</strong></p><p>　　通过串口，我们可以将lBufMagArray数组中各次谐波的幅值（即各个频率分量的幅值）输出打印出来，具体实验数据如下所示：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line">i,         P,       Mag,         X,         Y</span><br><span class="line">   0,         0,         4,         0,        -4</span><br><span class="line">   1,       175,        14,        -6,        -4</span><br><span class="line">   2,       350,      1492,       746,        -3</span><br><span class="line">   3,       525,        11,        -5,        -3</span><br><span class="line">   4,       700,         8,        -3,        -3</span><br><span class="line">   5,       875,         8,        -4,        -2</span><br><span class="line">   6,      1050,         6,        -3,         0</span><br><span class="line">   7,      1225,         6,        -3,         0</span><br><span class="line">   8,      1400,         8,        -4,        -2</span><br><span class="line">   9,      1575,         8,        -4,         0</span><br><span class="line">  10,      1750,         4,        -2,         0</span><br><span class="line">  11,      1925,         8,        -4,        -1</span><br><span class="line">  12,      2100,         6,        -3,         0</span><br><span class="line">  13,      2275,         5,        -2,        -2</span><br><span class="line">  14,      2450,         6,        -3,        -1</span><br><span class="line">  15,      2625,         8,        -3,        -3</span><br><span class="line">  16,      2800,         4,        -2,         0</span><br><span class="line">  17,      2975,         6,        -3,        -1</span><br><span class="line">  18,      3150,         6,        -3,         0</span><br><span class="line">  19,      3325,         6,        -3,         0</span><br><span class="line">  20,      3500,         2,        -1,         0</span><br><span class="line">  21,      3675,         4,        -2,         0</span><br><span class="line">  22,      3850,         4,        -2,         0</span><br><span class="line">  23,      4025,         4,        -2,         0</span><br><span class="line">  24,      4200,         6,        -3,         0</span><br><span class="line">  25,      4375,         6,        -3,         0</span><br><span class="line">  26,      4550,         4,        -2,         0</span><br><span class="line">  27,      4725,         6,        -3,         0</span><br><span class="line">  28,      4900,         2,        -1,         0</span><br><span class="line">  29,      5075,         4,        -2,        -1</span><br><span class="line">  30,      5250,         4,        -2,         0</span><br><span class="line">  31,      5425,         2,        -1,         0</span><br><span class="line">  32,      5600,         4,        -2,        -1</span><br><span class="line">  33,      5775,         6,        -3,        -1</span><br><span class="line">  34,      5950,         2,        -1,        -1</span><br><span class="line">  35,      6125,         6,        -3,        -1</span><br><span class="line">  36,      6300,         2,        -1,         0</span><br><span class="line">  37,      6475,         6,        -3,         0</span><br><span class="line">  38,      6650,         4,        -2,         0</span><br><span class="line">  39,      6825,         4,        -2,        -1</span><br><span class="line">  40,      7000,         2,        -1,         0</span><br><span class="line">  41,      7175,         6,        -3,         0</span><br><span class="line">  42,      7350,         2,        -1,         0</span><br><span class="line">  43,      7525,         2,        -1,         0</span><br><span class="line">  44,      7700,         2,        -1,         0</span><br><span class="line">  45,      7875,         2,        -1,         0</span><br><span class="line">  46,      8050,         4,        -2,         0</span><br><span class="line">  47,      8225,         2,        -1,         0</span><br><span class="line">  48,      8400,      2696,      1348,         0</span><br><span class="line">  49,      8575,         2,        -1,        -1</span><br><span class="line">  50,      8750,         0,         0,         0</span><br><span class="line">  51,      8925,         4,        -2,        -1</span><br><span class="line">  52,      9100,         2,         0,        -1</span><br><span class="line">  53,      9275,         0,         0,         0</span><br><span class="line">  54,      9450,         2,        -1,        -1</span><br><span class="line">  55,      9625,         2,        -1,         0</span><br><span class="line">  56,      9800,         2,        -1,         0</span><br><span class="line">  57,      9975,         2,        -1,        -1</span><br><span class="line">  58,     10150,         2,        -1,        -1</span><br><span class="line">  59,     10325,         2,        -1,         0</span><br><span class="line">  60,     10500,         0,         0,         0</span><br><span class="line">  61,     10675,         2,        -1,         0</span><br><span class="line">  62,     10850,         4,        -2,        -1</span><br><span class="line">  63,     11025,         2,        -1,        -1</span><br><span class="line">  64,     11200,         0,         0,         0</span><br><span class="line">  65,     11375,         2,        -1,         0</span><br><span class="line">  66,     11550,         0,         0,         0</span><br><span class="line">  67,     11725,         2,        -1,        -1</span><br><span class="line">  68,     11900,         2,        -1,        -1</span><br><span class="line">  69,     12075,         2,        -1,         1</span><br><span class="line">  70,     12250,         2,        -1,         1</span><br><span class="line">  71,     12425,         4,        -2,         1</span><br><span class="line">  72,     12600,         4,        -2,        -1</span><br><span class="line">  73,     12775,         2,        -1,         1</span><br><span class="line">  74,     12950,         0,         0,         0</span><br><span class="line">  75,     13125,         4,        -2,         0</span><br><span class="line">  76,     13300,         4,        -2,         0</span><br><span class="line">  77,     13475,         2,        -1,         0</span><br><span class="line">  78,     13650,         2,        -1,         0</span><br><span class="line">  79,     13825,         4,        -2,        -1</span><br><span class="line">  80,     14000,         2,        -1,         0</span><br><span class="line">  81,     14175,         4,        -2,         0</span><br><span class="line">  82,     14350,         2,        -1,         1</span><br><span class="line">  83,     14525,         4,        -2,         1</span><br><span class="line">  84,     14700,         4,        -2,         1</span><br><span class="line">  85,     14875,         2,        -1,         1</span><br><span class="line">  86,     15050,         4,        -2,         0</span><br><span class="line">  87,     15225,         2,        -1,         0</span><br><span class="line">  88,     15400,         4,        -2,         1</span><br><span class="line">  89,     15575,         4,        -2,         1</span><br><span class="line">  90,     15750,         2,        -1,         0</span><br><span class="line">  91,     15925,         2,        -1,         1</span><br><span class="line">  92,     16100,         2,        -1,         1</span><br><span class="line">  93,     16275,         2,        -1,         1</span><br><span class="line">  94,     16450,         4,        -2,         1</span><br><span class="line">  95,     16625,         2,        -1,         1</span><br><span class="line">  96,     16800,         2,        -1,        -1</span><br><span class="line">  97,     16975,         4,        -2,         0</span><br><span class="line">  98,     17150,         2,        -1,         0</span><br><span class="line">  99,     17325,         4,        -2,         0</span><br><span class="line"> 100,     17500,         4,        -2,         1</span><br><span class="line"> 101,     17675,         4,        -2,         0</span><br><span class="line"> 102,     17850,         4,        -2,         1</span><br><span class="line"> 103,     18025,         4,        -2,        -1</span><br><span class="line"> 104,     18200,         2,        -1,         1</span><br><span class="line"> 105,     18375,         4,        -2,         0</span><br><span class="line"> 106,     18550,         2,        -1,         1</span><br><span class="line"> 107,     18725,      3996,      1998,         1</span><br><span class="line"> 108,     18900,         2,        -1,         0</span><br><span class="line"> 109,     19075,         2,        -1,         1</span><br><span class="line"> 110,     19250,         4,        -2,         1</span><br><span class="line"> 111,     19425,         4,        -2,         1</span><br><span class="line"> 112,     19600,         2,         0,         1</span><br><span class="line"> 113,     19775,         2,        -1,         0</span><br><span class="line"> 114,     19950,         0,         0,         0</span><br><span class="line"> 115,     20125,         4,        -2,         1</span><br><span class="line"> 116,     20300,         2,         0,         1</span><br><span class="line"> 117,     20475,         2,         0,         1</span><br><span class="line"> 118,     20650,         2,        -1,         1</span><br><span class="line"> 119,     20825,         2,        -1,         1</span><br><span class="line"> 120,     21000,         2,        -1,         1</span><br><span class="line"> 121,     21175,         2,        -1,         0</span><br><span class="line"> 122,     21350,         2,         0,         1</span><br><span class="line"> 123,     21525,         2,        -1,         0</span><br><span class="line"> 124,     21700,         0,         0,         0</span><br><span class="line"> 125,     21875,         2,        -1,         1</span><br><span class="line"> 126,     22050,         2,        -1,         1</span><br><span class="line"> 127,     22225,         2,         0,         1</span><br></pre></td></tr></table></figure><p>在以上的实验数据中，我们分别打印出来了点数、频率、幅值、实部、虚部信息。</p><p>　　由以上的实验数据，我们可以看出，在频率为350Hz，8400Hz和18725Hz时，幅值出现峰值，分别为1492、2696和3996，这与我们所预期的结果正好相符，从而验证了实验结果的正确性。</p><h1 id="音频信号的采集"><a href="#音频信号的采集" class="headerlink" title="音频信号的采集"></a>音频信号的采集</h1><h3 id="信号来源于咪头采集的声音信号"><a href="#信号来源于咪头采集的声音信号" class="headerlink" title="信号来源于咪头采集的声音信号"></a>信号来源于咪头采集的声音信号</h3><p>以下是原理图：</p><p><img src="https://img-blog.csdn.net/20180802174710984?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L21jX2xp/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p><p>电路使用LM358搭建而成，采用单电源5V直流供电。由于单片机的ADC不能采集到负值，所以我们需要把信号加上了1/2Vcc的直流偏置，50倍增益可调。</p><p>这里如果考虑多一些，应当加一个低通滤波，去除高频信号的影响，防止出现频谱叠加，影响观赏效果。我们简单制作，就不考虑这个了。</p><p><img src="https://img-blog.csdn.net/20180815114224273?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L21jX2xp/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p><p><img src="https://img-blog.csdn.net/20180815114347187?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L21jX2xp/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p><p>这是之前的原理图，贴出来主要想说说这个原理图的问题。</p><p>输出端的电容C2，把运放输出的直流偏置个隔断了，导致信号的负半周期，又回到了0点以下，当然这里因为使用的是单电源，所以负半周期的信号，直接就没了，单片机采集不到负电压信号的，之前简单制作忽略了，这里特地说明一下，使用时应去掉C2，直接采集，如果考虑到放置输出接地损坏运放，也可以把C2换成电阻，做输出限流保护，这里因为设计了新的方案就不多说原来的图了。</p><p>下面是重新设计的原理图</p><p><img src="https://img-blog.csdnimg.cn/20190331200257604.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L21jX2xp,size_16,color_FFFFFF,t_70" alt="img"></p><p>信号采集和调理<br>信号来源：有两个，一个为麦克风（U7)，另一个为3.5mm音频座，通过SW_2来切换两个信号来源送入运放端。</p><p>直流偏置：由R21和R22分压得到1.65V经过C41滤波后，通过R25耦合到运放正向输入端，提供较为稳定的直流偏置电压。</p><p>增益控制：1+((R24+R17)/R16）得到输入信号V_in的增益，直流偏置电压不会增益。其中C30起了关键作用，第一它阻断了放大电路的直流电流，使得正输入端干净的 2.5V 顺利传递到运放的输出端；第二它耦合通过了交变信号，使其完成了放大。</p><p>信号滤波：后级是R19、R20、C31、C34构成的二阶压控式低通滤波器，截止频率在5KHz左右。得到的信号AD_IN送入单片机采集。</p><h3 id="使用stm32的ADC去采集咪头电路输出的信号"><a href="#使用stm32的ADC去采集咪头电路输出的信号" class="headerlink" title="使用stm32的ADC去采集咪头电路输出的信号"></a>使用stm32的ADC去采集咪头电路输出的信号</h3><p>因为我们的采样频率要固定在10KHz，所以这里使用定时器去触发ADC转换，再使用DMA搬运</p><h1 id="信号处理"><a href="#信号处理" class="headerlink" title="信号处理"></a>信号处理</h1><p><strong>移植官方DSP库</strong></p><p>可参考这位大大的博客：<a href="https://www.cnblogs.com/menlsh/p/4154070.html" target="_blank" rel="noopener">https://www.cnblogs.com/menlsh/p/4154070.html</a></p><p>填充数据和计算幅值</p><p><img src="https://img-blog.csdn.net/20180815113633257?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L21jX2xp/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p><h1 id="量化显示"><a href="#量化显示" class="headerlink" title="量化显示"></a>量化显示</h1>]]></content>
      
      
      <categories>
          
          <category> Stm32 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Stm32 </tag>
            
            <tag> DSP库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AD学习</title>
      <link href="/2020/06/23/AD/AD%E5%AD%A6%E4%B9%A0/"/>
      <url>/2020/06/23/AD/AD%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h1><ul><li><kbd>Shift</kbd> + <kbd>M</kbd>  清楚测量的距离</li><li><kbd>Ctrl</kbd> + <kbd>Q</kbd> 转换单位 </li><li><kbd>M</kbd> 移动（以什么为基准移动多少mm）</li><li>选中引脚后 <kbd>A</kbd> 可以进行对齐</li><li>按 <kbd>Shift</kbd> 可以拖动引脚排序  /  拷贝（画原理图的时候）</li><li>按 <kbd>X</kbd> 或 <kbd>Y</kbd> 进行对X/Y轴镜像</li><li>按 <kbd>Shift</kbd> 然后移动滚轮是左右移动</li><li>按空格旋转</li></ul><a id="more"></a>]]></content>
      
      
      <categories>
          
          <category> Stm32 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Stm32 </tag>
            
            <tag> AD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mpvue开发微信小程序</title>
      <link href="/2020/06/23/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/%E5%9F%BA%E4%BA%8Empvue%E6%A1%86%E6%9E%B6%E5%BC%80%E5%8F%91%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
      <url>/2020/06/23/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/%E5%9F%BA%E4%BA%8Empvue%E6%A1%86%E6%9E%B6%E5%BC%80%E5%8F%91%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h1><ul><li><p>微信开发者工具</p></li><li><p>nodejs环境安装</p></li><li><p>vue-cli脚手架工具</p></li><li><p>vscode编写代码</p></li></ul><a id="more"></a><h1 id="mpvue"><a href="#mpvue" class="headerlink" title="mpvue"></a>mpvue</h1><h3 id="mpvue介绍"><a href="#mpvue介绍" class="headerlink" title="mpvue介绍"></a>mpvue介绍</h3><blockquote><p>mpvue官网：<a href="http://mpvue.com/" target="_blank" rel="noopener">http://mpvue.com/</a></p></blockquote><p><code>mpvue</code> （<a href="https://github.com/Meituan-Dianping/mpvue" target="_blank" rel="noopener">github 地址请参见</a>）是一个使用 <a href="https://vuejs.org/" target="_blank" rel="noopener">Vue.js</a> 开发小程序的前端框架。框架基于 <code>Vue.js</code> 核心，<code>mpvue</code> 修改了 <code>Vue.js</code> 的 <a href="http://mpvue.com/mpvue" target="_blank" rel="noopener">runtime</a> 和 <a href="http://mpvue.com/mpvue-template-compiler" target="_blank" rel="noopener">compiler</a> 实现，使其可以运行在小程序环境中，从而为小程序开发引入了整套 <code>Vue.js</code> 开发体验。</p><ul><li><a href="http://mpvue.com/mpvue/" target="_blank" rel="noopener">官方使用手册</a></li><li><a href="http://mpvue.com/mpvue/quickstart.html" target="_blank" rel="noopener">官方教程</a></li></ul><h1 id="vuecli"><a href="#vuecli" class="headerlink" title="vuecli"></a>vuecli</h1><blockquote><p>官网地址：<a href="https://cn.vuejs.org/index.html" target="_blank" rel="noopener">https://cn.vuejs.org/index.html</a></p></blockquote><p><img src="C:%5CUsers%5Ccaihanyuan%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200708224306973.png" alt="image-20200708224306973"></p><h1 id="vscode开发"><a href="#vscode开发" class="headerlink" title="vscode开发"></a>vscode开发</h1><p>scss代码格式化插件：</p><p><img src="C:%5CUsers%5Ccaihanyuan%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200708230046234.png" alt="image-20200708230046234"></p><p>vue语法格式化：</p><p><img src="C:%5CUsers%5Ccaihanyuan%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200708230141804.png" alt="image-20200708230141804"></p><h1 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h1><h3 id="创建框架"><a href="#创建框架" class="headerlink" title="创建框架"></a>创建框架</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 安装 vue-cli 3</span></span><br><span class="line">$ yarn global add @vue/cli</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 安装桥接工具</span></span><br><span class="line">$ yarn global add @vue/cli-init</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 创建项目 "my-project"是可以改的，就是项目的名字</span></span><br><span class="line">$ vue init mpvue/mpvue-quickstart my-project</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 进入项目</span></span><br><span class="line">$ <span class="built_in">cd</span> my-project</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. 安装所有依赖</span></span><br><span class="line">$ yarn</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6. 运行</span></span><br><span class="line">$ npm run dev</span><br></pre></td></tr></table></figure><h4 id="出现问题："><a href="#出现问题：" class="headerlink" title="出现问题："></a>出现问题：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Command vue init requires a global addon to be installed.</span><br><span class="line">Please run yarn global add @vue&#x2F;cli-init and try again.</span><br></pre></td></tr></table></figure><p>解决方法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @vue/cli-init</span><br></pre></td></tr></table></figure><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200714203916.png" alt=""></p><p>然后按照提示输入</p><p>然后打开创建的项目</p><h3 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h3><p>在终端输入<code>npm install</code></p><h3 id="在微信小程序中打开可能会出现，未找到app-json入口文件"><a href="#在微信小程序中打开可能会出现，未找到app-json入口文件" class="headerlink" title="在微信小程序中打开可能会出现，未找到app.json入口文件"></a>在微信小程序中打开可能会出现，未找到<code>app.json</code>入口文件</h3><ol><li><p>情景一：</p><p>通过 <code>vue init mpvue/mpvue-quickstart my-project</code> 创建一个mpvue项目，发现项目中没有<code>app.json</code>文件。</p><p><strong>解决：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure><p>编译一下，会在根目录生成一个dist文件夹，<code>app.json</code>在其中。</p></li></ol><ol start="2"><li><p>情景二：</p><p>复制<code>mpvue</code>项目，没有<code>dist</code>文件夹，</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br><span class="line"></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><p>执行了这两步后，生成了<code>dist</code>文件夹，但是其中没有<code>app.json</code>文件。</p><p><strong>解决：</strong>把<code>packpage.json</code>文件里的<code>mpvue-loade</code>后面的<code>‘^’</code>去掉，再执行下面两步</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br><span class="line"></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure></li></ol><h3 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h3><p>用于支持scss语法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -D sass-loader node-sass</span><br></pre></td></tr></table></figure><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200714233112.png" alt=""></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save mqtt</span><br></pre></td></tr></table></figure><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200714233253.png" alt=""></p><h3 id="查看是否安装好"><a href="#查看是否安装好" class="headerlink" title="查看是否安装好"></a>查看是否安装好</h3><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200714233352.png" alt=""></p><ul><li><code>mpvue</code>和<code>mqtt</code>安装完成</li></ul><p><img src="http://qcev8hlsw.bkt.clouddn.com//20200714233546.png" alt=""></p><ul><li><code>node-sass</code>安装成功</li></ul><h1 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure><h1 id="Module-build-failed-TypeError-this-getResolve-is-not-a-function-at-Object-loader-安装node-sass运行报错"><a href="#Module-build-failed-TypeError-this-getResolve-is-not-a-function-at-Object-loader-安装node-sass运行报错" class="headerlink" title="Module build failed: TypeError: this.getResolve is not a function at Object.loader 安装node-sass运行报错"></a>Module build failed: TypeError: this.getResolve is not a function at Object.loader 安装node-sass运行报错</h1><h3 id="vue安装node-sass编译报错"><a href="#vue安装node-sass编译报错" class="headerlink" title="vue安装node-sass编译报错"></a>vue安装node-sass编译报错</h3><ul><li><a href="https://blog.csdn.net/ze1024/article/details/100516650#nodescss_1" target="_blank" rel="noopener">安装node-scss报错</a></li></ul><h3 id="安装node-scss报错"><a href="#安装node-scss报错" class="headerlink" title="安装node-scss报错"></a>安装node-scss报错</h3><p>在搭建vue脚手架 或者是在vue项目中，想使用sass的功能，</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install node-sass --save-dev //安装node-sass </span><br><span class="line">npm install sass-loader --save-dev //安装sass-loader </span><br><span class="line">npm install style-loader --save-dev //安装style-loader</span><br></pre></td></tr></table></figure><p>安装完成后，运行时出现了错误</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Modele build failed: TypeError: this.getResolve is not a function at Object.loader...</span><br></pre></td></tr></table></figure><p>这是因为当前sass的版本太高，webpack编译时出现了错误，这个时候只需要换成低版本的就行，下面说一下修改方法，很简单，如下</p><p>找到<code>package.json</code>文件，里面的 “<code>sass-loader</code>“的版本更换掉 就行了。</p><p>我本地是将    “<code>sass-loader&quot;: &quot;^8.0.0</code>“，更换成了 “<code>sass-loader&quot;: &quot;^7.3.1</code>“</p><p>这时候重新跑项目，就运行成功了。</p><p><strong>也可以</strong>先卸载当前版本，然后安装指定的版本</p><p>卸载当前版本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall sass-loader</span><br></pre></td></tr></table></figure><p>安装指定版本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install sass-loader@7.3.1 --save-dev</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> mpvue </category>
          
          <category> 小程序 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mpvue </tag>
            
            <tag> 小程序 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTML笔记</title>
      <link href="/2020/06/23/%E7%BD%91%E9%A1%B5/HTML%E7%AC%94%E8%AE%B0/"/>
      <url>/2020/06/23/%E7%BD%91%E9%A1%B5/HTML%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="HTML-简介"><a href="#HTML-简介" class="headerlink" title="HTML 简介"></a>HTML 简介</h1><p>也叫作超文本标记语言，是一种使用结构化Web网页及其内容的标记语言，您可以使用HTML来建立自己的WEB站点。</p><a id="more"></a><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>我的第一个标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>我的第一个段落。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="实例解析"><a href="#实例解析" class="headerlink" title="实例解析"></a>实例解析</h2><ul><li><code>DOCTYPE</code>声明了文档的类型</li><li><code>&lt;html&gt;</code>标签是 HTML 页面的根元素，该标签的结束标志为<code>&lt;/html&gt;</code></li><li><code>&lt;head&gt;</code>标签包含了文档的元数据（<code>meta</code>），如<code>&lt;meta charset=&quot;utf-8&quot;&gt;</code>定义网页编码格式为utf-8。</li><li><code>&lt;title&gt;</code>标签定义文档的标题</li><li><code>&lt;body&gt;</code>标签定义文档的主体，即网页可见的页面内容，该标签的结束标志为<code>&lt;/body&gt;</code></li><li><code>&lt;h1&gt;</code>标签作为一个标题使用，该标签的结束标志为<code>&lt;/h1&gt;</code>，–　<a href="https://www.w3cschool.cn/html/html-heading.html" target="_blank" rel="noopener">HTML标题</a></li><li><code>&lt;p&gt;</code>标签作为一个段落显示，该标签的结束标志为<code>&lt;/p&gt;</code>–<a href="https://www.w3cschool.cn/htmltags/tag-p.html" target="_blank" rel="noopener">p标签用法</a></li></ul><h2 id="什么是-HTML"><a href="#什么是-HTML" class="headerlink" title="什么是 HTML?"></a>什么是 HTML?</h2><p>HTML 语言用于描述网页。</p><ul><li>HTML 是指超文本标记语言: <strong>H</strong>yper <strong>T</strong>ext <strong>M</strong>arkup <strong>L</strong>anguage</li><li>HTML 不是一种编程语言，而是一种<a href="https://baike.baidu.com/item/标记语言/5964436?fr=aladdin" target="_blank" rel="noopener"><strong>标记</strong>语言</a></li><li>标记语言是一套<strong>标记标签</strong> (markup tag)</li><li>HTML 使用标记标签来<strong>描述</strong>网页</li><li>HTML 文档包含了HTML <strong>标签</strong>及<strong>文本</strong>内容</li><li>HTML 文档也叫做 <strong>web 页面</strong></li></ul><h2 id="HTML-标签"><a href="#HTML-标签" class="headerlink" title="HTML 标签"></a>HTML 标签</h2><p>HTML 标记标签通常被称为 HTML 标签 (HTML tag)。您可以在 W3Cschool 的<a href="https://www.w3cschool.cn/codecamp/say-hello-to-html-element.html" target="_blank" rel="noopener">编程实战</a>部分开始学习 HTML 标签。</p><ul><li>HTML 标签是由<em>尖括号</em>包围的关键词，比如<code>&lt;html&gt;</code></li><li>HTML 标签通常是<em>成对出现</em>的，比如<code>&lt;b&gt;</code>和<code>&lt;/b&gt;</code></li><li>标签对中的第一个标签是<em>开始标签<em>，第二个标签是</em>结束标签</em></li></ul><h2 id="HTML-元素"><a href="#HTML-元素" class="headerlink" title="HTML 元素"></a>HTML 元素</h2><p>“HTML 标签” 和 “<a href="https://www.w3cschool.cn/html/html-elements.html" target="_blank" rel="noopener">HTML 元素</a>“ 通常都是描述相同的意思。</p><p>但是严格来讲，一个 HTML元素包含了开始标签与结束标签，如下实例:</p><p>HTML 元素:</p><p>This is a paragraph.</p><h2 id="Web-浏览器"><a href="#Web-浏览器" class="headerlink" title="Web 浏览器"></a>Web 浏览器</h2><p>Web 浏览器（如谷歌浏览器、Internet Explorer、Firefox 和 Safari）是用于读取 HTML 文件，并将其作为网页显示。</p><p>Web 浏览器不会直接显示 HTML 标签，而是通过使用标签来决定如何向用户展现 HTML 页面的内容</p><h2 id="HTML-网页结构"><a href="#HTML-网页结构" class="headerlink" title="HTML 网页结构"></a>HTML 网页结构</h2><p>下面是一个可视化的 HTML 页面结构（只有<code>&lt;body&gt;</code>标签中的内容会显示在浏览器中）：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span>  //一级</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span>  //二级</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>This a heading<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>  //三级</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>This is a paragraph.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>This is another paragraph.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="HTML-版本"><a href="#HTML-版本" class="headerlink" title="HTML 版本"></a>HTML 版本</h2><p>从最初的非标准化的超文本标记语言诞生后，HTML 已经更新了多个版本：</p><table><thead><tr><th align="center">版本</th><th align="center">发布时间</th></tr></thead><tbody><tr><td align="center">HTML</td><td align="center">1991</td></tr><tr><td align="center">HTML+</td><td align="center">1993</td></tr><tr><td align="center">HTML 2.0</td><td align="center">1995</td></tr><tr><td align="center">HTML 3.2</td><td align="center">1997</td></tr><tr><td align="center">HTML 4.01</td><td align="center">1999</td></tr><tr><td align="center">XHTML 1.0</td><td align="center">2000</td></tr><tr><td align="center">HTML5</td><td align="center">2012</td></tr><tr><td align="center">XHTML5</td><td align="center">2013</td></tr></tbody></table><h2 id="lt-DOCTYPE-gt-声明"><a href="#lt-DOCTYPE-gt-声明" class="headerlink" title="&lt;!DOCTYPE&gt; 声明"></a>&lt;!DOCTYPE&gt; 声明</h2><p><code>&lt;!DOCTYPE&gt;</code>是标准通用标记语言的文档类型声明，有助于在浏览器中正确地显示网页。</p><p>　由于网络上文件的类型不一，因此需要正确声明 HTML 版本，以使得浏览器能够正确识别并显示您的网页内容。</p><p><code>doctype</code>声明是不区分大小写的，以下方式均可使用：</p><!DOCTYPE html><p><br><!DOCTYPE HTML><br><!doctype html><br><!Doctype Html></p><h2 id="通用声明"><a href="#通用声明" class="headerlink" title="通用声明"></a>通用声明</h2><h3 id="HTML5"><a href="#HTML5" class="headerlink" title="HTML5"></a>HTML5</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br></pre></td></tr></table></figure><h2 id="中文编码"><a href="#中文编码" class="headerlink" title="中文编码"></a>中文编码</h2><p>在 HTML 页面的头部声明字符为 UTF-8 可以解决在浏览器中出现中文乱码的现象。</p><h2 id="HTML-实例"><a href="#HTML-实例" class="headerlink" title="HTML 实例"></a>HTML 实例</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>页面标题<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>这是我的第一个标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>这是我的第一个段落。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="HTML-调试"><a href="#HTML-调试" class="headerlink" title="HTML 调试"></a>HTML 调试</h1><h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><p>我们通过一段含有错误的 HTML 代码来讨论一下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>HTML 调试示例<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>什么使得 HTML 出错？</span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>未闭合的元素：如果元素<span class="tag">&lt;<span class="name">strong</span>&gt;</span>没有正确的结束标记，那么将影响下方整个区域，这不是你期望的。</span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>错误嵌套元素：正确进行嵌套是一项重要的编码习惯。<span class="tag">&lt;<span class="name">strong</span>&gt;</span>重点（strong）<span class="tag">&lt;<span class="name">em</span>&gt;</span>重点强调（strongly emphasised）？<span class="tag">&lt;/<span class="name">strong</span>&gt;</span>这又是什么鬼？<span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>未闭合的属性：另一种 HTML 常见错误。来看一个示例：<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://www.mozilla.org/&gt;Mozilla 主页链接&lt;/a&gt;</span></span></span><br><span class="line"><span class="tag"><span class="string">&lt;/ul&gt;</span></span></span><br></pre></td></tr></table></figure><p><strong>以下是上述代码出现的问题：</strong></p><ul><li>段落（Paragraph） 和列表项（list item）元素没有结束标签。但是由于元素的结束和另一个的开始很容易推断出来，因此上图中并没有太严重的渲染错误。</li><li>第一个<code>&lt;strong&gt;</code>元素没有结束标签。这就严重了，因为该元素结束的位置难以确定。事实上所有剩余文本都加粗了。</li><li>第二个<code>&lt;li&gt;</code>元素中存在嵌套问题：对于“<code>&lt;strong&gt;</code>重点（strong）<code>&lt;em&gt;</code>重点强调（strongly emphasised）？<code>&lt;/strong&gt;</code>这又是什么鬼？<code>&lt;/em&gt;</code>”浏览器很难做出正确解释，理由同上。</li><li><code>href</code>属性缺少了一个双引号。从而导致了一个最严重的问题：整个链接完全没有渲染出来。</li></ul><p>　<strong>但是浏览器会尝试修补代码错误：</strong></p><ul><li><code>&lt;p&gt;</code>和<code>&lt;li&gt;</code>元素加上了关闭标签。</li><li>第一个<code>&lt;strong&gt;</code>没有明确的关闭标签，因此浏览器为之后所有独立块都补全了<code>&lt;strong&gt;``&lt;/strong&gt;</code>。</li><li>浏览器是这样修补嵌套错误的：</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">strong</span>&gt;</span>重点（strong）</span><br><span class="line">  <span class="tag">&lt;<span class="name">em</span>&gt;</span>重点强调（strongly emphasised）？<span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">em</span>&gt;</span>这又是什么鬼？<span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>删除整个缺少双引号的链接。最后一个列表项就成了：</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">strong</span>&gt;</span>未闭合的属性：另一种 HTML 常见错误。来看一个示例：<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure><p>阅读以上示例后，你会发现保持良好 HTML <strong>格式的重要性</strong>。</p><h1 id="HTM-基础"><a href="#HTM-基础" class="headerlink" title="HTM 基础"></a>HTM 基础</h1><h2 id="HTML-标题"><a href="#HTML-标题" class="headerlink" title="HTML 标题"></a>HTML 标题</h2><p>HTML 标题（Heading）是通过<code>&lt;h1&gt; - &lt;h6&gt;</code>标签来定义的.</p><ul><li><p><code>h</code>是英文<code>header</code>标题的缩写</p></li><li><p>这里有六个标题元素标签 —— <code>&lt;h1&gt;</code>、<code>&lt;h2&gt;</code> 、<code>&lt;h3&gt;</code>、<code>&lt;h4&gt;</code>、<code>&lt;h5&gt;</code>、<code>&lt;h6&gt;</code>，每个元素代表文档中不同级别的内容：</p></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span>  //中文</span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>html标题<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>这是标题1<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>这是标题2<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>这是标题3<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h4</span>&gt;</span>这是标题4<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h5</span>&gt;</span>这是标题5<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h6</span>&gt;</span>这是标题6<span class="tag">&lt;/<span class="name">h6</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="HTML-段落"><a href="#HTML-段落" class="headerlink" title="HTML 段落"></a>HTML 段落</h2><p>HTML 段落是通过标签<code>&lt;p&gt;</code>来定义的</p><ul><li><code>P</code>是英文<code>paragraph</code>段落的缩写</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>这是一个段落。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>这是另外一个段落。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="HTML中的空格"><a href="#HTML中的空格" class="headerlink" title="HTML中的空格"></a>HTML中的空格</h2><p>无论你用了多少空格（包括空格字符，包括换行），当渲染这些代码的时候，HTML解释器会将连续出现的空格字符减少为一个单独的空格符。</p><h2 id="HTML-链接"><a href="#HTML-链接" class="headerlink" title="HTML 链接"></a>HTML 链接</h2><p>HTML 链接是通过标签<code>&lt;a&gt;</code>来定义的</p><ul><li><code>a</code>标签，也叫<code>anchor（锚点）</code>元素</li><li>既可以用来链接到外部地址实现页面跳转功能，也可以链接到当前页面的某部分实现内部导航功能。</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://www.w3cschool.cn"</span>&gt;</span>这是一个链接<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><img src="https://www.w3cschool.cn/attachments/image/20170627/1498550568787494.png"><h2 id="HTML-图像"><a href="#HTML-图像" class="headerlink" title="HTML 图像"></a>HTML 图像</h2><p>HTML 图像是通过标签<code>&lt;img&gt;</code>来定义的</p><ul><li>使用<code>img</code>元素来为你的网站添加图片，使用<code>src</code> 属性指向一个图片的具体地址。</li></ul><p>举例如下：</p><p>(可以在后面控制高度和宽度 width=”???” height=”???”)</p><img src="http://img.duoym.com/wp-content/uploads/2020/06/Sc2ix.jpg"><p><code>img</code> 元素的 <code>alt</code> 属性</p><ul><li><code>alt</code> 属性中的文本用于屏幕阅读器以提高可访问性。</li></ul><img src="http://qcev8hlsw.bkt.clouddn.com//006qU3kLly1gfit6k2t0uj30qj11jjwo.jpg" alt="your-image"><h2 id="HTML-强调"><a href="#HTML-强调" class="headerlink" title="HTML 强调"></a>HTML 强调</h2><ul><li>HTML中我们可以使用<code>&lt;em&gt;要强调的内容&lt;/em&gt;</code>元素来标记这样的情况，浏览器默认风格为斜体：</li></ul><p>    I am <em>glad</em> you weren't <em>late</em>.</p><ul><li>HTML中我们还可以使用<code>&lt;strong&gt;要强调的内容&lt;/strong&gt;</code>元素来标记这样的请况，浏览器默认风格为粗体：</li></ul><p>This liquid is <strong>highly toxic</strong>.</p> <p>I am counting on you. <strong>Do not</strong> be late!</p><blockquote><p> 注意：为了不同的字体风格，我们应该使用元素和一些<a href="https://www.w3cschool.cn/css/" target="_blank" rel="noopener">CSS</a>的样式.</p></blockquote><h1 id="HTML-元素-1"><a href="#HTML-元素-1" class="headerlink" title="HTML 元素"></a>HTML 元素</h1><ul><li>HTML 文档由 HTML 元素定义，HTML 元素指的是从开始标签（start tag）到结束标签（end tag）的所有代码。</li></ul>]]></content>
      
      
      <categories>
          
          <category> 网页类 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>微信小程序学习</title>
      <link href="/2020/06/23/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
      <url>/2020/06/23/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/</url>
      
        <content type="html"><![CDATA[<blockquote><p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/" target="_blank" rel="noopener">微信官方小程序文档</a></p><p><a href="https://blog.csdn.net/u012814856/article/details/80944562?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-3.nonecase&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-3.nonecase" target="_blank" rel="noopener">微信小程序官方示例 Demo 源代码获取</a></p><p><a href="https://blog.csdn.net/u012814856/article/details/81565183" target="_blank" rel="noopener">微信小程序：三个月学习开发实录</a></p></blockquote><a id="more"></a><h3 id="三个app文件分别是app-js-app-json-app-wxss。"><a href="#三个app文件分别是app-js-app-json-app-wxss。" class="headerlink" title="三个app文件分别是app.js,app.json,app.wxss。"></a>三个app文件分别是app.js,app.json,app.wxss。</h3><ul><li><p>app.js文件是脚本文件处理一些公共的或者全局的逻辑。比如在这里定义全局变量处理登录逻辑指定首页等。</p></li><li><p>app.json文件是小程序的整体配置文件。我们必须要在这个文件中配置小程序是由哪些页面组成的，我们还可以在这个文件中配置整个小程序的统一的窗口 背景色，导航条 样式，默认标题。但是必须注意该文件不可添加任何注释。</p></li><li><p>app.wxss文件是整个小程序的公共样式表。我们可以在小程序子页面组件的 class 属性上直接使用 app.wxss 中声明的样式规则。也就是说在这个文件里定义的样式在其他任何的子页面中都可以使用。这个也是为了代码的简洁和整体风格的统一。</p></li></ul><h3 id="接下来说pages文件夹："><a href="#接下来说pages文件夹：" class="headerlink" title="接下来说pages文件夹："></a>接下来说pages文件夹：</h3><ul><li><p>小程序的所有显示的页面都必须以子文件夹的形式存放在pages文件夹里面，包括首页。项目展示多少个页面，在pages文件夹下就要新建多少个子文件夹。每个页面的子文件夹，必须包括这四个文件：.js , .wxml , .wxss 和 .json（* 表示文件名）。这四个文件的文件名必须和子文件夹的名字一样。</p></li><li><p>*.js文件是当前页面脚本文件，也是业务逻辑的处理文件，当前页面的所有和后端服务器接口的交互，请求数据的逻辑都在这个文件完成，是核心文件，必须创建。</p></li><li><p>.wxml文件是搭建当前页面元素的文件。负责搭建当前页面的结构和布局，相当于网页开发中的.html文件，这个文件中存放一些类似于div span form input sectiond等布局代码，必须创建。</p></li><li><p>*.wxss文件是当前页面的样式文件。负责调整当前页面的样式，元素之间的间距，字体的大小，字体颜色，背景图等，相当于网页开发中的css文件，需要时创建。</p></li><li><p>*.json文件是当前页面的配置文件。配置当前页面的窗口背景色，导航条样式，默认标题等，需要时创建不需要千万不要创建，这里我发现一个bug，就是如果创建了这个配置文件，但是配置文件中没有任何内容，那么页面渲染的时候什么也显示不出来，所以如果创建了这个文件，那么就必须在这个文件里写点什么即使写“{}”也行，要不然就不要创建。（个人猜测：是如果json文件为空，小程序在加载的时候就认为这个json配置是错的，页面渲染终止。我已经把这个bug提交给微信官方了！！！）</p></li></ul><p>JavaScript web 开发人员必须学习的 3 门语言中的一门：</p><ol><li><strong>HTML</strong> 定义了网页的内容</li><li><strong>CSS</strong> 描述了网页的布局</li><li><strong>JavaScript</strong> 网页的行为</li></ol><h1 id="颜色"><a href="#颜色" class="headerlink" title="颜色"></a>颜色</h1><p>微信的绿色：#04BE02</p><p>参考：</p><ul><li><p><a href="https://www.sioe.cn/yingyong/yanse-rgb-16/" target="_blank" rel="noopener">https://www.sioe.cn/yingyong/yanse-rgb-16/</a></p></li><li><p><a href="https://www.w3school.com.cn/cssref/css_colornames.asp" target="_blank" rel="noopener">https://www.w3school.com.cn/cssref/css_colornames.asp</a></p></li></ul><h1 id="使用vscode开发小程序"><a href="#使用vscode开发小程序" class="headerlink" title="使用vscode开发小程序"></a>使用vscode开发小程序</h1><p>用到的插件</p><p><img src="C:%5CUsers%5Ccaihanyuan%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200708013657333.png" alt="image-20200708013657333"></p><h1 id="JS语法"><a href="#JS语法" class="headerlink" title="JS语法"></a>JS语法</h1><h1 id="WXML语法参考"><a href="#WXML语法参考" class="headerlink" title="WXML语法参考"></a>WXML语法参考</h1><blockquote><p>转自微信官方文档</p></blockquote><p>WXML（WeiXin Markup Language）是框架设计的一套标签语言，结合<a href="https://developers.weixin.qq.com/miniprogram/dev/component/index.html" target="_blank" rel="noopener">基础组件</a>、<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/event.html" target="_blank" rel="noopener">事件系统</a>，可以构建出页面的结构。</p><p>用以下一些简单的例子来看看 WXML 具有什么能力：</p><h3 id="数据绑定"><a href="#数据绑定" class="headerlink" title="数据绑定"></a><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/data.html" target="_blank" rel="noopener">数据绑定</a></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span> &#123;&#123;message&#125;&#125; <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">// page.js</span><br><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    message: 'Hello MINA!'</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="列表渲染"><a href="#列表渲染" class="headerlink" title="列表渲染"></a><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/list.html" target="_blank" rel="noopener">列表渲染</a></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">"&#123;&#123;array&#125;&#125;"</span>&gt;</span> &#123;&#123;item&#125;&#125; <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">// page.js</span><br><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    array: [1, 2, 3, 4, 5]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="条件渲染"><a href="#条件渲染" class="headerlink" title="条件渲染"></a><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/conditional.html" target="_blank" rel="noopener">条件渲染</a></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span>=<span class="string">"&#123;&#123;view == 'WEBVIEW'&#125;&#125;"</span>&gt;</span> WEBVIEW <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:elif</span>=<span class="string">"&#123;&#123;view == 'APP'&#125;&#125;"</span>&gt;</span> APP <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:else</span>=<span class="string">"&#123;&#123;view == 'MINA'&#125;&#125;"</span>&gt;</span> MINA <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">// page.js</span><br><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    view: 'MINA'</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="模板"><a href="#模板" class="headerlink" title="模板"></a><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/template.html" target="_blank" rel="noopener">模板</a></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">name</span>=<span class="string">"staffName"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">    FirstName: &#123;&#123;firstName&#125;&#125;, LastName: &#123;&#123;lastName&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">is</span>=<span class="string">"staffName"</span> <span class="attr">data</span>=<span class="string">"&#123;&#123;...staffA&#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">is</span>=<span class="string">"staffName"</span> <span class="attr">data</span>=<span class="string">"&#123;&#123;...staffB&#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">is</span>=<span class="string">"staffName"</span> <span class="attr">data</span>=<span class="string">"&#123;&#123;...staffC&#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">// page.js</span><br><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    staffA: &#123;firstName: 'Hulk', lastName: 'Hu'&#125;,</span><br><span class="line">    staffB: &#123;firstName: 'Shang', lastName: 'You'&#125;,</span><br><span class="line">    staffC: &#123;firstName: 'Gideon', lastName: 'Lin'&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>具体的能力以及使用方式在以下章节查看：</p><p><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/data.html" target="_blank" rel="noopener">数据绑定</a>、<a href="https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/list.html" target="_blank" rel="noopener">列表渲染</a>、<a href="https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/conditional.html" target="_blank" rel="noopener">条件渲染</a>、<a href="https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/template.html" target="_blank" rel="noopener">模板</a>、<a href="https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/import.html" target="_blank" rel="noopener">引用</a></p><p><strong>微信小程序正式公测，</strong> <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D911">张小龙全面阐述小程序，定档1月9日上线（附90分钟演讲全文） …</a></p><h1 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h1><p>视频中老师的接口仅供学习使用，可能会发生宕机而来不及处理，推荐大家一个免费的数据使用接口，还有配套的后台管理系统，可以随意编辑修改数据，<a href="https://www.it120.cc/，我已经改好并使用https://github.com/Kotoba209/wx-mall，使用方法也已经说明，后面讲到创建订单需要获取用户token也可以用此来实现。" target="_blank" rel="noopener">https://www.it120.cc/，我已经改好并使用https://github.com/Kotoba209/wx-mall，使用方法也已经说明，后面讲到创建订单需要获取用户token也可以用此来实现。</a></p><h1 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h1><p>Ctrl+S：保存文件</p><p>Ctrl+【， Ctrl+】：代码行缩进</p><p>Ctrl+Shift+【， Ctrl+Shift+】：折叠打开代码块</p><p>Ctrl+C Ctrl+V：复制粘贴，如果没有选中任何文字则复制粘贴一行</p><p>Shift+Alt+F：代码格式化</p><p>Alt+Up，Alt+Down：上下移动一行</p><p>Shift+Alt+Up，Shift+Alt+Down：向上向下复制一行</p><p>Ctrl+Shift+Enter：在当前行上方插入一行</p><p>Ctrl+End：移动到文件结尾</p><p>Ctrl+Home：移动到文件开头</p><p>Ctrl+i：选中当前行</p><p>Shift+End：选择从光标到行尾</p><p>Shift+Home：选择从行首到光标处</p><p>Ctrl+Shift+L：选中所有匹配</p><p>Ctrl+D：选中匹配</p><p>Ctrl+U：光标回退</p><h1 id="新人第一坑，跳坑指南"><a href="#新人第一坑，跳坑指南" class="headerlink" title="新人第一坑，跳坑指南"></a>新人第一坑，跳坑指南</h1><p><img src="C:%5CUsers%5Ccaihanyuan%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200708012650410.png" alt="image-20200708012650410"></p><p>1：官方工具：<a href="https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/debug/wxadoc/dev/devtools/download.html%3Ft%3D1476434678461">https://mp.weixin.qq.com/debug/w … tml?t=1476434678461</a></p><p>2：简易教程：<a href="https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/debug/wxadoc/dev/%3Ft%3D1476434677599">https://mp.weixin.qq.com/debug/wxadoc/dev/?t=1476434677599</a></p><p>3：设计指南：<a href="https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/debug/wxadoc/design/index.html">https://mp.weixin.qq.com/debug/wxadoc/design/index.html</a></p><p>4：设计资源下载：<a href="https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/debug/wxadoc/design/%23">https://mp.weixin.qq.com/debug/wxadoc/design/#</a>资源下载</p><p>5：微信小程序公测接入指南：<a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D259">http://www.wxapp-union.com/portal.php?mod=view&amp;aid=259</a></p><p>6：微信小程序支付文档：<a href="https://link.zhihu.com/?target=https%3A//pay.weixin.qq.com/wiki/doc/api/wxa/wxa_api.php%3Fchapter%3D3_1%23">https://pay.weixin.qq.com/wiki/d … pi.php?chapter=3_1#</a></p><p>7：新手入门宝典：<a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D1989">http://www.wxapp-union.com/forum.php?mod=viewthread&amp;tid=1989</a></p><p>8：免费视频：<a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dforumdisplay%26fid%3D37%26filter%3Dtypeid%26typeid%3D7">http://www.wxapp-union.com/forum.php?mod=forumdisplay&amp;fid=37&amp;filter=typeid&amp;typeid=7</a></p><p>9：实战宝典：<a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/special/solution.html">http://www.wxapp-union.com/special/solution.html</a></p><p>10：从注册到上线系列：<a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D4375">http://www.wxapp-union.com/forum.php?mod=viewthread&amp;tid=4375</a></p><p>11：精品专题：</p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14793%26highlight%3D%E5%BE%AE%E4%BF%A1%E5%B0%8F%E6%B8%B8%E6%88%8F">微信小游戏集合：教程+资讯+Demo</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dtopic%26topicid%3D5">小程序图表功能 - 小程序社区</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dtopic%26topic%3Dxiaochengxiu_pay">小程序支付指南 - 小程序社区</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dtopic%26topic%3Dshoppingdev">小程序商城开发 - 小程序社区</a></p><h2 id="导航系列："><a href="#导航系列：" class="headerlink" title="导航系列："></a><strong>导航系列：</strong></h2><p><strong>1-6月</strong><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D30%26highlight%3D%E5%AF%BC%E8%88%AA">微信小程序导航：官方文档+精品教程+demo集合</a></p><p><strong>7月</strong><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D7428%26highlight%3D%E4%B8%83%E6%9C%88">微信小程序导航：官方文档+精品教程+demo集合</a></p><p><strong>8月</strong><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D8396%26page%3D1%26extra%3D%23pid58689">微信小程序导航：官方文档+精品教程+demo集合</a></p><p><strong>9月</strong><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D10132%26extra%3Dpage%3D1">微信小程序导航：官方文档+精品教程+demo集合</a></p><p><strong>10月</strong><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D12367%26page%3D1%26extra%3D%23pid72500">微信小程序导航：官方文档+精品教程+demo集合</a></p><p><strong>11月</strong><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D13287%26page%3D1%26extra%3D%23pid75502">微信小程序导航：官方文档+精品教程+demo集合</a></p><h2 id="小程序实战教程"><a href="#小程序实战教程" class="headerlink" title="小程序实战教程"></a><strong>小程序实战教程</strong></h2><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4331">做好这三步，你的小程序离“爆款”就不远了</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4334">撸一个小程序前置授权组件</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4335">小程序—九宫格心形拼图效果</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4333">小程序的持续集成方案</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4332">微信小程序iOS端如何暂停animated动画</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4329">小程序如何获取群聊的openGid以及名称</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4327">Asp.Net Core SignalR 与微信小程序交互笔记</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4328">解决微信小程序真机 showToast 不显示</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4326">微信小程序实现WebSocket心跳重连</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4325">支付宝首页置顶小程序入口</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4324">小程序的拖拽、缩放和旋转手势</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4323">强烈推荐：绝对是最好的一个小程序开源框架</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4321">微信小程序：漫画小程序项目总结</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4322">[微信小程序开发]如何去掉或隐藏小程序顶部栏navigationBar</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4320">解决微信小游戏排行榜 Android 模糊问题</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4319">新版微信内含5大彩蛋，有一个极其“反人类”！</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4315">简易商城小程序全栈开发(mpvue+koa+mongodb)</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4316">微信小程序–旋转木马/缩放轮播图效果</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4314">微信小程序使用相机</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4313">微信小程序 - 前三排名实现</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4312">小游戏灰产深度调查：刷量成瘾“涮”了谁？</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4309">微信小程序开发之从“跳伞”到“吃鸡”</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4308">小程序自定义组件-可清除的input组件</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4306">微信小程序适配 iPhone X 总结</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4305">“后悔”订阅号改版？腾讯想要的一直很明确</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4304">基于后端云微信小程序开发</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4303">小程序开发实用技巧——扩展 Page 页面对象</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4302">weapp-cookie：一行代码让微信小程序支持 cookie</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4301">微信小程序调起键盘性能优化</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4300">小程序社交层面的6种推广方法，了解一下啊！</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4298">多人对战游戏开发实例之《组队小鸡射击》（附源码）</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4297">微信小程序车牌键盘</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4296">开发笔记：使用 mpvue 开发斗图小程序</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4295">2018互联网最终幻想：短视频掌握人生，还是小程序栅格化世界 …</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4294">总结：猜画小歌火爆的3个因素以及背后折射的产品理念</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4293">微信小程序开发框架从入门到放弃</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4292">简单谈谈setTimeout与setInterval</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4291">扫码付小程序优化实践</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4290">小游戏灰产深度调查：刷量成瘾“涮”了谁？</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4289">从BAT小程序到手机厂商快应用：看着相似，但各有痛点</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4288">微信小程序仿APP section header 悬停效果</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4287">小程序开发技巧总结</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4286">一款小程序增强开发工具 - EWA</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4285">Google 小程序「猜画小歌」背后的 AI 技术和原理浅析</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4284">百度腾讯双核驱动，小程序的“黄金时代”已来？</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4283">微信小游戏好友排行榜快速开发教程</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4281">手把手教你搭建小程序音视频</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4282">精确计算微信小程序scrollview高度，全机型适配</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4280">微信小程序Java登录流程（ssm实现具体功能和加解密隐私信息问题解决方案） …</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4279">谷歌“猜画小歌”入驻微信小程序，折射 Google AI 入局中国的野心 …</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4278">【微信小程序】性能优化</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4277">喂，快给我打一个小程序预览码</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4276">微信大升级，“我的小程序”入口将会被哪些产品抢占？</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4275">小程序内容产品是不是伪命题？认真你就输了！</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4274">微信揭秘小程序搜索排名规则，公众号竟是重要关键！</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4273">小程序–推荐一个我梦寐以求的开源库</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4271">微信小程序：一个json帮你完成分享朋友圈图片</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4272">微信2018年上半年“大招频出”，原因何在</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4270">突发！微信放大招，开放50个小程序超级入口</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4268">JDReact 小程序双向转换工具介绍</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4269">React转微信小程序:双模板联动</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4266">小程序“三国杀”：百度向左，微信、支付宝向右</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4267">小程序 LRU 存储设计</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4265">微信小程序研究报告：3大趋势，揭示小程序的边界（附排行榜） …</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4264">我与小程序的故事以及小程序框架选型</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4263">小程序分享，看这篇就够了</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4262">微信小程序的下一步：支持 NPM、小程序云、可视化编程、支持分包 … …</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4260">猫眼小程序如何发展起来，并留存用户？</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4261">小程序广告组件全量开放</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4259">小游戏大能量，数据见证100天：2000＋款游戏，100＋项能力，千万级日流水111 …</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4256">微信小程序 canvas 绘图问题总结</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4255">微信小程序腾讯视频插件的使用</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4254">小程序浅析</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4253">浅谈：如何策划小程序拼团活动？</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4252">轻应用开发的”下半场”，会是一场鸡肋反击战吗？</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4249">微信小程序隐藏客服按钮，用图片替代&amp;增加提示卡片可随时关闭。 …</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4248">新手入坑mpvue(没朋友)实战指南</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4246">微信重磅更新 品牌搜索功能开放</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4247">百度新发布的智能小程序是什么？</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4245">2个方面总结：小程序的产品设计</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4244">如何获得你的第一个智能小程序</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4243">百度智能小程序介绍</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4242">微信小程序中如何打开另一个小程序</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4240">微信小程序 自定义组件 - 弹出菜单demo</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4239">小程序火了！BTA三家要借它打造成流量收</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4238">拼多多：成为洞见“微信生态”的标杆</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4236">微信小程序 CSS 选择器::after和::before的简单使用</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4235">Taro实践 - TOPLIFE小程序 开发体验</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4232">小程序生成图片库</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4234">被订阅号反将一军的小程序，还有创业机会吗？</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4231">百度智能小程序割微信韭菜：开发者成最大赢家</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4229">微信小程序如何获取地理位置和进行地图导航</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4228">微信小程序 CSS filter（滤镜）的使用示例</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4227">微信小程序设置图片固定比例</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4226">React转微信小程序：从React类定义到Component调用</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4225">2018新媒体下半年深度预测：增长恐慌，流量洼地</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4222">微信小程序 wx.request 对于 JSON 含 u2028 处理异常</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4224">微信小程序根据金纬度规划路线</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4223">微信小程序测试指南</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4221">微信小程序客服自动回复消息功能踩坑</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4220">小程序基础核心组件库处理Banner、图片上传、列表刷新</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4219">成了腾讯“增量”利器，微信小程序的春天真来了？</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4218">微信小程序使用code换openid的方法（JAVA、SpringBoot）</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4217">微信小程序填坑心路</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4216">小程序生态带来的流量红利，微博也不想放过</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4215">你有一份小程序产品设计心经，请查收</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4214">600天后，这是我关于小程序生态、入局和流量的理解</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4213">小程序•小故事——真机定位问题技巧</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4212">小程序上传一张或多张图片到阿里云OSS</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4211">微信小程序专题之setData</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4210">【微信小程序】编译 .wxss 文件异常解决</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4209">微信小程序利用canvas生成海报分享图片</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4208">记一次小程序项目的开发心得</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4207">原型故事之「蜂巢群聊」小程序</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4205">微信小程序带图片弹窗简单实现</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4204">小程序之保存图片到相册的几种方法</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4203">微信小程序——获取绑定事件元素的ID</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4202">适配mpvue平台的的微信小程序日历组件mpvue-calendar</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4201">微信小程序支付流程梳理</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4198">【腾讯游戏人生】微信小程序开发总结</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4199">微信小程序-封装请求（GET、POST）</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4197">浅析微信小程序 App() 和 Page() 函数的内部实现</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4196">2周1500万GMV！礼物说这个端午节营销做对了什么？</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4200">赞赏和转载功能升级</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4194">【小程序】微信小程序绑定企业微信后怎样获取到用户信息</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4193">终极蛇皮上帝视角之微信小程序之告别“刀耕火种”</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4192">没朋友(mpvue)，点个外卖，一个人也要好好吃饭</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4190">微信订阅号改版，真的算是“信息流”了吗？</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4189">从聊天工具到小程序 微信的操作系统之路</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4188">实操总结 | 小程序裂变0成本获客3要素</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4187">小程序开发心得</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4186">要和微信小程序竞争？华为应用商店正式上线快应用：不下载就能用 …</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4185">小程序——带参返回上一页几种方法</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4184">七天速成小程序–喜马拉雅</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4183">mpvue开发小程序所遇问题及h5转化方案</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4182">wx-caman——基于 CamanJS 的微信小程序 Canvas 像素级滤镜处理库</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4181">小程序插件能力升级：开放插件登录能力</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4180">小程序的十万个为什么丨框架</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4179">小程序的十万个为什么丨框架</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4178">『技术分享』—— 我的第一个微信小程序-趣闻</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4177">携程小程序初体验</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4176">爱奇艺小程序陪你嗨一夏</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4175">微信小程序模拟 cookie</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4174">重磅 | 微信订阅号全新改版上线！</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4173">“小红书”——给你安利几个小程序的“坑”</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4172">世界杯来了！小程序赛事操作来一波~</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4171">娱乐型小程序是如何鹤立鸡群的？</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4170">小程序中如何接入人脸融合功能</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4169">微信小程序开发之从相册获取图片 使用相机拍照 本地图片上传 … …</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4168">微信小程序 open-data更改样式 open-data 显示头像 圆形</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4167">JS实现监控微信小程序</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4166">小程序分包加载功能升级，新增性能监控</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4165">小程序效果–星星评价（网页通用）</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4164">小程序: moveable-area 和 movealbe-view</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4163">Atom 微信小程序文件代码高亮</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4162">微信群互喷席卷全网，群主月入数万闷声发财</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4161">小程序基础能力及开发者工具升级</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4160">appium+python自动化56-微信小程序自动化（摩拜为例）</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4159">找工作怎么办，拉勾小程序来帮你</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4158">wepy+weappx开发小程序遇到的坑以及解决方案</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4157">力挺京东618，微信搜索商业化的第一枪打响</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4156">你大概不知道，小程序也在掀巨头们的桌子</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4153">微信小程序—电商家具入门篇</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4152">scroll-view组件的bindscroll实例应用：自定义进度条</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4151">浅谈微信小程序用setStorage和getStorage缓存和获取数据</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4150">TalkingData小程序报告：70亿资本涌入，超100万开发者参与，今年用户规模将破7亿？ ..</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4149">把小游戏关了，该上班了</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4147">开发者工具版本更新： 2018.6.11 (1.02.1806080)</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4146">腾讯地图插件</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4144">小程序js文件改变参数并在视图上及时更新</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4143">利用css transition属性实现一个带动画显隐的微信小程序部件</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4141">携程小程序初体验</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4140">微信小程序使用回调解决onLoad与onLaunch执行顺讯问题的终极分析 …</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4139">mp-parser：小程序原生单文件开发工具</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4137">微信小程序瀑布流最好最简单的解决方案</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4135">开发一款图片上传+用户反馈(留言)小程序，附前端+后端代码</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4136">微信小程序使用SM.MS免费图床进行上传删除图片操作</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4134">小协议的48小时</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4133">基于模板消息的小程序用户回流体系</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4132">小程序wepy上拉下拉解决方案</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4131">写给 Android 开发的小程序 UI 布局指南（一）</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4128">微信小程序日历选择-类似酒店预订方式有节日标识</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4127">小程序的拖拽、缩放和旋转手势</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4125">小程序填坑实录</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4129">微信小程序——使用setData修改数组中的单个对象</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4124">足迹地图刷屏朋友圈，国人的隐私看起来如此廉价</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4123">如何开发小程序中的朋友圈功能</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4122">滴滴一下，小程序专车来了（下）</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4121">滴滴一下，小程序专车来了（上）</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4119">NBA资讯小程序</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4118">36氪新风向 | 小程序里的中老年流量，是红利还是陷阱？</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4116">一个同时支持移动端与小程序的聊天机器人</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4115">公众号赞赏功能升级</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4114">36氪首发 | 小程序最新榜单发布，VC出现“恐慌性”投资</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4113">一个公式，告诉你PV千万的刷屏小程序都是怎么玩的</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4110">手把手教你在小程序里使用 Redux</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4112">Django+uwsgi+nginx微信小程序环境搭建</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4111">微信小程序之swiper组件高度自适应</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4108">小程序的这些坑你踩过吗？</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4107">小程序之open-data userAvatarUrl头像做圆角</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4105">微信小程序开发BUG经验总结</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4104">只需两步获取任何微信小程序源码</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4103">微信小程序自定义tab，多层tab嵌套实现</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4102">如何让用户主动分享小程序？我们总结了几条实用经验</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4101">企业该用什么思维去做小程序，才能获取最大的运营价值？</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4099">H5与小程序如何共用的一套代码？ ——小程序混合开发</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4098">小程序广告能力再升级，这次的触角伸向QQ空间广告！</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4097">微信小程序分包加载实战</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4096">看大神如何玩转微信小程序日历插件？</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4095">微信小程序登录方式的修改解决方案</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4094">微信朋友圈外链分享再行新规，口令、识别码全部被禁</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4092">运营实战：独立运营小程序从0到50w增长</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4091">微信小程序多层展开/收起列表</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4089">微信小程序 WXS 实现各大前端框架中的 filter</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4088">微信小程序 scroll-view滚动到底部事件不触犯的锅</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4087">使用Java开发人脸融合(换军装等)并接入微信小程序</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4086">小程序内嵌H5——判断小程序环境的坑</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4083">微信小程序实现图片双滑缩放大小</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4084">微信小程序用户信息解密失败导致的内存泄漏问题</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4082">微信小程序api拦截器</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4081">微信小程序的那些事</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4080">新功能上线，不能只靠用户“自学”</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4079">微信小程序也要强行热更代码，鹅厂不服你来肛我呀</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4078">微信小程序敏感内容检测</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4077">小程序两条不同路径：微信封闭化、百度开放化</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4076">微信小程序图片使用示例</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4075">微信小程序里面scroll-view组件的scroll-into-view属性失效问题</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4074">小程序抛物线动画</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4073">解读：App 与小程序的互通能力和限制</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4072">新版本祭出“悬浮窗”大杀器，微信打响用户时间保卫战</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4069">百度加入小程序 BAT 大战，正式定名「智能小程序」</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4068">小程序wx.getRecorderManager()录音管理</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4067">如何给小程序页面加载一张背景图片</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4066">小程序报错: Uncaught TypeError: Converting circular structure to JSON</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4065">小程序风口丨微信小程序的三大引流模式和四大盈利模式</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4064">重磅！微信新上线“浮窗”功能，解决公众号长达6年的难题！ … …</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4063">使用button标签的open-type=”getUserInfo”引导用户去授权</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4062">iOS分享微信小程序</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4060">微信小程序 获取用户信息(wx.getUserInfo)调整</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4061">抖音总裁张楠控诉腾讯：搞垄断搞小动作，有失大将风度</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4059">7种不同类别对比，小程序和APP相比还有多大差别</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4058">微信小程序修改自定义input</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4057">深入wepy源码：wepy运行原理分析</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4056">微信小程序大转盘抽奖</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4055">我们这一代人的腾讯</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4054">案例研究｜一款APP的UX &amp; UI设计全过程</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4052">mpvue study</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4051">微信小程序-雷达图</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4050">微信小程序之无埋点函数调用监控</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4049">离开微信是不可能的，内容创作在小程序的春天里充满想象力 …</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4048">“分享禁令”能让微信摆脱“管道化”宿命吗？</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4047">微信小程序AES解密失败</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4046">(干货)微信小程序组件封装</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4045">小程序实现长按删除图片</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4044">App打开小程序及内容安全等能力开放</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4043">微信小程序运行流程看这篇就够了</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4041">微信小程序登录会话流程学习</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4042">萌新初探小程序开发</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4040">腾讯总裁刘炽平：没有考虑小程序商业变现，而是不断强化微信生态系统 …</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4039">小游戏分享滥用新“雷区”，注意别踩</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4038">分享功能调整及小程序组件更新</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4037">如何快速让用户提供信息？</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4036">小程序授权逻辑如何更改为button形式</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4035">微信小程序-两个input叠加，多次点击字体变粗或闪动</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4034">小程序条形倒计时动画</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4033">微信小程序开发–『狗蛋TV』</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4032">小程序商城运营优化的5条建议</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4027">微信这6大广告类型，全量支持小程序投放</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4031">关于微信小程序getUserInfo最新修改后，如何在原有项目的授权逻辑的调整 …</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4030">（干货）微信小程序转发好友</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4029">微信小程序开发一些经验</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D4028">浅析产品定位——点线面体</a></p><h2 id="小程序Demo集合"><a href="#小程序Demo集合" class="headerlink" title="小程序Demo集合"></a><strong>小程序Demo集合</strong></h2><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D15219">微信小程序Demo：银行卡识别小程序</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D15218">这个fb3718e5b0f73222869f13b61dcbe363怎么回事</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D15193">求一个测试类的微信小程序demo</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D15165">微信小程序Demo：天使童装（商城）</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D15136">微信小程序商城更新最新版 v1.8</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D15048">微信小程序Demo：佑米单词</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D15047">微信小程序Demo：一个动态速度仪动画的小程序</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D15046">微信小程序Demo：减肥小管家</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D15043">微信小程序Demo：婚礼请柬小程序</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14978">微信小程序Demo：万众充电（含后台）</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14947">微信小程序Demo：文经课表</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14944">微信小程序Demo：生成图片</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14941">微信小程序Demo：画画板</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14725">微信小程序Demo：会动的时钟</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14722">微信小程序Demo：语音口令红包</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14632">微信小程序Demo：官方飞机大战小游戏</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14627">微信小程序Demo：医疗类小程序（预约挂号问诊）</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14604">微信小程序Demo：豆瓣读书（简单版）</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14602">微信小程序Demo：华邦商城</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14599">微信小程序Demo： todolist 任务笔记小程序</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14537">微信小程序DEMO：美女志小程序前端源码</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14535">微信小程序Demo：圣诞许愿抽奖小程序</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14533">微信小程序Demo：小程序官方组件</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14351">Mark 影单小程序</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14336">微信小程序Demo：仿腾讯视频小程序</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14334">微信小程序Demo：周公解梦</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14332">微信小程序Demo：投融圈小程序（投资、融资类）</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14314">微信小程序Demo：妹子图小程序（前端）</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14313">微信小程序Demo：健身房预约课程小程序</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14312">微信小程序Demo：大宅小屋拼团</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14291">微信小程序Demo：小契约（交友互动小程序）</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14290">微信小程序Demo：查天气、签到小程序</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14279">微信小程序Demo：仿网易蜗牛读书</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14278">微信小程序Demo：家政预约</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14276">微信小程序Demo：倒班日历</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14274">微信小程序Demo：粤语小词典</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14107">微信小程序Demo：仿盒马鲜生</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14094">微信小程序Demo : 出发吧一起</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14075">微信小程序Demo：蝌蚪签到</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14049">微信小程序Demo：金融理财计算器</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14048">微信小程序Demo：支付宝+微信二维码收款小程序</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14047">上滑导航吸顶效果</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14013">微信小程序Demo：电器租赁小程序</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14012">微信小程序Demo：电影日历</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14011">微信小程序Demo：汤总便利小程序</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D14010">微信小程序Demo：球鞋商城</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D13227">微信小程序Demo；扫码购物商城（u便利微店）</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D13189">微信小程序Demo：华云智慧园区（公司小程序）</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D13046">微信小程序Demo：小程序组件ui库(有赞）</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D13040">微信小程序Demo：小程序增删改，登录，注册，图片上传</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D13039">微信小程序Demo：媒体文件处理(图片、音频、视频</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D12723">微信小程序Demo：卡卷小程序</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D12578">微信小程序Demo：宏华水利小程序（企业内部使用）</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D12577">微信小程序：平安保险小程序</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D12576">微信小程序Demo：天天快拍</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D12575">微信小程序Demo：Make Them Fight悠闲游戏</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D12574">微信小程序Demo：装修预约小程序</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D12453">微信小程序Demo：骆驼优品（商城）</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D11492">微信小程序Demo：电梯品牌商城</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D11421">微信小程序Demo：有住网（装修小程序）</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D11420">js里写好的数据怎么渲染到wxml ？</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D11396">微信小程序Demo：守望先锋资讯小程序</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D11393">微信小程序Demo：Bookshare 借书小程序</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D11392">微信小程序Demo：仿拉钩web端的微信小程序</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D11089">微信小程序Demo：零距智能餐厅</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D10983">微信小程Demo：城市/区县定位选择器</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D10883">微信小程序商城更新最新版 v1.5.0</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D10831">微信小程序Demo：成都公交卡记录查询</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D10830">微信小程序Demo：柠檬树婚纱照小程序</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D10829">微信小程序Demo：健身小程序 (仿keep）</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D10364">微信小程序Demo：招聘小程序</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D10363">微信小程序Demo：宝可梦图鉴（游戏）</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D10361">微信小程序Demo：学车小程序</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D10360">微信小程序Demo：随手涂鸦</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D10359">微信小程序Demo： 灵犀外卖</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D10316">微信小程序Demo：点餐外卖小程序</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D10267">商城产品展示</a></p><h2 id="插件-工具更新："><a href="#插件-工具更新：" class="headerlink" title="插件/工具更新："></a>插件/工具更新：</h2><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D4960">微信小程序框架wepy - 滑动删除插件</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D4945">微信小程序库–签名解密（php）</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D4944">微信小程序图片剪切</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D4935">微信小程序之自动登陆PHP源码</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D4914">微信小程序后端接口：登陆，检验，数据解密（go语言）</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D4903">微信小程序的异步请求</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D4863">自动生成svg雪碧图，支持微信小程序rpx单位</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D4851">微信小程序开发脚手架</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D4808">微信小程序 手势事件</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D4748">微信小程序滚动插件 xHSwiper</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D4716">微信小程序脚手架</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D4669">将分享卡片自动生成页面路径的的二维码的微信机器人</a></p><p>-——-</p><h2 id="特殊合集："><a href="#特殊合集：" class="headerlink" title="特殊合集："></a><strong>特殊合集：</strong></h2><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D4727">微信小程序特殊效果合集第一期</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D4811">微信小程序特殊效果合集第二期</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D4742">微信小程序优秀教程及文章合集第一期</a></p><p>微信小程序项目总结系列：作者：Tong_T，博客地址：Tong_T的博客 - 博客频道 - <a href="https://link.zhihu.com/?target=http%3A//csdn.net/">CSDN.NET</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D2128">微信小程序项目总结《一》序言、准备工作、项目构架</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D2136">微信小程序项目总结《二》配置、首页面开发</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D2137">微信小程序项目总结《三》阅读首页、阅读详情开发</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D2138">微信小程序项目总结《四》电影首页、电影更多开发</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D2139">微信小程序项目总结《五》电影首页、电影更多开发</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D2140">微信小程序项目总结《六》项目结束和补充总结</a></p><p>-——-</p><h2 id="跳坑系列更新："><a href="#跳坑系列更新：" class="headerlink" title="跳坑系列更新："></a>跳坑系列更新：</h2><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D4052%26highlight%3D%E8%B7%B3%E5%9D%91">跳坑《一百七十六》蓝牙API使用指南-</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D4055%26highlight%3D%E8%B7%B3%E5%9D%91">跳坑《一百七十七》场景值系统使用</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D4058%26highlight%3D%E8%B7%B3%E5%9D%91">跳坑《一百七十八》基础库及兼容低版本基础库说明</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D4059%26highlight%3D%E8%B7%B3%E5%9D%91">跳坑《一百七十九》收货地址wx.chooseAddress使用说明-</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D4065%26highlight%3D%E8%B7%B3%E5%9D%91">跳坑《一百八十》剪贴板API使用说明</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3575%26highlight%3D%E8%B7%B3%E5%9D%91">跳坑《一百三十二》用户未授权获取登录信息的替代方法</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3826%26highlight%3D%E8%B7%B3%E5%9D%91">跳坑《一百六十一》wx.saveFile文件保存API使用指南</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D4067%26highlight%3D%E8%B7%B3%E5%9D%91">跳坑《一百八十二》arrayBuffer与base64互转接口-</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D4066%26highlight%3D%E8%B7%B3%E5%9D%91">跳坑《一百八十一》设置API：wx.openSetting使用说明-</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D4091%26highlight%3D%E8%B7%B3%E5%9D%91">跳坑《一百八十三》三轴加速度计使用及调试说明</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D4092%26highlight%3D%E8%B7%B3%E5%9D%91">跳坑《一百八十四》换取session_key报40029错误-</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D4094%26highlight%3D%E8%B7%B3%E5%9D%91">跳坑《一百八十五》encryptedData数据解密41003错误</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D4100%26highlight%3D%E8%B7%B3%E5%9D%91">跳坑《一百八十六》支付签名校验失败-</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D4112%26highlight%3D%E8%B7%B3%E5%9D%91">跳坑《一百八十七》MAP地图markers使用问题相关说明-</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D4113%26highlight%3D%E8%B7%B3%E5%9D%91">跳坑《一百八十八》MAP地图controls控件使用问题</a></p><p><a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D4123%26highlight%3D%E8%B7%B3%E5%9D%91">跳坑《一百八十九》Uncaught Dom limit exceeded报错</a></p><p>-——-</p><p><strong>开发前必读简要</strong> 基于大量无效开发，无法上线的案例，所以开发前部分知识十分重要；| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3757">链接</a></p><p><strong>微信小程序个人注册简单步骤</strong> 打开<a href="https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com">http://mp.weixin.qq.com</a>，点击右上角立即注册，进入小程序注册| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3886">链接</a></p><p><strong>微信开发者工具【项目】详解</strong> 为什么我的小程序通过审核，但是搜索不到呢？原因是必须在后台内点击发布，才会发布；| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3176">链接</a></p><p><strong>小程序开发上线（发布）步骤</strong> 这篇帖子将简单的介绍基本的步骤，以便新手们建立一个基本的印象；| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D2763">链接</a></p><p><strong>从零开始：微信小程序新手入门宝典</strong> 为了方便大家了解并入门微信小程序，我将一些可能会需要的知识，列在这里； | <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D1989">链接</a></p><p><strong>安卓或ios开发者学习小程序指南</strong> 我发现很多安卓或是ios开发者，学习了小程序的开发，并且很顺利。 | <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3873">链接</a></p><p><strong>WXSS/CSS相关知识说明</strong> 为了更适合开发微信小程序，WXSS对 CSS 进行了扩充以及修改。| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3831">链接</a></p><p><strong>使用官方WEUI-WXSS相关知识</strong> 使用官方 UI 简化设计开发流程，如果你的项目对 UI 定制要求不是很高的话。|<a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3859">链接</a></p><p><strong>常用api域名配置列表及免费API集合</strong> 免费API大全以及后台配置域名的方法| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D803">链接</a></p><p><strong>一键添加小程序所有文件jswxmlwxssjson</strong>升级到新版后可以“一键”新建小程序4个常用文件，不用一个一个的去建，方便多了！| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D1656">链接</a></p><p><strong>常用快捷键总结 (mac系统/win系统)</strong>1: opt + shift + f : 代码格式化2: cmd + [, cmd+ ]代码行缩进。。。| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D2141">链接</a></p><p><strong>让他人体验自己的小程序</strong> 怎么让别人体验自己的小程序啊，我认为这个将是很多朋友即将遇到的问题| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D1248">链接</a></p><p><strong>官方社区使用指南</strong> 为了让大家解决问题更有效率，官方社区是必不可缺的。| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3590">链接</a></p><p><strong>如何让微信小程序更容易审核通过</strong> 微信小程序审核不通过，有很多原因，其中最明显的一点就是：服务类目问题；| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D1898">链接</a></p><p><strong>审核提供测试账号</strong> 自有账号体系 提交审核怎么提供测试账号| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D2291">链接</a></p><p><strong>关于如何将大神demo应用于自己项目</strong> 把大神们造轮子的逻辑应用于我们项目的相应组件上，这就是基本思路，有思路才能优雅 | <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3048">链接</a></p><p><strong>使用本地服务器进行调试</strong> 怎么请求本地网络啊 IP形式的网络？怎么访问本地架设的服务器？| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3765">链接</a></p><p><strong>开发者工具无法登录账号</strong> 最近开始频发无法登录账号的问题，诸如request https 404报错 登录态失效等 | <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3576">链接</a></p><p><strong>小程序敏感词汇过滤问题</strong> 用户需要发表内容的小程序，需要设定关键词过滤，屏蔽掉政策不允许的内容：| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D2727">链接</a></p><p><strong>公众号关联微信小程序简单方法</strong> 很多人可能会问，公众号如何添加微信小程序呢？步骤很简单： 1：<a href="https://link.zhihu.com/?target=https%3A//mp.weixin.q/">https://mp.weixin.q</a> | <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D2440">链接</a></p><p><strong>无法长按识别及无法分享到朋友圈的替代方法</strong> 看到<a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/home.php%3Fmod%3Dspace%26uid%3D5935">@327674413</a> 同学发了一个花样二维码，我看了之后，顿时来了一个灵感。。。 | <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3739">链接</a></p><p><strong>使用PHP/thinkphp后端问题</strong> 后端部分跟小程序的前端部分是分离的 | <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3767">链接</a></p><p><strong>使用java后端问题说明</strong> 请求数据方面没有区别，只需要提供json格式的数据接口即可；但是因为小程序方面对其他| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3802">链接</a></p><p><strong>使用nodeJS作为小程序后端</strong>node用的人很多啊。。稍微聚集一下相关的知识| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3805">链接</a></p><p><strong>使用C#解密用户信息</strong> 由于官方没有提供C#的解密demo，所以大家只能八仙过海各显神通了。。。 | <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3804">链接</a></p><p><strong>使用第三方SDK及服务及扩展库及框架</strong> 目前已经为小程序开发了SDK及可以辅助开发的库或框架或SDK| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3827">链接</a></p><p><strong>使用第三方库（第三方js）</strong> 小程序怎样引用第三方js呢？第三方js是封装好的类库 想引用进来实例化使用| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3093">链接</a></p><p><strong>使用第三方编辑器（IDE</strong>开发小程序，并非一定要使用官方的编辑器，你也可以任意选择自己喜欢的编辑器；| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3741">链接</a></p><p><strong>模块化、组件化及封装</strong> 开发过程中要学会不断的重构代码，尽量提高代码的可重用性，尽量不要复制相同的代码。| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3844">链接</a></p><p><strong>参数传递，跨页面传值或通讯相关知识</strong> 这个东西，是开发小程序必备神器，越深入了解，越可以有效的帮助自己|<a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3830">链接</a></p><p><strong>图表类：折线图，柱状图，K线，分时图</strong> 各类图表功能，小程序自带API并没有提供，所以很多人就用了其他方法来实现。| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3845">链接</a></p><p><strong>模版template使用，import及include</strong> template是小程序中的一个重要应用；WXML 提供两种文件引用方式import和include。 | <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3645">链接</a></p><p><strong>富文本解析：将html转为为wxml</strong>富文本解析是一个困扰无数人的问题，目前网上的解决方案已经比较多了 | <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3759">链接</a></p><p><strong>自定义字体/自定义图标相关</strong> 自定义图标及自定义字体，一直是很多小程序开发者的心病| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3145">链接</a></p><p><strong>微信小程序真机预览跟本地不同的问题</strong> 本地可以看到数据，打开调试也可以看到数据，关闭调试则看不到数据；或是开发版可以看| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D1909">链接</a></p><p><strong>常见错误及基本排除方法</strong> 也接触了不少人解决问题的过程里，有一些比较难以排查的可能性列举在这 | <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D1563">链接</a></p><p><strong>ios苹果真机相关问题</strong> 此问题只在ios上出现，而安卓没有问题；或是这个问题同时在安卓和ios上出现；| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3709">链接</a></p><p><strong>Android安卓真机相关问题</strong> 本帖特别针对以下两个情况：情况一：此问题只在安卓上出现，而ios没有问题；| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3657">链接</a></p><p><strong>Javascript 标准库兼容性及ES6支持度说明</strong>iOS、Android 和 开发者工具。三端的脚本执行及用于渲染非原生组件的环境是各不相同的| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3860">链接</a></p><p><strong>ssl证书相关问题</strong>errMsg: “request: fail ssl hand shake error”等错误及免费证书申请地址| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D2980">链接</a></p><p><strong>小程序1024K限制及代码压缩相关</strong> 为了提升小程序体验流畅度，编译后的代码包大小需小于 1MB ，大于 1MB 的代码包将上传| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3849">链接</a></p><p><strong>微信小程序支付（微信支付签名错误</strong> 发起支付时的签名需要有appId(不是appid,大小写)| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D1287">链接</a></p><p><strong>微信支付（微信小程序支付）</strong> 小程序仅支持微信支付；而微信支付需要认证后才可以使用，需要花费300元认证费用；| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3432">链接</a></p><p><strong>微信登录问题</strong> 有个登录功能，为什么小程序在别的手机上无法登录？| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D2822">链接</a></p><p><strong>Session、session_key及checkSession</strong> checkSession 就是用来检测 session_key 是否过期| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3345">链接</a></p><p><strong>用户未授权获取登录信息的替代方法</strong> 用户如果拒绝授权，需要10分钟等待后才可以再次申请授权；| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3575">链接</a></p><p><strong>授权获取用户信息的弹窗</strong> 授权获取用户信息窗口在开发工具可以多次提示，在手机上测试的时候只弹出一次，这是正| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D2443">链接</a></p><p><strong>openid与unionid</strong>微信登录必备| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D974">链接</a></p><p><strong>解密获取unionid问题</strong>unionid，需要 先在微信开放平台内绑定小程序；<a href="https://link.zhihu.com/?target=http%3A//open.weixin.qq.com">http://open.weixin.qq.com</a>，方可解密出unioni| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D2522">链接</a></p><p><strong>带参数二维码，返回数据保存为图片</strong>php，java，node，C#等保存为图片的方法| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D2549">链接</a></p><p><strong>带参数二维码相关知识</strong> 生成的数量有限制，总共只有10万个；另外，扫码访问次数没有限制。| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D2728">链接</a></p><p><strong>MD5加密使用说明</strong> 聚集一下md5加密在小程序中的使用相关的内容： | <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3829">链接</a></p><p><strong>页面路径五层限制</strong> 官方规定页面路径只能是五层，请尽量避免多层级的交互方式。| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3491">链接</a></p><p><strong>并发数及连接数限制及promise/async/await</strong> request 的最大并发数是 5；upload/download最大并发限制是 5 个| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3877">链接</a></p><p><strong>wx.downloadFile问题</strong>downloadFile，需要在小程序公众后台配置相应的downloadFile域名，否则会无法正常使用|<a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D2988">链接</a></p><p><strong>wx.uploadFile（上传文件）相关问题</strong> 特别提示一：upload必须在小程序公众后台配置上传域名，才可以在真机使用。| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3454">链接</a></p><p><strong>图片上传问题</strong> 域名检测全部是正确的，并且后台也配置了域名，但是安卓就是无法上传图片：| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3748">链接</a></p><p><strong>wx.openDocument打开文件</strong> 新开页面打开文档，支持格式：doc, xls, ppt, pdf, docx, xlsx, pptx| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3367">链接</a></p><p><strong>wx.saveFile文件保存API</strong>文件保存API是很多人懵逼的。。。| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3826">链接</a></p><p><strong>模板消息相关问题说明</strong> 当用户在小程序内完成过支付行为，可允许开发者向用户在7天内推送有限条数的模板消息| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D2831">链接</a></p><p><strong>客服消息相关（客服按钮修改</strong> 客服按钮能自己定义吗？可以的| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D2805">链接</a></p><p><strong>swiper轮播图组件</strong>1：如何上下滚动；2：如何点击；3：如何自定义指示点| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3734">链接</a></p><p><strong>button按钮组件使用</strong>button用来配合form或者单独点击| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3714">链接</a></p><p><strong>分享相关 知识onShareAppMessage</strong>只有定义了此事件处理函数，右上角菜单才会显示“分享”按钮| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D2914">链接</a></p><p><strong>image图片组件使用</strong>background-image：可以使用网络图片，或者 base64，或者使用标签| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3711">链接</a></p><p><strong>模态弹窗wx.showModal及遮罩层</strong> 带有输入框的弹窗| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3690">链接</a></p><p><strong>微信小程序缓存API相关知识</strong> 关于数据缓存，怎么能获取到本地缓存使用了多少，还剩多少| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3042">链接</a></p><p><strong>map组件，地图使用相关问题</strong> 包括百度地图，腾讯地图，高德地图api及各种地图相关demo| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3128">链接</a></p><p><strong>WebSocket相关问题说明</strong> 请保证wss域名符合https的要求；比如备案，不得带有端口等；| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3201">链接</a></p><p><strong>canvas相关问题说明</strong>canvas、textarea、video层级最高的变通方法| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3225">链接</a></p><p><strong>音频相关问题：播放，录音等相关</strong> 包括语音识别类demo及教程| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3236">链接</a></p><p><strong>录音文件格式为silk（silk转mp3）</strong> 暂不支持模拟录音，手机上录音目前是silk格式。如何转为mp3困住了不少人|<a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3504">链接</a></p><p><strong>语音搜索及语音识别相关</strong> 这属于小程序框架体系之外的功能，可以将语言传给第三方服务器进行识别| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3875">链接</a></p><p><strong>progress进度条及slider</strong>凑合看吧，比如自定义圆形进度条。。。| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3729">链接</a></p><p><strong>radio单选（单项选择器</strong> 文章及demo可能并非是radio的使用说明，而是实现了自定义了单选等；| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3720">链接</a></p><p><strong>switch开关选择器使用</strong> 自定义switch方法说明| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3718">链接</a></p><p><strong>组件系列：scroll-view</strong>实现滑动及锚点功能| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3244">链接</a></p><p><strong>组件系列：textarea</strong> textarea可能出现的问题五花八门，请做好心理准备| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3270">链接</a> <strong>input组件</strong> 坑点较多。。。| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3344">链接</a></p><p><strong>重力感应及罗盘API</strong>开始搞摇一摇了。。。| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3390">链接</a></p><p><strong>计时器/倒计时相关</strong> 倒计时，计时器等组件使用说明| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3396">链接</a></p><p><strong>视频播放相关（video组件）</strong>video标签认宽度300px、高度225px，设置宽高需要通过wxss设置width和height。| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3406">链接</a></p><p><strong>text组件，文本换行及空格</strong> 总结一下text组件，以及文本换行，文本溢出及空格，复制问题；| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3421">链接</a></p><p><strong>animation动画相关问题</strong> 本帖主要是针对animation的使用相关的教程及问题说明| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3624">链接</a></p><p><strong>toast吐司组件问题说明（自定义toast）</strong> 包括自定义toast等问题说明| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3643">链接</a></p><p><strong>picker及picker-view组</strong> 用途广泛的联动选择器，目前已经比较实用了；| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3646">链接</a></p><p><strong>tabbar相关问题说明</strong> 包括tabbar不显示，自定义tabbar等问题的说明| <a href="https://link.zhihu.com/?target=http%3A//www.wxapp-union.com/forum.php%3Fmod%3Dviewthread%26tid%3D3655">链接</a></p>]]></content>
      
      
      <categories>
          
          <category> 小程序 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 小程序 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
